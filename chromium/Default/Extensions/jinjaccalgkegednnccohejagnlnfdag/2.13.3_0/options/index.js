{const e=function(){return this||globalThis}(),{Boolean:t,Error:n,Object:o,Promise:l,document:s,window:a}=e,{hasOwnProperty:i,toString:r}={},c=o.call.bind(o.call),u=!e.chrome.app;(()=>{var r,d,h,p={5107:(n,r,d)=>{"use strict";function h(e,t){if(null==e)return{};var n,l,s={},a=o.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(s[n]=e[n]);return s}d.d(r,{m:()=>qi}),d(2993);var p=d(3293),m=d(287),g=d(3057),f=d(4017),v=d(7311),w=(d(5517),d(2262)),b=d(6252),x=d(8292),y=d(537);const C=(0,w.qj)({route:x.BC,scripts:[],isHiDPI:y.T,storageSize:0}),k=(0,b.Fl)(()=>C.scripts.filter(e=>!e.config.removed)),_=(0,b.Fl)(()=>C.scripts.filter(e=>e.config.removed));var S=d(3577);const z={class:"page-options flex h-screen"},U={class:"aside-content"},D=(0,b._)("img",{src:"/public/images/icon128.png"},null,-1),$=["textContent"],R={class:"aside-menu"},E=["href","data-num-scripts","textContent"];function V(e,t,n,o,l,s){return(0,b.wg)(),(0,b.iD)("div",z,[l.canRenderAside?((0,b.wg)(),(0,b.iD)("aside",{key:0,class:(0,S.C_)({"show-aside":l.aside})},[(0,b._)("div",U,[D,(0,b._)("h1",{class:"hidden-sm",textContent:(0,S.zw)(e.i18n("extName"))},null,8,$),(0,b._)("div",R,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(l.tabs,e=>((0,b.wg)(),(0,b.iD)("a",{key:e.name,href:`#${e.name}`,class:(0,S.C_)({active:e===s.current}),"data-num-scripts":"scripts"===e.name&&l.installedScripts.length||null,textContent:(0,S.zw)(e.label)},null,10,E))),128))])])],2)):(0,b.kq)("",!0),((0,b.wg)(),(0,b.j4)(b.Ob,null,[((0,b.wg)(),(0,b.j4)((0,b.LL)(s.tabComponent),{class:"tab flex-auto"}))],1024))])}var I=d(6930),T=d(8250),W=d(9963);const L={class:"tab-installed flex flex-col"},j={key:0,class:"flex flex-col flex-auto"},A={class:"flex"},Z={key:0,class:"flex-auto"},M={class:"btn-ghost",tabindex:"0"},H=["textContent"],P=["textContent"],N=["textContent"],O=["textContent"],B=["textContent"],F=["textContent"],q={class:"btn-ghost",tabindex:"0"},K=["value"],Y=["textContent","value"],J={class:"mr-2c"},G=["placeholder"],X=["textContent"],Q=["textContent"],ee=["textContent"],te=["textContent"],ne={key:0,class:"trash-hint mx-1 my-1 flex flex-col"},oe=["textContent"],le=["textContent"],se=["data-columns","data-show-order","data-table"];function ae(e,t){const n=(0,b.up)("icon"),o=(0,b.up)("tooltip"),l=(0,b.up)("dropdown"),s=(0,b.up)("locale-group"),a=(0,b.up)("setting-check"),i=(0,b.up)("script-item"),r=(0,b.up)("edit");return(0,b.wg)(),(0,b.iD)("div",L,[e.canRenderScripts?((0,b.wg)(),(0,b.iD)("div",j,[(0,b._)("header",A,[e.showRecycle?((0,b.wg)(),(0,b.iD)("div",{key:1,class:"flex-auto",textContent:(0,S.zw)(`${e.i18n("headerRecycleBin")}${e.trash.length?` (${e.trash.length})`:""}`)},null,8,B)):((0,b.wg)(),(0,b.iD)("div",Z,[(0,b.Wm)(l,{closeAfterClick:!0,class:(0,S.C_)({active:e.menuNewActive}),onStateChange:e.onStateChange},{content:(0,b.w5)(()=>[(0,b._)("a",{class:"dropdown-menu-item",textContent:(0,S.zw)(e.i18n("buttonNew")),tabindex:"0",onClick:t[0]||(t[0]=(0,W.iM)(t=>e.editScript("_new"),["prevent"]))},null,8,H),(0,b._)("a",{class:"dropdown-menu-item",textContent:(0,S.zw)(e.i18n("installFrom","OpenUserJS")),href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},null,8,P),(0,b._)("a",{class:"dropdown-menu-item",textContent:(0,S.zw)(e.i18n("installFrom","GreasyFork")),href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},null,8,N),(0,b._)("a",{class:"dropdown-menu-item",textContent:(0,S.zw)(e.i18n("buttonInstallFromURL")),tabindex:"0",onClick:t[1]||(t[1]=(0,W.iM)((...t)=>e.installFromURL&&e.installFromURL(...t),["prevent"]))},null,8,O)]),default:(0,b.w5)(()=>[(0,b.Wm)(o,{content:e.i18n("buttonNew"),placement:"bottom",align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",M,[(0,b.Wm)(n,{name:"plus"})])]),_:1},8,["content"])]),_:1},8,["class","onStateChange"]),(0,b.Wm)(o,{content:e.i18n("buttonUpdateAll"),placement:"bottom",align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",tabindex:"0",onClick:t[2]||(t[2]=(...t)=>e.updateAll&&e.updateAll(...t))},[(0,b.Wm)(n,{name:"refresh"})])]),_:1},8,["content"])])),(0,b.Wm)(o,{content:e.i18n("buttonRecycleBin"),placement:"bottom"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:(0,S.C_)(["btn-ghost trash-button",{active:e.showRecycle,filled:e.trash.length}]),onClick:t[3]||(t[3]=t=>e.showRecycle=!e.showRecycle),tabindex:"0"},[(0,b.Wm)(n,{name:"trash",class:(0,S.C_)({"trash-animate":e.removing})},null,8,["class"]),e.trash.length?((0,b.wg)(),(0,b.iD)("b",{key:0,textContent:(0,S.zw)(e.trash.length)},null,8,F)):(0,b.kq)("",!0)],2)]),_:1},8,["content"]),(0,b.Wm)(l,{align:"right",class:"filter-sort"},{content:(0,b.w5)(()=>[(0,b._)("div",null,[(0,b.Wm)(s,{"i18n-key":"labelFilterSort"},{default:(0,b.w5)(()=>[(0,b._)("select",{value:e.filters.sort,onChange:t[4]||(t[4]=(...t)=>e.onOrderChange&&e.onOrderChange(...t))},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.filterOptions.sort,(e,t)=>((0,b.wg)(),(0,b.iD)("option",{textContent:(0,S.zw)(e.title),key:t,value:t},null,8,Y))),128))],40,K)]),_:1})]),(0,b.wy)((0,b._)("div",null,[(0,b.Wm)(a,{name:"filters.showEnabledFirst",label:e.i18n("optionShowEnabledFirst")},null,8,["label"])],512),[[W.F8,e.currentSortCompare]]),(0,b._)("div",null,[(0,b.Wm)(a,{name:"filters.showOrder",label:e.i18n("labelShowOrder")},null,8,["label"])]),(0,b._)("div",J,[(0,b.Wm)(a,{name:"filters.viewTable",label:e.i18n("labelViewTable")},null,8,["label"]),(0,b.Wm)(a,{name:"filters.viewSingleColumn",label:e.i18n("labelViewSingleColumn")},null,8,["label"])])]),default:(0,b.w5)(()=>[(0,b.Wm)(o,{content:e.i18n("labelSettings"),placement:"bottom"},{default:(0,b.w5)(()=>[(0,b._)("a",q,[(0,b.Wm)(n,{name:"cog"})])]),_:1},8,["content"])]),_:1}),(0,b._)("form",{class:"filter-search hidden-xs flex",onSubmit:t[8]||(t[8]=(0,W.iM)(()=>{},["prevent"]))},[(0,b.Wm)(o,{placement:"bottom"},{content:(0,b.w5)(()=>[(0,b._)("pre",{class:"filter-search-tooltip",textContent:(0,S.zw)(e.searchError||e.i18n("titleSearchHint"))},null,8,X)]),default:(0,b.w5)(()=>[(0,b._)("label",null,[(0,b.wy)((0,b._)("input",{type:"search",class:(0,S.C_)({"has-error":e.searchError}),placeholder:e.i18n("labelSearchScript"),"onUpdate:modelValue":t[5]||(t[5]=t=>e.search=t),ref:"search",id:"installed-search"},null,10,G),[[W.nr,e.search]]),(0,b.Wm)(n,{name:"search"})])]),_:1}),(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.filters.searchScope=t),onChange:t[7]||(t[7]=(...t)=>e.onScopeChange&&e.onScopeChange(...t))},[(0,b._)("option",{value:"name",textContent:(0,S.zw)(e.i18n("filterScopeName"))},null,8,Q),(0,b._)("option",{value:"code",textContent:(0,S.zw)(e.i18n("filterScopeCode"))},null,8,ee),(0,b._)("option",{value:"all",textContent:(0,S.zw)(e.i18n("filterScopeAll"))},null,8,te)],544),[[W.bM,e.filters.searchScope]])],32)]),e.showRecycle?((0,b.wg)(),(0,b.iD)("div",ne,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("hintRecycleBin"))},null,8,oe),e.trash.length?((0,b.wg)(),(0,b.iD)("a",{key:0,textContent:(0,S.zw)(e.i18n("buttonEmptyRecycleBin")),tabindex:"0",onClick:t[9]||(t[9]=(...t)=>e.emptyRecycleBin&&e.emptyRecycleBin(...t))},null,8,le)):(0,b.kq)("",!0)])):(0,b.kq)("",!0),(0,b._)("div",{class:"scripts flex-auto",ref:"scriptList",focusme:"",style:(0,S.j5)(`--num-columns:${e.numColumns}`),"data-columns":e.numColumns,"data-show-order":e.filters.showOrder||null,"data-table":e.filters.viewTable||null},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.sortedScripts,(n,o)=>(0,b.wy)(((0,b.wg)(),(0,b.j4)(i,{key:n.props.id,focused:e.selectedScript===n,showHotkeys:e.showHotkeys,script:n,draggable:e.draggable,visible:o<e.batchRender.limit,viewTable:e.filters.viewTable,hotkeys:e.scriptHotkeys,onRemove:e.handleActionRemove,onRestore:e.handleActionRestore,onToggle:e.handleActionToggle,onUpdate:e.handleActionUpdate,onScrollDelta:e.handleSmoothScroll,onTiptoggle:t[10]||(t[10]=t=>e.showHotkeys=!e.showHotkeys)},null,8,["focused","showHotkeys","script","draggable","visible","viewTable","hotkeys","onRemove","onRestore","onToggle","onUpdate","onScrollDelta"])),[[W.F8,!e.search||!1!==n.$cache.show]])),128))],12,se)])):(0,b.kq)("",!0),e.script?((0,b.wg)(),(0,b.j4)(r,{key:1,initial:e.script,"initial-code":e.code,onClose:t[11]||(t[11]=t=>e.editScript())},null,8,["initial","initial-code"])):(0,b.kq)("",!0)])}var ie=d(4439),re=d(3824),ce=d(8694),ue=d(1036),de=d(2770),he=d(5310);const pe=["tabIndex"],me={class:"script-icon hidden-xs"},ge=["href","data-hotkey"],fe=["src"],ve={class:"script-info flex ml-1c"},we=["textContent"],be=["href","textContent","tabIndex"],xe=["textContent"],ye=["textContent"],Ce={key:2},ke=["data-hotkey","tabIndex"],_e={class:"script-buttons flex"},Se={class:"flex-auto flex flex-wrap"},ze=["href","data-hotkey","tabIndex"],Ue=["data-hotkey","tabIndex"],De=["data-hotkey","tabIndex"],$e=(0,b._)("span",{class:"sep"},null,-1),Re=["href","tabIndex"],Ee=["tabIndex"],Ve=["tabIndex","href"],Ie=["textContent","title"],Te=["data-hotkey","tabIndex"];function We(e,t,n,o,l,s){const a=(0,b.up)("icon"),i=(0,b.up)("tooltip");return(0,b.wg)(),(0,b.iD)("div",{class:(0,S.C_)(["script",{disabled:!n.script.config.enabled,removed:n.script.config.removed,error:n.script.error,focused:n.focused,hotkeys:n.focused&&n.showHotkeys}]),tabIndex:s.tabIndex,onFocus:t[5]||(t[5]=(...e)=>s.onFocus&&s.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>s.onBlur&&s.onBlur(...e))},[(0,b._)("div",me,[(0,b._)("a",{href:s.url,"data-hotkey":n.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},[(0,b._)("img",{src:n.script.safeIcon},null,8,fe)],8,ge)]),(0,b._)("div",ve,[(0,b._)("span",{class:"script-order",textContent:(0,S.zw)(n.script.props.position)},null,8,we),((0,b.wg)(),(0,b.j4)((0,b.LL)(s.nameProps.is),(0,b.dG)({class:"script-name ellipsis flex-auto"},s.nameProps),{default:(0,b.w5)(()=>[(0,b.Uk)((0,S.zw)(n.script.$cache.name),1)]),_:1},16)),l.canRender?((0,b.wg)(),(0,b.iD)(b.HY,{key:0},[s.author?((0,b.wg)(),(0,b.j4)(i,{key:0,content:e.i18n("labelAuthor")+n.script.meta.author,class:"script-author ml-1c hidden-sm",align:"end"},{default:(0,b.w5)(()=>[(0,b.Wm)(a,{name:"author"}),s.author.email?((0,b.wg)(),(0,b.iD)("a",{key:0,class:"ellipsis",href:`mailto:${s.author.email}`,textContent:(0,S.zw)(s.author.name),tabIndex:s.tabIndex},null,8,be)):((0,b.wg)(),(0,b.iD)("span",{key:1,class:"ellipsis",textContent:(0,S.zw)(s.author.name)},null,8,xe))]),_:1},8,["content"])):(0,b.kq)("",!0),(0,b._)("span",{class:"version ellipsis",textContent:(0,S.zw)(n.script.meta.version)},null,8,ye),n.script.config.removed?(0,b.kq)("",!0):((0,b.wg)(),(0,b.j4)(i,{key:1,class:"size hidden-sm",content:n.script.$cache.sizes,align:"end"},{default:(0,b.w5)(()=>[(0,b.Uk)((0,S.zw)(n.script.$cache.size),1)]),_:1},8,["content"])),(0,b.Wm)(i,{class:"updated hidden-sm ml-1c",content:s.updatedAt.title,align:"end"},{default:(0,b.w5)(()=>[(0,b.Uk)((0,S.zw)(s.updatedAt.show),1)]),_:1},8,["content"]),n.script.config.removed?((0,b.wg)(),(0,b.iD)("div",Ce,[(0,b.Wm)(i,{content:e.i18n("buttonRestore"),placement:"left"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",onClick:t[0]||(t[0]=(...e)=>s.onRestore&&s.onRestore(...e)),"data-hotkey":n.hotkeys.restore,tabIndex:s.tabIndex},[(0,b.Wm)(a,{name:"undo"})],8,ke)]),_:1},8,["content"])])):(0,b.kq)("",!0)],64)):(0,b.kq)("",!0)]),(0,b._)("div",_e,[l.canRender?((0,b.wg)(),(0,b.iD)(b.HY,{key:0},[(0,b._)("div",Se,[(0,b.Wm)(i,{content:e.i18n("buttonEdit"),align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",href:s.url,"data-hotkey":n.hotkeys.edit,tabIndex:s.tabIndex},[(0,b.Wm)(a,{name:"code"})],8,ze)]),_:1},8,["content"]),(0,b.Wm)(i,{content:s.labelEnable,align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",onClick:t[1]||(t[1]=(...e)=>s.onToggle&&s.onToggle(...e)),"data-hotkey":n.hotkeys.toggle,tabIndex:s.tabIndex},[(0,b.Wm)(a,{name:"toggle-"+(n.script.config.enabled?"on":"off")},null,8,["name"])],8,Ue)]),_:1},8,["content"]),(0,b.Wm)(i,{disabled:!s.canUpdate||n.script.checking,content:e.i18n("buttonCheckForUpdates"),align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",onClick:t[2]||(t[2]=(...e)=>s.onUpdate&&s.onUpdate(...e)),"data-hotkey":n.hotkeys.update,tabIndex:s.canUpdate?s.tabIndex:-1},[(0,b.Wm)(a,{name:"refresh"})],8,De)]),_:1},8,["disabled","content"]),$e,(0,b.Wm)(i,{disabled:!s.homepageURL,content:e.i18n("buttonHome"),align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",target:"_blank",rel:"noopener noreferrer",href:s.homepageURL,tabIndex:s.homepageURL?s.tabIndex:-1},[(0,b.Wm)(a,{name:"home"})],8,Re)]),_:1},8,["disabled","content"]),(0,b.Wm)(i,{disabled:!s.description,content:s.description,align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",tabIndex:s.description?s.tabIndex:-1,onClick:t[3]||(t[3]=(...e)=>s.toggleTip&&s.toggleTip(...e))},[(0,b.Wm)(a,{name:"info"})],8,Ee)]),_:1},8,["disabled","content"]),(0,b.Wm)(i,{disabled:!n.script.meta.supportURL,content:e.i18n("buttonSupport"),align:"start"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",target:"_blank",rel:"noopener noreferrer",tabIndex:n.script.meta.supportURL?s.tabIndex:-1,href:n.script.meta.supportURL},[(0,b.Wm)(a,{name:"question"})],8,Ve)]),_:1},8,["disabled","content"]),(0,b._)("div",{class:"script-message",textContent:(0,S.zw)(n.script.message),title:n.script.error},null,8,Ie)]),(0,b.Wm)(i,{content:e.i18n("buttonRemove"),align:"end"},{default:(0,b.w5)(()=>[(0,b._)("a",{class:"btn-ghost",onClick:t[4]||(t[4]=(...e)=>s.onRemove&&s.onRemove(...e)),"data-hotkey":n.hotkeys.remove,tabIndex:s.tabIndex},[(0,b.Wm)(a,{name:"trash"})],8,Te)]),_:1},8,["content"])],64)):(0,b.kq)("",!0)])],42,pe)}const Le=8,je={props:["script","visible","viewTable","focused","hotkeys","showHotkeys"],components:{Icon:I.Z,Tooltip:re.Z},data(){return{canRender:this.visible}},computed:{canUpdate(){return(0,p.TZ)(this.script)},homepageURL(){return(0,p.t$)(this.script)||null},author(){const e=this.script.meta.author;if(!e)return;const t=e.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:t&&t[2],name:t?t[1]:e}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||(0,p.iQ)(this.script.meta,"description")},updatedAt(){const{props:e,config:t}=this.script,n={};let o;if(t.removed?({lastModified:o}=e):o=e.lastUpdated||e.lastModified,o){const e=new Date(o);n.show=(0,p.mr)(Date.now()-o),t.removed?n.title=this.i18n("labelRemovedAt",e.toLocaleString()):n.title=this.i18n("labelLastUpdatedAt",e.toLocaleString())}return n},tabIndex(){return this.focused?0:-1},url(){return`#scripts/${this.script.props.id}`},nameProps(){return this.viewTable?{is:"a",href:this.url,tabIndex:this.tabIndex,draggable:!1}:{is:"span"}}},watch:{visible(e){e&&(this.canRender=!0)},focused(e,t){const{$el:n}=this;if(e&&!t&&n){const e=n.getBoundingClientRect(),t=n.parentNode.getBoundingClientRect();let o=0;e.bottom>t.bottom-Le?o+=e.bottom-t.bottom+Le:e.top<t.top+Le&&(o-=t.top-e.top+Le),(0,T.u7)(s.activeElement)||n.focus({preventScroll:!0}),this.$emit("scrollDelta",o)}}},methods:{onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){T.$J.setContext("scriptFocus",!0)},onBlur(){T.$J.setContext("scriptFocus",!1)},toggleTip(e){(0,T.xr)(e.target)}}};var Ae=d(3744);const Ze=(0,Ae.Z)(je,[["render",We]]),Me={class:"edit frame flex flex-col fixed-full"},He={class:"edit-header flex mr-1c"},Pe=["textContent","onClick"],Ne=["textContent"],Oe={class:"edit-hint text-right ellipsis"},Be=["textContent"],Fe={class:"edit-buttons"},qe=["textContent","disabled","title"],Ke=["textContent","disabled"],Ye=["textContent"],Je={class:"frame-block flex-auto pos-rel"},Ge={key:0,class:"errors my-1c"},Xe=["textContent"],Qe={class:"my-1"},et=["href","textContent"];function tt(e,t){const n=(0,b.up)("vm-code"),o=(0,b.up)("vm-settings"),l=(0,b.up)("vm-values"),s=(0,b.up)("vm-externals"),a=(0,b.up)("vm-help");return(0,b.wg)(),(0,b.iD)("div",Me,[(0,b._)("div",He,[(0,b._)("nav",null,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.navItems,(t,n)=>((0,b.wg)(),(0,b.iD)("div",{key:n,class:(0,S.C_)(["edit-nav-item",{active:e.nav===n}]),textContent:(0,S.zw)(t),onClick:t=>e.nav=n},null,10,Pe))),128))]),(0,b._)("div",{class:"edit-name text-center ellipsis flex-1",textContent:(0,S.zw)(e.scriptName)},null,8,Ne),(0,b._)("div",Oe,[(0,b._)("a",{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("editHowToHint"))},null,8,Be)]),(0,b._)("div",Fe,[(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonSave")),onClick:t[0]||(t[0]=(...t)=>e.save&&e.save(...t)),disabled:!e.canSave,class:(0,S.C_)({"has-error":e.errors}),title:e.errors},null,10,qe),(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonSaveClose")),onClick:t[1]||(t[1]=(...t)=>e.saveClose&&e.saveClose(...t)),disabled:!e.canSave},null,8,Ke),(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonClose")),onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t))},null,8,Ye)])]),(0,b._)("div",Je,[(0,b.wy)((0,b.Wm)(n,{class:"abs-full",value:e.code,ref:"code",active:"code"===e.nav,commands:e.commands,onCodeDirty:t[3]||(t[3]=t=>e.codeDirty=t)},null,8,["value","active","commands"]),[[W.F8,"code"===e.nav]]),(0,b.wy)((0,b.Wm)(o,{class:"abs-full edit-body",active:"settings"===e.nav,settings:e.settings,value:e.script},null,8,["active","settings","value"]),[[W.F8,"settings"===e.nav]]),(0,b.wy)((0,b.Wm)(l,{class:"abs-full edit-body",active:"values"===e.nav,script:e.script},null,8,["active","script"]),[[W.F8,"values"===e.nav]]),"externals"===e.nav?((0,b.wg)(),(0,b.j4)(s,{key:0,class:"abs-full",value:e.script},null,8,["value"])):(0,b.kq)("",!0),(0,b.wy)((0,b.Wm)(a,{class:"abs-full edit-body",hotkeys:e.hotkeys},null,8,["hotkeys"]),[[W.F8,"help"===e.nav]])]),e.errors?((0,b.wg)(),(0,b.iD)("div",Ge,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.errors,e=>((0,b.wg)(),(0,b.iD)("p",{key:e,textContent:(0,S.zw)(e),class:"text-red"},null,8,Xe))),128)),(0,b._)("p",Qe,[(0,b._)("a",{href:e.urlMatching,target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.urlMatching)},null,8,et)])])):(0,b.kq)("",!0)])}var nt=d(7462),ot=d(1095),lt=d(9727);const st={class:"edit-settings",ref:"container"},at=["textContent"],it={class:"form-group condensed"},rt=["textContent"],ct=["textContent"],ut=["value"],dt=(0,b.Uk)(),ht=["textContent"],pt=["textContent"],mt=(0,b._)("td",null,[(0,b._)("code",null,"@run-at")],-1),gt=["textContent"],ft=["textContent"],vt=(0,b._)("option",{value:"document-start"},"document-start",-1),wt=(0,b._)("option",{value:"document-body"},"document-body",-1),bt=(0,b._)("option",{value:"document-end"},"document-end",-1),xt=(0,b._)("option",{value:"document-idle"},"document-idle",-1),yt=(0,b._)("td",null,[(0,b._)("code",null,[(0,b.Uk)("@"),(0,b._)("s",{style:{color:"var(--fill-6)"}},"no"),(0,b.Uk)("frames")])],-1),Ct=["textContent"],kt=["textContent"],_t=["textContent"],St=["textContent"],zt=["textContent"],Ut=["textContent"],Dt=["onUpdate:modelValue","placeholder"],$t=["textContent"],Rt=["textContent"],Et=["textContent"],Vt=["onUpdate:modelValue"],It=["textContent"],Tt=["onUpdate:modelValue","rows"];function Wt(e,t,n,o,l,s){return(0,b.wg)(),(0,b.iD)("div",st,[(0,b._)("h4",{textContent:(0,S.zw)(e.i18n("editLabelSettings"))},null,8,at),(0,b._)("div",it,[(0,b._)("label",null,[(0,b.wy)((0,b._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>s.config.shouldUpdate=e)},null,512),[[W.e8,s.config.shouldUpdate]]),(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelAllowUpdate"))},null,8,rt)]),(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelNotifyThisUpdated"))},null,8,ct),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)([[e.i18n("genericOn"),"1"],[e.i18n("genericOff"),"0"],[e.i18n("genericUseGlobal"),""]],([e,n])=>((0,b.wg)(),(0,b.iD)("label",{class:"ml-1",key:n},[(0,b.wy)((0,b._)("input",{type:"radio",value:n,"onUpdate:modelValue":t[1]||(t[1]=e=>s.config.notifyUpdates=e)},null,8,ut),[[W.G2,s.config.notifyUpdates]]),dt,(0,b._)("span",{textContent:(0,S.zw)(e)},null,8,ht)]))),128))]),(0,b._)("h4",{textContent:(0,S.zw)(e.i18n("editLabelMeta"))},null,8,pt),(0,b._)("table",null,[(0,b._)("tr",null,[mt,(0,b._)("td",null,[(0,b._)("p",{textContent:(0,S.zw)(e.i18n("labelRunAt"))},null,8,gt)]),(0,b._)("td",null,[(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.custom.runAt=e)},[(0,b._)("option",{value:"",textContent:(0,S.zw)(e.i18n("labelRunAtDefault"))},null,8,ft),vt,wt,bt,xt],512),[[W.bM,s.custom.runAt]])])]),(0,b._)("tr",null,[yt,(0,b._)("td",null,[(0,b._)("p",{textContent:(0,S.zw)(e.i18n("labelNoFrames"))},null,8,Ct)]),(0,b._)("td",null,[(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.custom.noframes=e)},[(0,b._)("option",{value:"",textContent:(0,S.zw)(e.i18n("labelRunAtDefault"))},null,8,kt),(0,b._)("option",{value:"0",textContent:(0,S.zw)(e.i18n("genericOn"))},null,8,_t),(0,b._)("option",{value:"1",textContent:(0,S.zw)(e.i18n("genericOff"))},null,8,St)],512),[[W.bM,s.custom.noframes]])])]),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(s.textInputs,([e,t])=>((0,b.wg)(),(0,b.iD)("tr",{key:e},[(0,b._)("td",null,[(0,b._)("code",{textContent:(0,S.zw)(`@${e}`)},null,8,zt)]),(0,b._)("td",null,[(0,b._)("p",{textContent:(0,S.zw)(t)},null,8,Ut)]),(0,b._)("td",null,[(0,b.wy)((0,b._)("input",{type:"text","onUpdate:modelValue":t=>s.custom[e]=t,placeholder:s.placeholders[e]},null,8,Dt),[[W.nr,s.custom[e]]])])]))),128))]),(0,b._)("table",null,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(s.textAreas,([t,n,o,l,a])=>((0,b.wg)(),(0,b.iD)("tr",{key:t},[(0,b._)("td",null,[(0,b._)("p",null,[(0,b._)("span",{textContent:(0,S.zw)(o)},null,8,$t),(0,b._)("code",{textContent:(0,S.zw)(l)},null,8,Rt),(0,b._)("span",{textContent:(0,S.zw)(a)},null,8,Et)]),(0,b._)("label",null,[(0,b.wy)((0,b._)("input",{type:"checkbox","onUpdate:modelValue":e=>s.custom[n]=e},null,8,Vt),[[W.e8,s.custom[n]]]),(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelKeepOriginal"))},null,8,It)])]),(0,b._)("td",null,[(0,b.wy)((0,b._)("textarea",{"onUpdate:modelValue":e=>s.custom[t]=e,spellcheck:"false",rows:e.calcRows(s.custom[t])},null,8,Tt),[[W.nr,s.custom[t]]])])]))),128))])],512)}const Lt=e=>{var t;return(null==(t=e.match(/^(.*?)(@[-a-z]+)(.*)/))?void 0:t.slice(1))||[e,"",""]},jt={props:["active","settings","value"],computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:e}=this;return{name:(0,he._M)(e,"meta.name"),homepageURL:(0,p.t$)(e),updateURL:(0,he._M)(e,"meta.updateURL")||(0,p.ag)("hintUseDownloadURL"),downloadURL:(0,he._M)(e,"meta.downloadURL")||(0,he._M)(e,"custom.lastInstallURL")}},textInputs:()=>[["name",(0,p.ag)("labelName")],["homepageURL",(0,p.ag)("labelHomepageURL")],["updateURL",(0,p.ag)("labelUpdateURL")],["downloadURL",(0,p.ag)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",...Lt((0,p.ag)("labelInclude"))],["match","origMatch",...Lt((0,p.ag)("labelMatch"))],["exclude","origExclude",...Lt((0,p.ag)("labelExclude"))],["excludeMatch","origExcludeMatch",...Lt((0,p.ag)("labelExcludeMatch"))]]},watch:{active(e){e&&this.$refs.container.querySelector("input").focus()}}},At=(0,Ae.Z)(jt,[["render",Wt]]),Zt={class:"edit-values",ref:"container"},Mt={class:"mb-1"},Ht={key:0,class:"inline-block ml-2"},Pt=["disabled"],Nt=["textContent"],Ot=(0,b.Uk)(" / "),Bt=["textContent"],Ft=["disabled"],qt={class:"ml-2 mr-2c"},Kt=(0,b._)("kbd",null,"PageUp",-1),Yt=(0,b.Uk)(", "),Jt=(0,b._)("kbd",null,"PageDown",-1),Gt=(0,b.Uk)(", "),Xt=(0,b._)("kbd",null,"\u2191",-1),Qt=(0,b.Uk)(", "),en=(0,b._)("kbd",null,"\u2193",-1),tn=(0,b.Uk)(", "),nn=(0,b._)("kbd",null,"Tab",-1),on=(0,b.Uk)(", "),ln=(0,b._)("kbd",null,"Shift-Tab",-1),sn=(0,b.Uk)(", "),an=(0,b._)("kbd",null,"Enter",-1),rn=(0,b._)("kbd",null,"Ctrl-Del",-1),cn=["textContent"],un=["onKeydown","onClick"],dn={class:"ellipsis"},hn=["textContent"],pn=["textContent"],mn=["textContent"],gn=["onClick"],fn=["textContent"],vn=["onClick"],wn=["textContent"],bn=["textContent"],xn=["textContent"],yn=["textContent"],Cn={key:3,class:"edit-values-panel flex flex-col mb-1c"},kn={class:"control"},_n=["textContent"],Sn=["textContent","onClick","title","disabled"],zn=["textContent"],Un=["textContent"],Dn=["readOnly"],$n=["textContent"];function Rn(e,t){const n=(0,b.up)("icon"),o=(0,b.up)("vm-code");return(0,b.wg)(),(0,b.iD)("div",Zt,[(0,b._)("div",Mt,[(0,b._)("button",{onClick:t[0]||(t[0]=(...t)=>e.onNew&&e.onNew(...t))},"+"),e.totalPages>1?((0,b.wg)(),(0,b.iD)("div",Ht,[(0,b._)("button",{disabled:1===e.page,onClick:t[1]||(t[1]=t=>e.page-=1)},"\u2190",8,Pt),(0,b._)("span",{class:"ml-1",textContent:(0,S.zw)(e.page)},null,8,Nt),Ot,(0,b._)("span",{class:"mr-1",textContent:(0,S.zw)(e.totalPages)},null,8,Bt),(0,b._)("button",{disabled:e.page>=e.totalPages,onClick:t[2]||(t[2]=t=>e.page+=1)},"\u2192",8,Ft)])):(0,b.kq)("",!0),(0,b._)("span",qt,[(0,b._)("span",null,[e.totalPages>1?((0,b.wg)(),(0,b.iD)(b.HY,{key:0},[Kt,Yt,Jt,Gt],64)):(0,b.kq)("",!0),Xt,Qt,en,tn,nn,on,ln,sn]),(0,b._)("span",null,[an,(0,b.Uk)(": "+(0,S.zw)(e.i18n("buttonEdit"))+",",1)]),(0,b._)("span",null,[rn,(0,b.Uk)(": "+(0,S.zw)(e.i18n("buttonRemove")),1)])])]),(0,b._)("div",{class:"edit-values-table main",onKeydown:[t[4]||(t[4]=(0,W.D2)((0,W.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[5]||(t[5]=(0,W.D2)((0,W.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[(0,b._)("a",{ref:"editAll",class:"edit-values-row flex",onClick:t[3]||(t[3]=(...t)=>e.onEditAll&&e.onEditAll(...t)),tabindex:"0",textContent:(0,S.zw)(e.i18n("editValueAllHint"))},null,8,cn),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.pageKeys,t=>((0,b.wg)(),(0,b.iD)("div",{key:t,class:"edit-values-row flex",onKeydown:(0,W.D2)((0,W.iM)(n=>e.onRemove(t),["ctrl","exact"]),["delete"]),onClick:n=>e.onEdit(t)},[(0,b._)("div",dn,[(0,b._)("a",{textContent:(0,S.zw)(t),tabindex:"0"},null,8,hn)]),(0,b._)("div",{class:"ellipsis flex-auto",textContent:(0,S.zw)(e.getValue(t,!0))},null,8,pn),(0,b._)("pre",{textContent:(0,S.zw)(e.getLength(t))},null,8,mn),(0,b._)("div",{class:"del",onClick:(0,W.iM)(n=>e.onRemove(t),["stop"])},[(0,b.Wm)(n,{name:"trash"})],8,gn)],40,un))),128))],32),e.trash?((0,b.wg)(),(0,b.iD)("h3",{key:0,textContent:(0,S.zw)(e.i18n("headerRecycleBin"))},null,8,fn)):(0,b.kq)("",!0),e.trash?((0,b.wg)(),(0,b.iD)("div",{key:1,class:"edit-values-table trash",onKeydown:[t[6]||(t[6]=(0,W.D2)((0,W.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[7]||(t[7]=(0,W.D2)((0,W.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.trash,({key:t,cut:n,len:o},l)=>((0,b.wg)(),(0,b.iD)("div",{key:l,class:"edit-values-row flex",onClick:t=>e.onRestore(l)},[(0,b._)("a",{class:"ellipsis",textContent:(0,S.zw)(t),tabindex:"0"},null,8,wn),(0,b._)("s",{class:"ellipsis flex-auto",textContent:(0,S.zw)(n)},null,8,bn),(0,b._)("pre",{textContent:(0,S.zw)(o)},null,8,xn)],8,vn))),128))],32)):(0,b.kq)("",!0),e.loading||e.keys.length?(0,b.kq)("",!0):((0,b.wg)(),(0,b.iD)("div",{key:2,class:"edit-values-empty mt-1",textContent:(0,S.zw)(e.i18n("noValues"))},null,8,yn)),e.current?((0,b.wg)(),(0,b.iD)("div",Cn,[(0,b._)("div",kn,[(0,b._)("h4",{textContent:(0,S.zw)(e.current.isAll?e.i18n("labelEditValueAll"):e.i18n("labelEditValue"))},null,8,_n),(0,b._)("div",null,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)([e.i18n("buttonOK"),e.i18n("buttonApply")],(t,n)=>((0,b.wg)(),(0,b.iD)("button",{key:t,textContent:(0,S.zw)(t),onClick:t=>e.onSave(n),class:(0,S.C_)({"has-error":e.current.error,"save-beacon":!n}),title:e.current.error,disabled:e.current.error||!e.current.dirty},null,10,Sn))),128)),(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonCancel")),onClick:t[8]||(t[8]=(...t)=>e.onCancel&&e.onCancel(...t))},null,8,zn)])]),(0,b.wy)((0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("valueLabelKey"))},null,8,Un),(0,b.wy)((0,b._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.current.key=t),readOnly:!e.current.isNew,ref:"key",spellcheck:"false",onKeydown:t[10]||(t[10]=(0,W.D2)((0,W.iM)((...t)=>e.onCancel&&e.onCancel(...t),["exact","stop"]),["esc"]))},null,40,Dn),[[W.nr,e.current.key]])],512),[[W.F8,!e.current.isAll]]),(0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.current.isAll?e.i18n("valueLabelValueAll"):e.i18n("valueLabelValue"))},null,8,$n),(0,b.Wm)(o,{value:e.current.value,ref:"value",class:"h-100 mt-1",mode:"application/json",onCodeDirty:e.onChange,commands:{close:e.onCancel,save:e.onSave}},null,8,["value","onCodeDirty","commands"])])])):(0,b.kq)("",!0)],512)}var En=d(432);const Vn=25,In=1024,Tn=10;let Wn;const Ln={error:"",dirty:!1},jn=e=>e.length>In?e.slice(0,In):e,An=e=>{try{return JSON.stringify(JSON.parse(e),null,"  ")}catch(t){return e}},Zn=()=>s.activeElement,Mn=(e,t)=>{e.page=Math.max(1,Math.min(e.totalPages,e.page+t))},Hn=()=>({tab:{id:Math.random()-2},frameId:0}),Pn={condition:"!edit"},Nn={props:["active","script"],components:{Icon:I.Z,VmCode:ot.default},data:()=>({current:null,loading:!0,page:null,values:null,trash:null}),computed:{keys(){return o.keys(this.values||{}).sort()},totalPages(){return Math.ceil(this.keys.length/Vn)},pageKeys(){const e=Vn*(this.page-1);return this.keys.slice(e,e+Vn)}},mounted(){this.$refs.container.addEventListener("focusin",e=>{T.$J.setContext("edit","selectionEnd"in e.target)})},watch:{active(e){const t=this.script.props.id;var n,o;if(e?(null==(n=this.current?this.cm:Wn)||n.focus(),(0,p.gj)("GetValueStore",t,void 0,this.sender=Hn()).then(e=>{const t=!this.values;this.setData(e)&&t&&this.keys.length&&this.autofocus(!0),this.loading=!1}),this.disposeList=[T.$J.register("pageup",()=>Mn(this,-1),Pn),T.$J.register("pagedown",()=>Mn(this,1),Pn)]):null==(o=this.disposeList)||o.forEach(e=>e()),e){const e=this.onStorageChanged,n=browser.extension.getBackgroundPage();this[En.vy]=browser.runtime.connect({name:En.vy+JSON.stringify({cfg:{value:t},id:null==n?void 0:n[En.vy](e),tabId:this.sender.tab.id})}),n||this[En.vy].onMessage.addListener(e)}else{var l;null==(l=this[En.vy])||l.disconnect(),this[En.vy]=null}},current(e,t){if(e)Wn=Zn(),this.$nextTick(()=>{const n=this.$refs,o=n.value,{cm:l}=o;if(this.cm=l,t&&o.updateValue(e.value),e.isNew){const e=n.key;e.setSelectionRange(0,0),e.focus()}else l.setCursor(0,0),l.focus()});else if(t){var n;null==(n=Wn)||n.focus()}},page(){Wn=null,this.autofocus()}},methods:{autofocus(e){this.$nextTick(()=>{this.$refs.editAll[e?"click":"focus"]()})},getLength(e,t){const n=(this.values[e]||t).length-1;return n<1e4?n:(0,p.aj)(n)},getValue(e,t,n){let o=this.values[e]||n;const l=o[0];return o=o.slice(1),"s"===l?o=JSON.stringify(o):t||(o=An(o)),t?jn(o):o},getValueAll(){return`{\n  ${this.keys.map(e=>`${JSON.stringify(e)}: ${this.getValue(e)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`},setData(e={}){if(!(0,he.vZ)(this.values,e))return this.values=e,this.page=Math.min(this.page,this.totalPages)||1,this.calcSize(),!0},calcSize(){C.storageSize=this.keys.reduce((e,t)=>e+t.length+4+this.values[t].length+2,2)},updateValue({key:e,jsonValue:t,rawValue:n=(0,p.bd)(t)||""}){const{id:o}=this.script.props;return(0,p.gj)("UpdateValue",{id:o,key:e,raw:n},void 0,this.sender).then(()=>{n?this.values[e]=n:delete this.values[e],this.calcSize()})},onNew(){this.current=(0,nt.Z)({isNew:!0,key:"",value:""},Ln)},async onRemove(e){var t;this.updateValue({key:e}),(this.trash||(this.trash={}))[e+Math.random()]={key:e,rawValue:this.values[e],cut:this.getValue(e,!0),len:this.getLength(e)},(null==(t=this.current)?void 0:t.key)===e&&(this.current=null)},onRestore(e){const{trash:t}=this,{key:n,rawValue:o}=t[e];delete t[e],(0,p.xb)(t)&&(this.trash=null),this.updateValue({key:n,rawValue:o})},onEdit(e){this.current=(0,nt.Z)({key:e,value:this.getValue(e)},Ln)},onEditAll(){this.current=(0,nt.Z)({isAll:!0,value:this.getValueAll()},Ln)},async onSave(e){const{cm:t,current:n}=this;if(n.jsonPaused&&(n.jsonPaused=!1,this.onChange()),n.error){const e=n.errorPos;return t.setSelection(e,{line:e.line,ch:e.ch+1}),t.focus(),void(0,v.PV)({text:n.error})}1===e?(t.markClean(),n.dirty=!1):this.current=null,n.isAll?await(0,p.gj)("SetValueStores",{[this.script.props.id]:c(he.Xw,n.jsonValue,e=>(0,p.bd)(e)||"")}):await this.updateValue(n)},onCancel(){const e=this.current;if(e.dirty){const t=`${e.key} ${1e9*Math.random()|0}`,n=this.cm.getValue(),o=(0,p.bd)(n);(this.trash||(this.trash={}))[t]={key:t,rawValue:o,cut:jn(n),len:this.getLength(t,o)}}this.current=null},onChange(e){const{current:t}=this;if(t.dirty=e,t.error=null,t.jsonPaused)return;const{cm:n}=this,o=performance.now();try{const e=n.getValue();t.jsonValue=e.trim()?JSON.parse(e):void 0}catch(e){const o=/(position\s+)(\d+)|$/,l=n.posFromIndex(+`${e}`.match(o)[2]||0);t.error=`${e}`.replace(o,`$1${l.line+1}:${l.ch+1}`),t.errorPos=l,t.jsonValue=void 0}t.jsonPaused=performance.now()-o>Tn},onStorageChanged(e){const t=o.values(e)[0].newValue;if(t){const{current:e}=this,n=null==e?void 0:e.key,l=e&&(e.isAll?this.getValueAll:this.getValue),s=l&&l(n);if(this.setData(t instanceof o?t:(0,he.p$)(t)),e){const t=l(n),a=this.cm.getValue();a===t?e.isNew=!1:a===s&&(o.keys(e).filter(e=>"key"!==e&&"value"!==e).forEach(t=>delete e[t]),e.value=t)}}else this.setData(t)},onUpDown(e){(0,T.nk)(("ArrowDown"===e.key?1:e.target!==this.$refs.editAll&&-1)||0)}}},On=(0,Ae.Z)(Nn,[["render",Rn]]),Bn={class:"edit-help mb-2c"},Fn=["innerHTML"],qn=(0,b._)("a",{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"},"violentmonkey.github.io/api/",-1),Kn={class:"keyboard"},Yn=["textContent"],Jn=["textContent"],Gn=["textContent"];function Xn(e,t,n,o,l,s){return(0,b.wg)(),(0,b.iD)("div",Bn,[(0,b._)("div",null,[(0,b._)("h3",{innerHTML:e.i18n("editHelpDocumention")},null,8,Fn),qn]),(0,b._)("div",Kn,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("editHelpKeyboard"))},null,8,Yn),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(n.hotkeys,([e,t])=>((0,b.wg)(),(0,b.iD)("dl",{key:e},[(0,b._)("dt",{class:"monospace-font",textContent:(0,S.zw)(e)},null,8,Jn),(0,b._)("dd",{textContent:(0,S.zw)(t)},null,8,Gn)]))),128))])])}const Qn={props:["hotkeys"]},eo=(0,Ae.Z)(Qn,[["render",Xn]]),to={name:"",runAt:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},no=["include","match","exclude","excludeMatch"],oo=e=>e?`${e.join("\n")}${e.length?"\n":""}`:"",lo=e=>e.split("\n").map(e=>e.trim()).filter(t);let so,ao;const io=async e=>{f.Z.get("editorWindow")&&(e||(e=await browser.windows.getCurrent()),"normal"===e.state&&f.Z.set("editorWindowPos",(0,he.zr)(e,["left","top","width","height"])))},ro=({id:t,tabs:n})=>{if(1===n.length){const{onBoundsChanged:n}=e.chrome.windows;n?n.addListener(e=>{e.id===t&&io(e)}):(a.addEventListener("resize",(0,p.Ds)(io,100)),ao=!0)}};let co;const uo="Alt-PageUp",ho="Alt-PageDown",po=(e,t)=>e<t?-1:e>t,mo={props:["initial","initialCode"],components:{VmCode:ot.default,VmSettings:At,VmValues:On,VmExternals:lt.Z,VmHelp:eo},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null,errors:null,urlMatching:"https://violentmonkey.github.io/api/matching/"}},computed:{navItems(){const{meta:e,props:t}=this.script||{},n=(null==e?void 0:e.require.length)&&"@require",o=!(0,p.xb)(null==e?void 0:e.resources)&&"@resource",l=C.storageSize;return(0,nt.Z)({code:(0,p.ag)("editNavCode"),settings:(0,p.ag)("editNavSettings")},(null==t?void 0:t.id)&&{values:(0,p.ag)("editNavValues")+(l?` (${(0,p.aj)(l)})`:"")},(n||o)&&{externals:c(p.Hv,[n,o],"/")},{help:"?"})},scriptName(){const{script:e}=this,t=(null==e?void 0:e.meta)&&(0,p.pV)(e);return C.title=t,t}},watch:{nav(e){T.$J.setContext("tabCode","code"===e),"code"===e&&this.$nextTick(()=>{this.$refs.code.cm.focus()})},canSave(e){this.toggleUnloadSentry(e),T.$J.setContext("canSave",e)},"initial.error"(e){e&&(0,v.PV)({text:`${this.initial.message}\n\n${e}`})}},created(){var t;this.script=this.initial,this.toggleUnloadSentry=(0,x.Q$)(null,()=>{this.$refs.code.cm.focus()}),f.Z.get("editorWindow")&&1===e.history.length&&(null==(t=browser.windows)||t.getCurrent({populate:!0}).then(ro))},async mounted(){var e;C.storageSize=0,this.nav="code";const{custom:n,config:l}=this.script,{noframes:s}=n;this.settings={config:{notifyUpdates:`${null!=(e=l.notifyUpdates)?e:""}`,shouldUpdate:t(l.shouldUpdate)},custom:(0,nt.Z)({},to,(0,he.zr)(n,o.keys(to)),(0,he.zr)(n,no,oo),{runAt:n.runAt||"",noframes:null==s?"":+s})},so=(0,he.p$)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var a;const e=o.values(this.navItems),t=[[uo,` ${e.join(" < ")}`],[ho,` ${e.join(" > ")}`],...o.entries(this.$refs.code.expandKeyMap()).sort((e,t)=>po(e[1],t[1])||po(e[0],t[0]))];co=null==(a=t.find(([,e])=>"save"===e))?void 0:a[0],co||(co="Ctrl-S",t.unshift([co,"save"])),this.hotkeys=t}this.disposeList=[T.$J.register("a-pageup",this.switchPrevPanel),T.$J.register("a-pagedown",this.switchNextPanel),T.$J.register(co.replace(/(?:Ctrl|Cmd)-/i,"ctrlcmd-"),this.save),T.$J.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})],this.code=this.initialCode},methods:{async save(){if(!this.canSave)return;ao&&io();const{settings:e}=this,{config:t,custom:n}=e,{notifyUpdates:l}=t,{noframes:s}=n;try{var i,r,c;const u=this.$refs.code,d=null==(i=this.script)||null==(r=i.props)?void 0:r.id,h=await(0,p.gj)("ParseScript",{id:d,code:u.getRealContent(),config:(0,nt.Z)({},t,{notifyUpdates:l?+l:null}),custom:(0,nt.Z)({},(0,he.zr)(n,o.keys(to)),(0,he.zr)(n,no,lo),{noframes:s?+s:null}),isNew:!d,message:""}),m=null==h||null==(c=h.where)?void 0:c.id;so=(0,he.p$)(e),u.cm.markClean(),this.codeDirty=!1,this.canSave=!1,this.errors=h.errors,m&&(this.script=h.update,d||a.history.replaceState(null,this.scriptName,`#scripts/${m}`))}catch(e){(0,v.GW)(`${e.message||e}`,{cancel:!1})}},close(e){var t;e&&"code"!==this.nav?this.nav="code":(this.$emit("close"),u&&(null==(t=s.activeElement)||t.blur()))},saveClose(){this.save().then(this.close)},switchPanel(e){const t=o.keys(this.navItems);this.nav=t[(t.indexOf(this.nav)+e+t.length)%t.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!(0,he.vZ)(this.settings,so)}},beforeUnmount(){var e;C.title=null,this.toggleUnloadSentry(!1),null==(e=this.disposeList)||e.forEach(e=>{e()})}},go=(0,Ae.Z)(mo,[["render",tt]]),fo=".script",vo=50,wo=20,bo=16,xo=500,yo="ontouchstart"in s,Co=yo?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},ko=yo&&o.assign(s.createElement("div"),{className:"dragging-noscroll"}),_o=["scroll","mouseenter","mouseleave"],{addEventListener:So,removeEventListener:zo}=EventTarget.prototype;let Uo,Do,$o,Ro,Eo,Vo,Io,To,Wo,Lo,jo,Ao,Zo,Mo,Ho,Po,No,Oo;function Bo(e){jo=this.$refs.scriptList,Ao=this.moveScript,c(e?So:zo,jo,Co.start,yo?qo:Jo)}function Fo(){Ao(Ro,Eo)}function qo(e){il(e)&&(Vo=e,Io=setTimeout(Ko,xo,"timer"),c(So,s,Co.move,Ko),c(So,s,Co.end,Yo))}function Ko(e){Yo(),"timer"===e&&(c(Jo,Lo,Vo),u&&el()&&(jo.scrollTop+=1,jo.scrollTop-=1))}function Yo(){clearTimeout(Io),c(zo,s,Co.move,Ko),c(zo,s,Co.end,Yo)}function Jo(e){var t;if(!il(e))return;e.cancelable&&e.preventDefault();const{clientX:n,clientY:o}=(null==(t=e.touches)?void 0:t[0])||e,l=Lo.getBoundingClientRect(),a=jo.getBoundingClientRect();Uo=Lo.cloneNode(!0),Do=c([].filter,jo.children,e=>"none"!==e.style.display),Ro=Do.indexOf(Lo),Eo=Ro,Do.splice(Ro,1),$o=l.height,To=n-l.left,Wo=o-l.top,Zo=a.top+vo,Mo=a.bottom-vo,Oo={},Lo.classList.add("dragging-placeholder"),Uo.classList.add("dragging"),Uo.style.transform=`translate(${l.left}px, ${l.top}px)`,Uo.style.width=`${l.width}px`,jo.appendChild(Uo),yo&&jo.insertAdjacentElement("afterBegin",ko),c(So,s,Co.move,Go),c(So,s,Co.end,Xo)}function Go(e){var t;const{clientX:n,clientY:o,target:l}=(null==(t=e.touches)?void 0:t[0])||e;let s;const a=yo?al(n,o):null==l.closest?void 0:l.closest(fo);if(a&&a!==Lo){const e=a.getBoundingClientRect(),t=o>e.top+e.height/2;s=Lo!==a[(t?"next":"previous")+"ElementSibling"],s&&(a.insertAdjacentElement(t?"afterEnd":"beforeBegin",Lo),Qo(Do.indexOf(a)+t))}Uo.style.transform=`translate(${n-To}px, ${o-Wo}px)`,(tl(o)||s)&&(Oo={})}function Xo(){c(zo,s,Co.move,Go),c(zo,s,Co.end,Xo),ll(),Uo.remove(),yo&&ko.remove(),Lo.classList.remove("dragging-placeholder"),Fo()}function Qo(e){const t=Eo<e?$o:-$o,n=Do.slice(...Eo<e?[Eo,e]:[e,Eo]);n.forEach(e=>{e.style.transition="none",e.style.transform=`translateY(${t}px)`}),setTimeout(()=>n.forEach(({style:e})=>{e.removeProperty("transition"),e.removeProperty("transform")})),Eo=e}function el(){return jo.scrollHeight>jo.clientHeight}function tl(e){const t=el()&&Math.min(1,Math.max(0,e-Mo,Zo-e)/vo);return!t&&Ho&&ll(),t&&!Ho&&ol(),Po=t&&(e>Mo?1:-1)*(1+t*wo|0),No=performance.now(),!!t}function nl(){const e=performance.now(),t=Po*(e-No)/bo;jo.scrollTop+=t,No=e}function ol(){Ho=setInterval(nl,bo),_o.forEach(e=>c(So,a,e,sl,!0))}function ll(){_o.forEach(e=>c(zo,a,e,sl,!0)),Ho&&clearInterval(Ho),Ho=0}function sl(e){e.stopPropagation()}function al(e,t){var n;const o=`${e}:${t}`;return Oo[o]||(Oo[o]=null==(n=s.elementFromPoint(e,t))?void 0:n.closest(fo))}function il(e){return Lo=e.target.closest(fo),Lo}const rl={sort:{exec:{title:(0,p.ag)("filterExecutionOrder")},alpha:{title:(0,p.ag)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:e}},{$cache:{lowerName:t}})=>e<t?-1:e>t},update:{title:(0,p.ag)("filterLastUpdateOrder"),compare:({props:{lastUpdated:e}},{props:{lastUpdated:t}})=>(+t||0)-(+e||0)},size:{title:(0,p.ag)("filterSize"),compare:(e,t)=>t.$cache.sizeNum-e.$cache.sizeNum}}},cl=(0,w.qj)({searchScope:null,showEnabledFirst:null,showOrder:null,viewSingleColumn:null,viewTable:null,sort:null}),ul=e=>cl.showEnabledFirst?(t,n)=>n.config.enabled-t.config.enabled||e(t,n):e;c(he.SE,cl,e=>{(0,ue.Z)(`filters.${e}`,t=>{cl[e]=t,"sort"!==e||rl.sort[t]||(cl[e]=o.keys(rl.sort)[0])})});const dl=100;let hl=0,pl=[],ml=[];const gl="tabScripts",fl=`${gl} && inputFocus`,vl=`${gl} && !inputFocus`,wl=`${vl} && selectedScript && !showRecycle`,bl=`${vl} && selectedScript && showRecycle`,xl=`${vl} && selectedScript && showHotkeys`,yl={edit:"e,Enter",toggle:"space",update:"r",restore:"r",remove:"x"},Cl=(e,t)=>t.map(([t,n,o])=>T.$J.register(t,e,{condition:n,caseSensitive:o})),kl=(e,...t)=>e.split(/\s*,\s*/).map(e=>[e,...t]),_l={components:{ScriptItem:Ze,Edit:go,Tooltip:re.Z,SettingCheck:ce.Z,LocaleGroup:de.Z,Dropdown:ie.Z,Icon:I.Z},data:()=>({scriptHotkeys:yl,store:C,filterOptions:rl,filters:cl,filteredScripts:[],focusedIndex:-1,script:null,code:"",search:null,searchError:null,modal:null,menuNewActive:!1,showRecycle:!1,sortedScripts:[],removing:!1,showHotkeys:!1,canRenderScripts:!C.route.paths[1],batchRender:{limit:hl},numColumns:null,scripts:k,trash:_}),watch:{draggable:Bo,search:"scheduleSearch","filters.sort":"updateLater","filters.showEnabledFirst":"updateLater","filters.viewSingleColumn":"adjustScriptWidth","filters.viewTable":"adjustScriptWidth",showRecycle(e){T.$J.setContext("showRecycle",e),this.focusedIndex=-1,this.onUpdate()},scripts:"refreshUI","store.route.paths.1":"onHashChange",selectedScript(e){T.$J.setContext("selectedScript",e)},showHotkeys(e){T.$J.setContext("showHotkeys",e)}},computed:{draggable(){return!this.showRecycle&&"exec"===cl.sort},currentSortCompare(){var e;return null==(e=rl.sort[cl.sort])?void 0:e.compare},selectedScript(){return this.filteredScripts[this.focusedIndex]},message(){if(this.store.loading)return null;const e=this.sortedScripts;return(this.search?e.find(e=>!1!==e.$cache.show):e.length)?null:(0,p.ag)("labelNoSearchScripts")},searchNeedsCodeIds(){return this.search&&["code","all"].includes(cl.searchScope)&&this.store.scripts.filter(e=>null==e.$cache.code).map(e=>e.props.id)}},methods:{async refreshUI(){const e=this.searchNeedsCodeIds;null!=e&&e.length&&await this.getCodeFromStorage(e),this.onUpdate(),this.onHashChange()},onUpdate(){const e=[...this.showRecycle?this.trash:this.scripts],t=this.search?this.performSearch(e):e.length,n=this.currentSortCompare;n&&e.sort(ul(n)),this.sortedScripts=e,this.filteredScripts=this.search?e.filter(({$cache:e})=>e.show):e,this.selectScript(this.focusedIndex),!hl||t<hl?this.renderScripts():this.debouncedRender()},updateLater(){this.debouncedUpdate()},updateAll(){(0,p.gj)("CheckUpdate")},async installFromURL(){try{var e;let t=await(0,v.GW)((0,p.ag)("hintInputURL"),{input:"",ok:{type:"submit"}});t=null==(e=t)?void 0:e.trim(),t&&(t.includes("://")||(t=`https://${t}`),new URL(t),await(0,p.gj)("ConfirmInstall",{url:t}))}catch(e){e&&(0,v.PV)({text:e})}},async moveScript(e,t){if(e===t)return;const n=this.filteredScripts,o=C.scripts,l=n[e],s=o.indexOf(l),a=o.indexOf(n[t]),{id:i}=l.props;await(0,p.gj)("Move",{id:i,offset:a-s})&&(o.splice(s,1),o.splice(a,0,l),o.forEach((e,t)=>{e.props.position=t+1}),this.search&&this.onUpdate())},onOrderChange(e){f.Z.set("filters.sort",e.target.value)},onScopeChange(e){this.search&&this.scheduleSearch(),f.Z.set("filters.searchScope",e.target.value)},onStateChange(e){this.menuNewActive=e},editScript(e){const n=["scripts",e].filter(t).join("/");e||n!==(0,x.Qs)().pathname?(0,x.pV)(n):a.history.back(),e||c(v.wO,this)},async onHashChange(){const[e,t,n]=this.store.route.paths;if("_new"===t)o.assign(this,await(0,p.gj)("NewScript",n));else{const n=t&&+t||null,o=n&&this.scripts.find(e=>e.props.id===n);o?this.code=await(0,p.gj)("GetScriptCode",t):(this.canRenderScripts||(qi(),this.canRenderScripts=!0),this.debouncedRender(),t&&(0,x.pV)(e,!0)),this.script=o}},async renderScripts(){if(!this.canRenderScripts)return;const{length:e}=this.sortedScripts;let t=9;const n=(0,w.qj)({limit:t});this.batchRender=n;const o=performance.now();for(;t<e&&n===this.batchRender;){if(hl&&this.search)for(let n=0;n<hl&&t<e;t+=1)n+=this.sortedScripts[t].$cache.show?1:0;else t+=hl||1;n.limit=t,await new l(e=>this.$nextTick(e)),!hl&&performance.now()-o>=dl&&(hl=2*t),hl&&t<e&&await(0,p.dL)()}},performSearch(e){let t,n=0;const[,o=this.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),l="i"]=this.search.match(/^\/(.+?)\/(\w*)$|$/),s=cl.searchScope,a="name"===s||"all"===s,i="code"===s||"all"===s;try{t=o&&new RegExp(o,l),e.forEach(({$cache:e})=>{e.show=!o||a&&t.test(e.search)||i&&t.test(e.code),n+=e.show}),this.searchError=null}catch(e){this.searchError=e.message}return n},async scheduleSearch(){const e=this.searchNeedsCodeIds;null!=e&&e.length&&await this.getCodeFromStorage(e),this.debouncedUpdate()},async getCodeFromStorage(e){const t=await(0,p.gj)("GetScriptCode",e);this.store.scripts.forEach(({$cache:e,props:{id:n}})=>{n in t&&(e.code=t[n])})},async emptyRecycleBin(){await(0,v.GW)((0,p.ag)("buttonEmptyRecycleBin"))&&((0,p.gj)("CheckRemove",{force:!0}),C.scripts=C.scripts.filter(e=>!e.config.removed))},adjustScriptWidth(){const e=cl.viewTable?pl:ml;this.numColumns=cl.viewSingleColumn?1:e.findIndex(e=>a.innerWidth<e)+1||e.length+1},selectScript(e){e=Math.min(e,this.filteredScripts.length-1),(e=Math.max(e,-1))!==this.focusedIndex&&(this.focusedIndex=e)},markRemove(e,t){(0,p.gj)("MarkRemoved",{id:e.props.id,removed:t})},handleActionRemove(e){this.markRemove(e,1),this.removing=!0,setTimeout(()=>{this.removing=!1},1e3)},handleActionRestore(e){this.markRemove(e,0)},handleActionToggle(e){(0,p.gj)("UpdateScriptInfo",{id:e.props.id,config:{enabled:e.config.enabled?0:1}})},handleActionUpdate(e){(0,p.gj)("CheckUpdate",e.props.id)},handleSmoothScroll(e){if(!e)return;const t=this.$refs.scriptList;t.scroll({top:t.scrollTop+e,behavior:"smooth"})}},activated:v.wO,created(){this.debouncedUpdate=(0,p.Ds)(this.onUpdate,100),this.debouncedRender=(0,p.Ds)(this.renderScripts)},mounted(){if(C.loading||this.refreshUI(),!ml.length){const n=getComputedStyle(s.documentElement);[ml,pl]=["cards","table"].map(e=>{var o;return(null==(o=n.getPropertyValue(`--columns-${e}`))?void 0:o.split(",").map(Number).filter(t))||[]}),e.addEventListener("resize",this.adjustScriptWidth)}this.adjustScriptWidth(),this.disposeList=[...u?[T.$J.register("tab",()=>{(0,T.nk)(1)}),T.$J.register("s-tab",()=>{(0,T.nk)(-1)})]:[],...Cl(()=>{var e;null==(e=this.$refs.search)||e.focus()},[["ctrlcmd-f",gl],["/",vl,!0]]),...Cl(()=>{var e;null==(e=this.$refs.search)||e.blur()},[["enter",fl]]),...Cl(()=>{this.showHotkeys=!1},[["escape",xl],["q",xl,!0]]),...Cl(()=>{let e=this.focusedIndex;e<0?e=0:e+=this.numColumns,e<this.filteredScripts.length&&this.selectScript(e)},[["ctrlcmd-down",gl],["down",gl],["j",vl,!0]]),...Cl(()=>{const e=this.focusedIndex-this.numColumns;e>=0&&this.selectScript(e)},[["ctrlcmd-up",gl],["up",gl],["k",vl,!0]]),...Cl(()=>{this.selectScript(this.focusedIndex-1)},[["ctrlcmd-left",gl],["left",vl],["h",vl,!0]]),...Cl(()=>{this.selectScript(this.focusedIndex+1)},[["ctrlcmd-right",gl],["right",vl],["l",vl,!0]]),...Cl(()=>{this.selectScript(0)},[["ctrlcmd-home",gl],["g g",vl,!0]]),...Cl(()=>{this.selectScript(this.filteredScripts.length-1)},[["ctrlcmd-end",gl],["G",vl,!0]]),...Cl(()=>{this.editScript(this.selectedScript.props.id)},kl(yl.edit,wl,!0)),...Cl(()=>{this.handleActionRemove(this.selectedScript)},[["delete",wl],[yl.remove,wl,!0]]),...Cl(()=>{this.handleActionUpdate(this.selectedScript)},[[yl.update,wl,!0]]),...Cl(()=>{this.handleActionToggle(this.selectedScript)},[[yl.toggle,wl,!0]]),...Cl(()=>{this.handleActionRestore(this.selectedScript)},[[yl.restore,bl,!0]])]},beforeUnmount(){var e;null==(e=this.disposeList)||e.forEach(e=>{e()})}},Sl=(0,Ae.Z)(_l,[["render",ae]]),zl=["data-show-advanced"],Ul=["textContent"],Dl={class:"mb-1c"},$l=["textContent"],Rl={class:"ml-2c flex flex-col"},El=["textContent"],Vl={class:"ml-2c"},Il=["onUpdate:modelValue"],Tl=["value","textContent"],Wl=["onUpdate:modelValue"],Ll=["value","textContent"],jl=["textContent"],Al=["onUpdate:modelValue"],Zl=["value","textContent"],Ml=["textContent"],Hl=["onUpdate:modelValue"],Pl=["textContent"],Nl={class:"mb-1c"},Ol=["textContent"],Bl={class:"mb-2c"},Fl=["textContent"],ql=["open"],Kl=["onClick"],Yl={class:"mb-1c"},Jl=["textContent"],Gl=["onUpdate:modelValue"],Xl=["value","textContent"],Ql={class:"mr-2c"},es=["textContent"],ts=["onUpdate:modelValue"],ns=["value","textContent"],os=["textContent"],ls=(0,b._)("code",null,"page",-1),ss=["textContent"],as=["href"];function is(e,t){var n;const o=(0,b.up)("setting-check"),l=(0,b.up)("tooltip"),s=(0,b.up)("locale-group"),a=(0,b.up)("vm-import"),i=(0,b.up)("vm-export"),r=(0,b.up)("vm-sync"),c=(0,b.up)("vm-editor"),u=(0,b.up)("vm-template"),d=(0,b.up)("vm-blacklist"),h=(0,b.up)("vm-css");return(0,b.wg)(),(0,b.iD)("div",{class:"tab-settings","data-show-advanced":e.settings.showAdvanced},[(0,b._)("h1",{textContent:(0,S.zw)(e.i18n("labelSettings"))},null,8,Ul),(0,b._)("section",Dl,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("optionPopup"))},null,8,$l),(0,b._)("div",null,[(0,b.Wm)(o,{name:"autoReload",label:e.i18n("labelAutoReloadCurrentTab")},null,8,["label"])]),(0,b._)("div",Rl,[(0,b.Wm)(o,{name:"editorWindow",class:"mr-2",ref:"EW"},{default:(0,b.w5)(()=>[(0,b.Wm)(l,{content:e.editorWindowHint,disabled:!e.editorWindowHint},{default:(0,b.w5)(()=>[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("optionEditorWindow"))},null,8,El)]),_:1},8,["content","disabled"])]),_:1},512),(0,b.wy)((0,b.Wm)(o,{name:"editorWindowSimple",label:e.i18n("optionEditorWindowSimple")},null,8,["label"]),[[W.F8,null==(n=e.$refs.EW)?void 0:n.value]])]),(0,b._)("div",Vl,[(0,b._)("label",null,[(0,b.Wm)(s,{"i18n-key":"labelPopupSort"},{default:(0,b.w5)(()=>[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(["filtersPopup.sort"],t=>(0,b.wy)(((0,b.wg)(),(0,b.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items[t].enum,(e,n)=>((0,b.wg)(),(0,b.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,S.zw)(e)},null,8,Tl))),128))],8,Il)),[[W.bM,e.settings[t]]])),128))]),_:1})]),(0,b._)("label",null,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(["filtersPopup.hideDisabled"],t=>(0,b.wy)(((0,b.wg)(),(0,b.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items[t].enum,(e,n)=>((0,b.wg)(),(0,b.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,S.zw)(e)},null,8,Ll))),128))],8,Wl)),[[W.bM,e.settings[t]]])),128))]),(0,b.wy)((0,b.Wm)(o,{name:"filtersPopup.enabledFirst",label:e.i18n("optionPopupEnabledFirst")},null,8,["label"]),[[W.F8,!e.settings["filtersPopup.hideDisabled"]]])]),(0,b._)("div",null,[(0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelBadge"))},null,8,jl),((0,b.wg)(),(0,b.iD)(b.HY,null,(0,b.Ko)(["showBadge"],t=>(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items[t].enum,(e,n)=>((0,b.wg)(),(0,b.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,S.zw)(e)},null,8,Zl))),128))],8,Al),[[W.bM,e.settings[t]]])),64))])]),(0,b._)("div",null,[(0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelBadgeColors"))},null,8,Ml),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items.badgeColor.enum,(t,n)=>((0,b.wg)(),(0,b.j4)(l,{key:`bc:${n}`,content:t},{default:(0,b.w5)(()=>[(0,b.wy)((0,b._)("input",{type:"color","onUpdate:modelValue":t=>e.settings[n]=t},null,8,Hl),[[W.nr,e.settings[n]]])]),_:2},1032,["content"]))),128)),(0,b.wy)((0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonReset")),class:"ml-1",onClick:t[0]||(t[0]=(...t)=>e.onResetBadgeColors&&e.onResetBadgeColors(...t))},null,8,Pl),[[W.F8,e.isCustomBadgeColor]])])])]),(0,b._)("section",Nl,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("optionUpdate"))},null,8,Ol),(0,b._)("div",null,[(0,b._)("label",null,[(0,b.Wm)(s,{"i18n-key":"labelAutoUpdate"},{default:(0,b.w5)(()=>[(0,b.wy)((0,b._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.autoUpdate=t),type:"number",min:"0",max:"365",step:"1/"},null,512),[[W.nr,e.settings.autoUpdate]])]),_:1})])]),(0,b._)("div",null,[(0,b.Wm)(o,{name:"notifyUpdates",label:e.i18n("labelNotifyUpdates")},null,8,["label"]),(0,b.Wm)(o,{name:"notifyUpdatesGlobal",label:e.i18n("labelNotifyUpdatesGlobal"),class:"ml-2"},null,8,["label"])])]),(0,b._)("section",Bl,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelBackup"))},null,8,Fl),(0,b.Wm)(a),(0,b.Wm)(i)]),(0,b.Wm)(r),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)({showAdvanced:e.settings},(t,n)=>((0,b.wg)(),(0,b.iD)("details",{key:n,open:t[n]},[(0,b._)("summary",{onClick:(0,W.iM)(e=>t[n]=!t[n],["prevent"])},[((0,b.wg)(),(0,b.j4)((0,b.LL)(t[n]?"h1":"h3"),{textContent:(0,S.zw)(e.i18n("labelAdvanced")),class:"inline-block"},null,8,["textContent"]))],8,Kl),(0,b._)("section",Yl,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelGeneral"))},null,8,Jl),(0,b._)("div",null,[(0,b._)("label",null,[(0,b.Wm)(s,{"i18n-key":"optionUiTheme"},{default:(0,b.w5)(()=>[((0,b.wg)(),(0,b.iD)(b.HY,null,(0,b.Ko)(["uiTheme"],t=>(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items[t].enum,(e,n)=>((0,b.wg)(),(0,b.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,S.zw)(e)},null,8,Xl))),128))],8,Gl),[[W.bM,e.settings[t]]])),64))]),_:1})])]),(0,b._)("div",Ql,[(0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelInjectionMode"))},null,8,es),((0,b.wg)(),(0,b.iD)(b.HY,null,(0,b.Ko)(["defaultInjectInto"],t=>(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.items[t].enum,(e,n)=>((0,b.wg)(),(0,b.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,S.zw)(n)},null,8,ns))),128))],8,ts),[[W.bM,e.settings[t]]])),64)),(0,b._)("a",{class:"ml-1",href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("learnInjectionMode"))},null,8,os)]),(0,b._)("label",null,[(0,b.Wm)(o,{name:"xhrInject"}),(0,b.Wm)(l,{content:e.i18n("labelXhrInjectHint")},{default:(0,b.w5)(()=>[(0,b.Wm)(s,{"i18n-key":"labelXhrInject"},{default:(0,b.w5)(()=>[ls]),_:1})]),_:1},8,["content"])])]),(0,b._)("div",null,[(0,b.Wm)(s,{"i18n-key":"labelExposeStatus",class:"mr-1c"},{default:(0,b.w5)(()=>[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.expose,([e,t])=>((0,b.wg)(),(0,b.j4)(o,{key:t,name:`expose.${e}`,class:"mr-1c valign-tb"},{default:(0,b.w5)(()=>[(0,b._)("span",{textContent:(0,S.zw)(t)},null,8,ss),(0,b._)("a",{href:`https://${t}`,target:"_blank",rel:"noopener noreferrer"},"\u2197",8,as)]),_:2},1032,["name"]))),128))]),_:2},1024)])]),(0,b.Wm)(c),(0,b.Wm)(u),(0,b.Wm)(d),(0,b.Wm)(h)],8,ql))),128))],8,zl)}var rs=d(9285);function cs(e){return new l((t,n)=>{const o=s.createElement("script");o.src=e,o.onload=t,o.onerror=n,s.body.append(o)})}const us=(0,d(3055).HP)(async()=>{await cs("/public/lib/zip-no-worker.min.js");const{zip:e}=a,t=["/public/lib/z-worker.js"];return e.configure({workerScripts:{deflate:t,inflate:t}}),e}),ds=["textContent"],hs=["disabled","textContent"],ps={class:"mt-1 flex flex-col"},ms={class:"import-report"},gs=["data-type"],fs=["textContent"],vs=["textContent","colspan"];function ws(e,t){const n=(0,b.up)("tooltip"),o=(0,b.up)("setting-check");return(0,b.wg)(),(0,b.iD)("div",null,[(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonImportData")),onClick:t[0]||(t[0]=(...t)=>e.pickBackup&&e.pickBackup(...t)),ref:"buttonImport"},null,8,ds),(0,b.Wm)(n,{content:e.i18n("hintVacuum")},{default:(0,b.w5)(()=>[(0,b._)("button",{onClick:t[1]||(t[1]=(...t)=>e.vacuum&&e.vacuum(...t)),disabled:e.vacuuming,textContent:(0,S.zw)(e.labelVacuum)},null,8,hs)]),_:1},8,["content"]),(0,b._)("div",ps,[(0,b.Wm)(o,{name:"importScriptData",label:e.i18n("labelImportScriptData")},null,8,["label"]),(0,b.Wm)(o,{name:"importSettings",label:e.i18n("labelImportSettings")},null,8,["label"])]),(0,b._)("table",ms,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(e.reports,({type:e,name:t,text:n},o)=>((0,b.wg)(),(0,b.iD)("tr",{key:o,"data-type":e},[t?((0,b.wg)(),(0,b.iD)("td",{key:0,textContent:(0,S.zw)(t)},null,8,fs)):(0,b.kq)("",!0),(0,b._)("td",{textContent:(0,S.zw)(n),colspan:t?null:2},null,8,vs)],8,gs))),128))])])}const bs=(0,w.qj)([]),xs={components:{SettingCheck:ce.Z,Tooltip:re.Z},data(){return{reports:bs,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const e=s.createElement("input");e.type="file",e.accept=".zip",e.onchange=()=>{var t;return ys(null==(t=e.files)?void 0:t[0])},e.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming");const{fixes:e,errors:t}=await(0,p.gj)("Vacuum"),n=null==t?void 0:t.join("\n");this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")+(e?` (${e})`:""),n&&(0,v.PV)({text:n})}},mounted(){const e=Cs(this.$refs.buttonImport);a.addEventListener("hashchange",e),e()}};async function ys(e){if(!e)return;bs.length=0;const n=await us(),s=new n.ZipReader(new n.BlobReader(e)),a=await s.getEntries().catch(x)||[];if(bs.length)return;x("",e.name,"info");const i={},r=a.reduce((e,t)=>{var n;return e+(null==(n=t.filename)?void 0:n.endsWith(".user.js"))},0),c=a.find(e=>{var t;return"violentmonkey"===(null==(t=e.filename)?void 0:t.toLowerCase())}),u=c&&await m(c)||{};function d(e,t){try{return JSON.parse(e)}catch(e){x(e,t.filename,null)}}function h(e,t){return l.all(a.map(async n=>{const{filename:o}=n;if(null!=o&&o.endsWith(t)){const l=await m(n);return l&&e(n,l,o.slice(0,-t.length))}}))}async function m(e){const t=await e.getData(new n.TextWriter);return e.filename.endsWith(".js")?t:d(t,e)}async function g(e,t,n){var o,l,s,a;const{filename:r}=e,c=u.scripts[n],d=(0,nt.Z)({code:t},c&&{custom:c.custom,config:(0,nt.Z)({enabled:null!=(o=c.enabled)?o:1,shouldUpdate:null!=(l=c.update)?l:1},c.config),position:c.position,props:{lastModified:c.lastModified||(null==(s=c.props)?void 0:s.lastModified)||+e.lastModDate,lastUpdated:c.lastUpdated||(null==(a=c.props)?void 0:a.lastUpdated)||+e.lastModDate}});try{i[n]=(await(0,p.gj)("ParseScript",d)).update.props.uri,y(r)}catch(e){x(e,r,"script")}}async function w(e,t,n){const{meta:o,settings:l={},options:s}=t;if(!o||!s)return;const a=s.override||{};bs[0].text="Tampermonkey",u.scripts[n]={config:{enabled:!1!==l.enabled?1:0,shouldUpdate:s.check_for_updates?1:0},custom:{downloadURL:"string"==typeof o.file_url?o.file_url:void 0,noframes:null==a.noframes?void 0:+!!a.noframes,runAt:/^document-(start|body|end|idle)$/.test(s.run_at)?s.run_at:void 0,exclude:k(a.use_excludes),include:k(a.use_includes),match:k(a.use_matches),origExclude:!1!==a.merge_excludes,origInclude:!1!==a.merge_includes,origMatch:!1!==a.merge_matches},position:+l.position||void 0,props:{lastModified:+o.modified,lastUpdated:+o.modified}}}async function b(e,t,n){bs[0].text="Tampermonkey",u.values[i[n]]=t.data}function x(e,t,n="critical"){bs.push({text:e,name:t,type:n})}function y(e=""){const t=o.keys(i).length,n=(0,p.ag)("msgImported",[t===r?t:`${t} / ${r}`]);return bs[0].name=n,bs[0].text=e,n}function C(e,n){return o.entries(e||{}).map(n).filter(t)}function k(e){return(0,p.rY)(e).filter(e=>"string"==typeof e)}u.scripts||(u.scripts={}),u.values||(u.values={}),await h(w,".options.json"),await h(g,".user.js"),f.Z.get("importScriptData")&&(await h(b,".storage.json"),(0,p.gj)("SetValueStores",u.values)),f.Z.get("importSettings")&&(0,p.gj)("SetOptions",C(u.settings,([e,t])=>"sync"!==e&&{key:e,value:t})),(0,p.gj)("CheckPosition"),(0,v.PV)({text:y()}),await s.close()}function Cs(e){let t;const n=t=>e.classList.toggle("drop-allowed",t),o=()=>n(!1),l=()=>{clearTimeout(t),t=setTimeout(o,250)},i=e=>{clearTimeout(t);const o=e.dataTransfer.types.includes("Files");o&&e.preventDefault(),n(o)},r=async t=>{t.preventDefault(),n(!1);const o=t.dataTransfer.files[0];await(0,v.GW)((0,p.ag)("buttonImportData"))&&(e.disabled=!0,await ys(o),e.disabled=!1)};return()=>{const e="#settings"===a.location.hash,t=s[(e?"add":"remove")+"EventListener"];c(t,s,"dragend",o),c(t,s,"dragleave",l),c(t,s,"dragover",i),c(t,s,"drop",r)}}const ks=(0,Ae.Z)(xs,[["render",ws]]),_s={class:"export"},Ss={class:"flex flex-wrap center-items mr-1c"},zs=["textContent","disabled"],Us={href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"},Ds=["textContent"],$s={class:"mt-1"},Rs={class:"modal-content"},Es=["download","href"],Vs=[(0,b.Uk)(" Right click and save as"),(0,b._)("br",null,null,-1),(0,b._)("strong",null,"scripts.zip",-1)];function Is(e,t,n,o,l,s){const a=(0,b.up)("setting-text"),i=(0,b.up)("icon"),r=(0,b.up)("tooltip"),c=(0,b.up)("setting-check"),u=(0,b.up)("modal");return(0,b.wg)(),(0,b.iD)("div",_s,[(0,b._)("div",Ss,[(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonExportData")),onClick:t[0]||(t[0]=(...e)=>s.handleExport&&s.handleExport(...e)),disabled:l.exporting},null,8,zs),(0,b.Wm)(a,{name:"exportNameTemplate",ref:"tpl","has-reset":"","has-save":!1,rows:1,class:"tpl flex flex-1 center-items ml-1c"},null,512),(0,b.Wm)(r,{content:e.i18n("msgDateFormatInfo",l.dateTokens),placement:"left"},{default:(0,b.w5)(()=>[(0,b._)("a",Us,[(0,b.Wm)(i,{name:"info"})])]),_:1},8,["content"]),(0,b._)("span",{hidden:"",textContent:(0,S.zw)(s.getFileName())},null,8,Ds)]),(0,b._)("div",$s,[(0,b.Wm)(c,{name:"exportValues",label:e.i18n("labelExportScriptData")},null,8,["label"])]),l.store.ffDownload?((0,b.wg)(),(0,b.j4)(u,{key:0,transition:"in-out",visible:!!l.store.ffDownload.url,onClose:t[1]||(t[1]=e=>l.store.ffDownload={})},{default:(0,b.w5)(()=>[(0,b._)("div",Rs,[(0,b._)("a",{download:l.store.ffDownload.name,href:l.store.ffDownload.url},Vs,8,Es)])]),_:1},8,["visible"])):(0,b.kq)("",!0)])}var Ts=d(3011),Ws=d(8346),Ls=d(3795),js=d(8860),As=d(3220);u&&(C.ffDownload={});const Zs={components:{SettingCheck:ce.Z,SettingText:js.Z,Icon:I.Z,Modal:Ts.Z,Tooltip:re.Z},data:()=>({store:C,dateTokens:o.keys(Ws.q).join(", "),exporting:!1}),methods:{async handleExport(){try{this.exporting=!0,Ms(await Ps(),this.getFileName())}finally{this.exporting=!1}},getFileName(){var e;const{tpl:t}=this.$refs;return t&&`${(0,Ws.p)((null==(e=t.value)?void 0:e.trim())||t.defaultValue)}.zip`}}};function Ms(e,t){const n=Ls.Z.firefox;if(n&&("win"===Ls.Z.os?n<56:"mac"===Ls.Z.os?n<61:n<63)){const n=new FileReader;n.onload=()=>{C.ffDownload={name:t,url:n.result}},n.readAsDataURL(e)}else(0,As.l)(e,t)}function Hs(e){return e.replace(/[\\/:*?"<>|]/g,"-")}async function Ps(){const e=f.Z.get("exportValues"),t=await(0,p.gj)("ExportZip",{values:e}),n={},o={scripts:{},settings:f.Z.get()};delete o.settings.sync,e&&(o.values={});const s=((0,he._M)(t,"items")||[]).map(({script:l,code:s})=>{let a=Hs((0,p.pV)(l));n[a]?(n[a]+=1,a=`${a}_${n[a]}`):n[a]=1;const{lastModified:i,lastUpdated:r}=l.props,c={custom:l.custom,config:l.config,position:l.props.position,lastModified:i,lastUpdated:r};if(e){const e=t.values[l.props.id];e&&(o.values[l.props.uri]=e)}return o.scripts[a]=c,{name:`${a}.user.js`,content:s,lastModDate:new Date(r||i)}});s.push({name:"violentmonkey",content:JSON.stringify(o)});const a=await us(),i=new a.BlobWriter("application/zip"),r=new a.ZipWriter(i,{bufferedWrite:!0,keepOrder:!1});return await l.all(s.map(e=>r.add(e.name,new a.TextReader(e.content),{lastModDate:e.lastModDate}))),await r.close()}const Ns=(0,Ae.Z)(Zs,[["render",Is]]),Os={class:"mb-1c"},Bs=["textContent"],Fs={key:0,class:"flex flex-wrap center-items"},qs=["textContent"],Ks=["value"],Ys=["textContent","value"],Js=["textContent","disabled"],Gs=["disabled"],Xs=["textContent"],Qs={key:1,class:"mt-1c"},ea={class:"sync-server-url"},ta=["textContent"],na=["disabled"],oa={class:"mr-2c"},la=["textContent"],sa=["disabled"],aa={class:"inline-block"},ia=["textContent"],ra=["disabled"],ca=["disabled"],ua=["textContent"],da=["textContent","disabled"],ha={key:2};function pa(e,t,n,o,l,s){var a,i;const r=(0,b.up)("icon"),c=(0,b.up)("tooltip"),u=(0,b.up)("setting-check");return(0,b.wg)(),(0,b.iD)("section",Os,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelSync"))},null,8,Bs),s.state?((0,b.wg)(),(0,b.iD)("div",Fs,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelSyncService"))},null,8,qs),(0,b._)("select",{class:"mx-1",value:l.syncConfig.current,onChange:t[0]||(t[0]=(...e)=>s.onSyncChange&&s.onSyncChange(...e))},[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(s.syncServices,e=>((0,b.wg)(),(0,b.iD)("option",{key:e.name,textContent:(0,S.zw)(e.displayName),value:e.name},null,8,Ys))),128))],40,Ks),s.service.name&&"oauth"===s.state.authType?((0,b.wg)(),(0,b.iD)("button",{key:0,textContent:(0,S.zw)(s.state.label),disabled:!s.state.canAuthorize,onClick:t[1]||(t[1]=(...e)=>s.onAuthorize&&s.onAuthorize(...e))},null,8,Js)):(0,b.kq)("",!0),s.service.name?((0,b.wg)(),(0,b.j4)(c,{key:1,content:e.i18n("labelSync"),class:"stretch-self flex mr-1"},{default:(0,b.w5)(()=>[(0,b._)("button",{disabled:!s.state.canSync,onClick:t[2]||(t[2]=(...e)=>s.onSync&&s.onSync(...e)),class:"flex center-items"},[(0,b.Wm)(r,{name:"refresh"})],8,Gs)]),_:1},8,["content"])):(0,b.kq)("",!0),s.state?((0,b.wg)(),(0,b.iD)("p",{key:2,textContent:(0,S.zw)(s.state.message)},null,8,Xs)):(0,b.kq)("",!0)])):(0,b.kq)("",!0),"password"===(null==(a=s.state)?void 0:a.authType)?((0,b.wg)(),(0,b.iD)("fieldset",Qs,[(0,b._)("label",ea,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelSyncServerUrl"))},null,8,ta),(0,b.wy)((0,b._)("input",{type:"url","onUpdate:modelValue":t[3]||(t[3]=e=>s.state.userConfig.serverUrl=e),disabled:!s.state.canAuthorize},null,8,na),[[W.nr,s.state.userConfig.serverUrl]])]),(0,b._)("div",oa,[(0,b._)("label",null,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelSyncUsername"))},null,8,la),(0,b.wy)((0,b._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>s.state.userConfig.username=e),disabled:!s.state.canAuthorize||s.state.userConfig.anonymous},null,8,sa),[[W.nr,s.state.userConfig.username]])]),(0,b._)("label",aa,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelSyncPassword"))},null,8,ia),(0,b.wy)((0,b._)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>s.state.userConfig.password=e),disabled:!s.state.canAuthorize||s.state.userConfig.anonymous},null,8,ra),[[W.nr,s.state.userConfig.password]])]),(0,b._)("label",null,[(0,b.wy)((0,b._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>s.state.userConfig.anonymous=e),disabled:!s.state.canAuthorize},null,8,ca),[[W.e8,s.state.userConfig.anonymous]]),(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelSyncAnonymous"))},null,8,ua)])]),(0,b._)("div",null,[(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonSave")),onClick:t[7]||(t[7]=(0,W.iM)((...e)=>s.onSaveUserConfig&&s.onSaveUserConfig(...e),["prevent"])),disabled:!s.state.canAuthorize},null,8,da)])])):(0,b.kq)("",!0),null!=(i=s.service)&&i.name?((0,b.wg)(),(0,b.iD)("div",ha,[(0,b.Wm)(u,{name:"syncScriptStatus",label:e.i18n("labelSyncScriptStatus")},null,8,["label"])])):(0,b.kq)("",!0)])}const ma="sync.current",ga={current:""};(0,ue.Z)(ma,e=>{ga.current=e||""});const fa={components:{SettingCheck:ce.Z,Icon:I.Z,Tooltip:re.Z},data:()=>({syncConfig:ga,store:C}),computed:{syncServices(){const e=this.store.sync;return e&&e.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...e]:null},service(){if(this.syncServices){const e=this.syncConfig.current||"";let t=this.syncServices.find(t=>t.name===e);return t||(console.warn("Invalid current service:",e),t=this.syncServices[0]),t}return null},state(){const{service:e}=this;if(e){const t=["idle","error"].includes(e.syncState)&&["no-auth","unauthorized","error","authorized"].includes(e.authState),n=t&&"authorized"===e.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:t,canSync:n,authType:e.properties.authType,userConfig:e.userConfig||{}}}return null}},methods:{onSaveUserConfig(){(0,p.NB)("SyncSetConfig",this.state.userConfig).catch(p.ZT)},onSyncChange(e){const{value:t}=e.target;f.Z.set(ma,t)},onAuthorize(){const{service:e}=this;["authorized"].includes(e.authState)?(0,p.NB)("SyncRevoke"):["no-auth","unauthorized","error"].includes(e.authState)&&(0,p.NB)("SyncAuthorize")},onSync(){(0,p.NB)("SyncStart")},getMessage(){const{service:e}=this;if("initializing"===e.authState)return this.i18n("msgSyncInit");if("no-auth"===e.authState)return this.i18n("msgSyncNoAuthYet");if("error"===e.authState)return this.i18n("msgSyncInitError");if("unauthorized"===e.authState)return this.i18n("msgSyncInitError");if("error"===e.syncState)return this.i18n("msgSyncError");if("ready"===e.syncState)return this.i18n("msgSyncReady");if("syncing"===e.syncState){let t="";return e.progress&&e.progress.total&&(t=` (${e.progress.finished}/${e.progress.total})`),this.i18n("msgSyncing")+t}if(e.lastSync){const t=new Date(e.lastSync).toLocaleString();return this.i18n("lastSync",t)}},getLabel(){const{service:e}=this;return"authorizing"===e.authState?this.i18n("labelSyncAuthorizing"):"authorized"===e.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},va=(0,Ae.Z)(fa,[["render",pa]]),wa=["textContent"],ba={class:"mr-1c flex center-items"},xa=["textContent"],ya=["disabled","title"],Ca=["value","textContent"],ka=["textContent"],_a=["textContent"],Sa=["href"],za=["textContent"],Ua=["innerHTML"],Da=["textContent"],$a=["textContent"];function Ra(e,t,n,o,l,s){const a=(0,b.up)("setting-text");return(0,b.wg)(),(0,b.iD)("section",null,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelEditor"))},null,8,wa),(0,b._)("div",ba,[(0,b._)("span",{textContent:(0,S.zw)(e.i18n("labelTheme"))},null,8,xa),(0,b.wy)((0,b._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.theme=e),disabled:l.busy,title:l.css},[(0,b._)("option",{value:l.DEFAULT,textContent:(0,S.zw)(e.i18n("labelRunAtDefault"))},null,8,Ca),(0,b._)("option",{value:"",textContent:(0,S.zw)(e.i18n("labelBadgeNone"))},null,8,ka),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(l.themes,e=>((0,b.wg)(),(0,b.iD)("option",{key:e,textContent:(0,S.zw)(e)},null,8,_a))),128))],8,ya),[[W.bM,l.theme]]),(0,b._)("a",{href:l.ghURL,target:"_blank"},"\u2197",8,Sa),(0,b._)("p",{textContent:(0,S.zw)(l.error)},null,8,za)]),(0,b._)("p",{innerHTML:e.i18n("descEditorOptions"),class:"my-1"},null,8,Ua),(0,b.Wm)(a,{name:"editor",ref:"editor",json:!0,"has-reset":!0,onSave:s.onSave},{default:(0,b.w5)(()=>[(0,b._)("button",{textContent:(0,S.zw)(e.i18n("buttonShowEditorState")),onClick:t[1]||(t[1]=(...e)=>s.toggleStateHint&&s.toggleStateHint(...e))},null,8,Da)]),_:1},8,["onSave"]),(0,b._)("pre",{textContent:(0,S.zw)(l.hint),class:"monospace-font dim-hint"},null,8,$a)])}const Ea="editorTheme",Va="editorThemeName",Ia=["3024-day","3024-night","abbott","abcdef","ambiance-mobile","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","juejin","lesser-dark","liquibyte","lucario","material-darker","material-ocean","material-palenight","material","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"],Ta="codemirror/CodeMirror",Wa="master",La="theme",ja=`https://github.com/${Ta}/tree/${Wa}/${La}`,Aa="default",Za=20,Ma=100,Ha=e=>e?e.split("\n",Za+1).map((e,t)=>(t===Za?"...":e.length>Ma&&`${e.slice(0,Ma)}...`)||e).join("\n"):null,Pa={data:()=>({hint:null,busy:!1,error:null,css:null,theme:null,themes:Ia,DEFAULT:Aa,ghURL:ja}),components:{SettingText:js.Z},beforeUnmount(){this.revokers.forEach(e=>e()),this.revokers=null},async mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean),this.revokers||(this.css=Ha(f.Z.get(Ea)),this.revokers=[(0,ue.Z)(Va,e=>{this.theme=null!=e?e:Aa})],await f.Z.ready,this.$watch("theme",async e=>{const t=e&&e!==Aa&&`https://raw.githubusercontent.com/${Ta}/${Wa}/${La}/${e}.css`,n=t&&await this.fetch(t);f.Z.set(Va,!t||n?e:Aa),f.Z.set(Ea,n||""),this.css=Ha(n)}))},methods:{async fetch(e,t="text"){const n=s.activeElement;this.busy=!0;try{const o=await(await fetch(e))[t]();return this.error=null,o}catch(e){this.error=e.message||e.code||`${e}`}finally{this.busy=!1,this.$nextTick(()=>null==n?void 0:n.focus())}},onSave(){(0,v.PV)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(e){const t=e.target,{selectionStart:n,selectionEnd:o,value:l}=t,a={false:"true",true:"false"}[l.slice(n,o)];a&&!s.execCommand("insertText",!1,a)&&(t.value=l.slice(0,n)+a+l.slice(o),t.setSelectionRange(n+a.length,n+a.length),t.dispatchEvent(new Event("input")),t.onblur=()=>t.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const e=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],t={};o.entries((0,nt.Z)({},(await l.resolve().then(d.t.bind(d,4631,23))).default.defaults,(await l.resolve().then(d.bind(d,1095))).default.data().cmDefaults,f.Z.get("editor"))).sort(([e],[t])=>e<t?-1:e>t).filter(([t,n])=>!e.includes(t)&&"function"!=typeof n).forEach(([e,n])=>{t[e]=n}),this.hint=JSON.stringify(t,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>a.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},Na=(0,Ae.Z)(Pa,[["render",Ra]]),Oa=["textContent"];function Ba(e,t,n,o,l,s){const a=(0,b.up)("setting-text");return(0,b.wg)(),(0,b.iD)("section",null,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelScriptTemplate"))},null,8,Oa),(0,b.Wm)(a,{name:"scriptTemplate",onSave:s.onSave,"has-reset":""},null,8,["onSave"])])}const Fa={components:{SettingText:js.Z},methods:{onSave(){(0,v.PV)({text:this.i18n("msgSavedScriptTemplate")})}}},qa=(0,Ae.Z)(Fa,[["render",Ba]]),Ka=["textContent"],Ya=["textContent"],Ja={class:"flex flex-wrap"},Ga={key:0,class:"text-red"},Xa=["textContent"];function Qa(e,t,n,o,l,s){const a=(0,b.up)("setting-text");return(0,b.wg)(),(0,b.iD)("section",null,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelBlacklist"))},null,8,Ka),(0,b._)("p",null,[(0,b.Uk)((0,S.zw)(e.i18n("descBlacklist"))+" ",1),(0,b._)("a",{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("learnBlacklist"))},null,8,Ya)]),(0,b._)("div",Ja,[(0,b.Wm)(a,{name:"blacklist",class:"flex-1",onSave:s.onSave,onBgError:t[0]||(t[0]=e=>l.errors=e)},null,8,["onSave"]),l.errors?((0,b.wg)(),(0,b.iD)("ol",Ga,[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(l.errors,e=>((0,b.wg)(),(0,b.iD)("li",{key:e,textContent:(0,S.zw)(e)},null,8,Xa))),128))])):(0,b.kq)("",!0)])])}const ei={components:{SettingText:js.Z},data:()=>({errors:null}),methods:{onSave(){(0,v.PV)({text:this.i18n("msgSavedBlacklist")})}},async mounted(){this.errors=await(0,p.gj)("Storage",["base","getOne",En.BZ])}},ti=(0,Ae.Z)(ei,[["render",Qa]]),ni=["textContent"],oi=["innerHTML"];function li(e,t,n,o,l,s){const a=(0,b.up)("setting-text");return(0,b.wg)(),(0,b.iD)("section",null,[(0,b._)("h3",{textContent:(0,S.zw)(e.i18n("labelCustomCSS"))},null,8,ni),(0,b._)("p",{innerHTML:e.i18n("descCustomCSS")},null,8,oi),(0,b.Wm)(a,{name:"customCSS",onSave:s.onSave},null,8,["onSave"])])}const si={components:{SettingText:js.Z},methods:{onSave(){(0,v.PV)({text:this.i18n("msgSavedCustomCSS")})}}},ai=(0,Ae.Z)(si,[["render",li]]),ii={badgeColor:(0,p.ag)("titleBadgeColor"),badgeColorBlocked:(0,p.ag)("titleBadgeColorBlocked")},ri=o.keys(ii),ci={enum:ii,normalize:(e,t)=>/^#[0-9a-f]{6}$/i.test(e)?e:rs.Z[t]},ui=(0,nt.Z)({autoUpdate:{normalize:e=>Math.max(0,Math.min(365,+e||0))},defaultInjectInto:{enum:{[En.eT]:"",[En.pS]:"",[En.Vs]:""}},showAdvanced:{normalize:e=>e},showBadge:{enum:{"":(0,p.ag)("labelBadgeNone"),unique:(0,p.ag)("labelBadgeUnique"),total:(0,p.ag)("labelBadgeTotal")}},"filtersPopup.hideDisabled":{enum:{"":(0,p.ag)("optionPopupShowDisabled"),group:(0,p.ag)("optionPopupGroupDisabled"),hide:(0,p.ag)("optionPopupHideDisabled")}},"filtersPopup.sort":{enum:{exec:(0,p.ag)("filterExecutionOrder"),alpha:(0,p.ag)("filterAlphabeticalOrder")}},uiTheme:{enum:{"":(0,p.ag)("optionUiThemeAuto"),dark:(0,p.ag)("optionUiThemeDark"),light:(0,p.ag)("optionUiThemeLight")}}},c(he.Xw,ii,()=>ci)),di=(e,t)=>c(i,ui[t].enum,e)?e:o.keys(ui[t].enum)[0],hi=(e,t)=>(0,p.Ds)((n,o)=>{(n=t(n,e))!==(o=t(o,e))&&f.Z.set(e,n)},50),pi=(0,w.qj)({}),mi={components:{VmImport:ks,VmExport:Ns,VmSync:va,VmEditor:Na,VmTemplate:qa,VmBlacklist:ti,VmCss:ai,SettingCheck:ce.Z,LocaleGroup:de.Z,Tooltip:re.Z},data:()=>({expose:null,items:ui,settings:pi}),computed:{editorWindowHint(){var t;return null!=(t=e.chrome.windows)&&t.onBoundsChanged?null:this.i18n("optionEditorWindowHint")},isCustomBadgeColor:()=>ri.some(e=>pi[e]!==rs.Z[e])},methods:{onResetBadgeColors(){ri.forEach(e=>{pi[e]=rs.Z[e]})}},activated:v.wO,created(){this.revokers=[],c(he.LI,ui,([e,{normalize:t=di}])=>{this.revokers.push((0,ue.Z)(e,n=>{pi[e]=t(n,e)})),this.$watch(()=>pi[e],hi(e,t))}),this.expose=o.keys(f.Z.get("expose")).map(e=>[e,decodeURIComponent(e)]),us()},beforeUnmount(){this.revokers.forEach(e=>{e()})}},gi=(0,Ae.Z)(mi,[["render",is]]),fi={class:"tab-about mb-2c"},vi={class:"mt-0 mr-1c"},wi=["textContent"],bi=["textContent"],xi=["textContent"],yi=["textContent"],Ci=(0,b._)("span",{class:"text-red"}," \u2665",-1),ki=["textContent"],_i=["textContent"],Si=["textContent"],zi=["textContent"],Ui=["textContent"],Di=["textContent"],$i=["textContent"],Ri=(0,b.Uk)(" | "),Ei=["textContent"];function Vi(e,t,n,o,l,s){return(0,b.wg)(),(0,b.iD)("div",fi,[(0,b._)("h1",vi,[(0,b._)("span",{textContent:(0,S.zw)(l.name)},null,8,wi),(0,b._)("small",{textContent:(0,S.zw)(`v${l.version}`)},null,8,bi)]),(0,b._)("p",{textContent:(0,S.zw)(e.i18n("extDescription"))},null,8,xi),(0,b._)("div",null,[(0,b._)("a",{href:"https://violentmonkey.github.io/donate/",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelDonate"))},null,8,yi),Ci]),(0,b._)("div",null,[(0,b._)("label",{textContent:(0,S.zw)(e.i18n("labelRelated"))},null,8,ki),(0,b._)("ul",null,[(0,b._)("li",null,[(0,b._)("a",{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelHomepage"))},null,8,_i)]),(0,b._)("li",null,[(0,b._)("a",{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelFeedback"))},null,8,Si)]),(0,b._)("li",null,[(0,b._)("a",{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelContributors"))},null,8,zi)]),(0,b._)("li",null,[(0,b._)("a",{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelPrivacyPolicy"))},null,8,Ui)])])]),(0,b._)("div",null,[(0,b._)("label",{textContent:(0,S.zw)(e.i18n("labelCurrentLang"))},null,8,Di),(0,b._)("span",{class:"current",textContent:(0,S.zw)(l.language)},null,8,$i),Ri,(0,b._)("a",{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer",textContent:(0,S.zw)(e.i18n("labelHelpTranslate"))},null,8,Ei)])])}const Ii={data(){const e=browser.runtime.getManifest();return{name:e.name,version:e.version,language:browser.i18n.getUILanguage()}},activated:v.wO},Ti=(0,Ae.Z)(Ii,[["render",Vi]]),Wi="settings",Li="scripts",ji="about",Ai=[{name:Li,comp:Sl,label:(0,p.ag)("sideMenuInstalled")},{name:Wi,comp:gi,label:(0,p.ag)("sideMenuSettings")},{name:ji,comp:Ti,label:(0,p.ag)("sideMenuAbout")}],Zi=(0,p.ag)("extName"),Mi="!editScript",Hi={components:{Icon:I.Z},data(){const[e,t]=C.route.paths;return{tabs:Ai,aside:!1,canRenderAside:e!==Li||"_new"!==t&&!Number(t),store:C,installedScripts:k}},computed:{current(){const e=this.store.route.paths[0];return Ai.find(t=>t.name===e)||Ai[0]},tabComponent(){return this.current.comp}},watch:{"store.title"(e){s.title=e?`${e} - ${Zi}`:Zi},"store.route.paths"(){this.canRenderAside=!0,this.updateContext()}},methods:{updateContext(){const e=this.current.name===Li,{paths:t}=this.store.route;T.$J.setContext("editScript",e&&t[1]),T.$J.setContext("tabScripts",e&&!t[1])},switchTab(e){const t=this.tabs.indexOf(this.current),n=this.tabs[(t+e+this.tabs.length)%this.tabs.length];a.location.hash=(null==n?void 0:n.name)||""}},created(){s.addEventListener("dragover",e=>{var t;["",ji,Li].includes(this.store.route.hash)&&/^application\/(zip|x-zip-compressed)$/.test(null==(t=e.dataTransfer.items[0])?void 0:t.type)&&(a.location.hash=`#${Wi}`)})},mounted(){this.disposeList=[T.$J.register("a-pageup",()=>this.switchTab(-1),{condition:Mi}),T.$J.register("a-pagedown",()=>this.switchTab(1),{condition:Mi})],T.$J.enable(),this.updateContext()},beforeUnmount(){var e;null==(e=this.disposeList)||e.forEach(e=>{e()}),T.$J.disable()}},Pi=(0,Ae.Z)(Hi,[["render",V]]),Ni=["scripts","sizes"],Oi=[(0,p.ag)("editNavCode"),(0,p.ag)("editNavSettings"),(0,p.ag)("editNavValues"),"@require","@resource"];function Bi(){Yi(),(0,v.sY)(Pi)}function Fi(e,n){const o=e.meta||{},l=(0,p.iQ)(o,"name"),s=[o.name,l,o.description,(0,p.iQ)(o,"description"),e.custom.name,e.custom.description].filter(t).join("\n"),a=e.custom.name||l,i=a.toLowerCase();let r=0,c="";n.forEach((e,t)=>{r+=e,e&&(c+=`${Oi[t]}: ${(0,p.aj)(e)}\n`)}),e.$cache={search:s,name:a,lowerName:i,size:(0,p.aj)(r,!0).replace(" ",""),sizes:c.slice(0,-1).replace(/\x20/g,"\xa0").replace(/[^B]$/gm,"$&B"),sizeNum:r},(0,g.d)(e,C,!0)}function qi(){const e=+C.route.paths[1];return Ki(e?[e]:null).catch(e?()=>Ki():console.error)}async function Ki(e){const[t]=await l.all([(0,p.gj)("GetData",{ids:e,sizes:!0},{retry:!0}),f.Z.ready]),{scripts:n,sizes:s}=t,a=h(t,Ni);o.assign(C,a),n.forEach((e,t)=>{Fi(e,s[t])}),C.scripts=n,C.loading=!1}function Yi(){C.loading=!0,qi(),o.assign(m.Z,{ScriptsUpdated(){qi()},UpdateSync(e){C.sync=e},async UpdateScript({update:e,where:t}={}){if(!e)return;const[n]=await(0,p.gj)("GetSizes",[t.id]),{scripts:l}=C,s=l.findIndex(e=>e.props.id===t.id),a=o.assign({},l[s],e);a.error&&!e.error&&(a.error=null),Fi(a,n),s<0?(e.message="",l.push(a)):l[s]=a},RemoveScript(e){const t=C.scripts.findIndex(t=>t.props.id===e);t>=0&&C.scripts.splice(t,1)}})}o.assign(C,{loading:!1,sync:[],title:null}),Bi()},6291:(e,t,l)=>{var s={"./arrow.svg":7864,"./author.svg":6263,"./code.svg":4237,"./cog.svg":8527,"./command.svg":6337,"./filter.svg":1691,"./home.svg":6447,"./info.svg":6396,"./more.svg":485,"./plus.svg":336,"./question.svg":934,"./refresh.svg":1727,"./search.svg":2574,"./toggle-off.svg":3882,"./toggle-on.svg":6276,"./trash.svg":2981,"./undo.svg":418};function a(e){var t=i(e);return l(t)}function i(e){if(!l.o(s,e)){var t=new n("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=()=>o.keys(s),a.resolve=i,e.exports=a,a.id=6291},7462:(e,t,n)=>{"use strict";function l(){return l=o.assign?o.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)o.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},l.apply(this,arguments)}n.d(t,{Z:()=>l})}},m={};function g(e){var t=m[e];if(void 0!==t)return t.exports;var n=m[e]={exports:{}};return p[e].call(n.exports,n,n.exports,g),n.exports}g.m=p,r=[],g.O=(e,t,n,l)=>{if(!t){var s=1/0;for(u=0;u<r.length;u++){for(var[t,n,l]=r[u],a=!0,i=0;i<t.length;i++)(!1&l||s>=l)&&o.keys(g.O).every(e=>g.O[e](t[i]))?t.splice(i--,1):(a=!1,l<s&&(s=l));if(a){r.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=r.length;u>0&&r[u-1][2]>l;u--)r[u]=r[u-1];r[u]=[t,n,l]},g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},h=o.getPrototypeOf?e=>o.getPrototypeOf(e):e=>e.__proto__,g.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=o.create(null);g.r(n);var l={};d=d||[null,h({}),h([]),h(h)];for(var s=2&t&&e;"object"==typeof s&&!~d.indexOf(s);s=h(s))o.getOwnPropertyNames(s).forEach(t=>l[t]=()=>e[t]);return l.default=()=>e,g.d(n,l),n},g.d=(e,t)=>{for(var n in t)g.o(t,n)&&!g.o(e,n)&&o.defineProperty(e,n,{enumerable:!0,get:t[n]})},g.o=(e,t)=>o.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&o.defineProperty(e,Symbol.toStringTag,{value:"Module"}),o.defineProperty(e,"__esModule",{value:!0})},g.j=360,(()=>{var e={360:0};g.O.j=t=>0===e[t];var t=(t,n)=>{var o,l,[s,a,i]=n,r=0;if(s.some(t=>0!==e[t])){for(o in a)g.o(a,o)&&(g.m[o]=a[o]);if(i)var c=i(g)}for(t&&t(n);r<s.length;r++)l=s[r],g.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return g.O(c)},n=self.webpackChunkviolentmonkey=self.webpackChunkviolentmonkey||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var f=g.O(void 0,[386,84],()=>g(5107));f=g.O(f)})()}