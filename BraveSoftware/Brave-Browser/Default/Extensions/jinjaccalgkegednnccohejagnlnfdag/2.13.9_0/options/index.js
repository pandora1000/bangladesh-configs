{const e=function(){return this}(),{document:t,window:n}=e,l="auto",o="page",a="content",s=e=>"function"==typeof e,{Boolean:i,Error:r,Object:c,Promise:u,chrome:d,performance:p}=e,{apply:h}=Reflect,m=h.call.bind({}.hasOwnProperty),g=c.call.bind(c.call),f=!d.app,v="#scripts",w=(d.runtime.getURL("/").slice(0,-1),d.runtime.getManifest());d.runtime.getURL(w.options_page),d.runtime.getURL(w.icons[16].split("16")[0]),(()=>{var h,b,y,x={8843:(r,h,b)=>{"use strict";function y(e,t){if(null==e)return{};var n,l,o={},a=c.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(o[n]=e[n]);return o}b.d(h,{m:()=>lr}),b(2993);var x=b(3293),C=b(287),k=b(3057),_=b(4017),S=b(3048),z=(b(5517),b(2262)),D=b(8292);const U=(0,z.qj)({route:D.BC,scripts:[],removedScripts:[],needRefresh:!1,storageSize:0});var $=b(6252),R=b(3577);const E={class:"page-options flex h-screen"},V={key:0},j={class:"aside-content"},I=(0,$._)("img",{src:"/public/images/icon128.png"},null,-1),T=["textContent"],W=(0,$._)("hr",null,null,-1),O=["href","data-num-scripts","textContent"];var L=b(8250),A=b(9963);const M={class:"tab-installed flex flex-col"},Z={key:0,class:"flex flex-col flex-auto"},P={class:"flex"},H={key:0,class:"flex-auto"},N={class:"btn-ghost",tabindex:"0"},B=["textContent"],F=["textContent"],q=["textContent"],Y=["textContent"],K=["textContent"],J={class:"btn-ghost",tabindex:"0"},G=["value"],Q=["textContent","value"],X={class:"mr-2c"},ee=["placeholder"],te=["textContent"],ne=["textContent"],le=["textContent"],oe=["textContent"],ae={key:0,class:"hint mx-1 my-1 flex flex-col"},se=["textContent"],ie=["textContent"],re=["textContent"],ce=["data-columns","data-show-order","data-table"];var ue=b(1036),de=b(5310),pe=b(4439),he=b(3824),me=b(8694),ge=b(6930),fe=b(2770);const ve=".script",we="ontouchstart"in t,be=we?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},ye=we&&c.assign(t.createElement("div"),{className:"dragging-noscroll"}),xe=["scroll","mouseenter","mouseleave"],{addEventListener:Ce,removeEventListener:ke}=EventTarget.prototype;let _e,Se,ze,De,Ue,$e,Re,Ee,Ve,je,Ie,Te,We,Oe,Le,Ae,Me,Ze;function Pe(e,t,n){Ie=e,Te=t,g(n?Ce:ke,Ie,be.start,we?He:Fe)}function He(e){nt(e)&&($e=e,Re=setTimeout(Ne,500,"timer"),g(Ce,t,be.move,Ne),g(Ce,t,be.end,Be))}function Ne(e){Be(),"timer"===e&&(g(Fe,je,$e),f&&Je()&&(Ie.scrollTop+=1,Ie.scrollTop-=1))}function Be(){clearTimeout(Re),g(ke,t,be.move,Ne),g(ke,t,be.end,Be)}function Fe(e){var n;if(!nt(e))return;e.cancelable&&e.preventDefault();const{clientX:l,clientY:o}=(null==(n=e.touches)?void 0:n[0])||e,a=je.getBoundingClientRect(),s=Ie.getBoundingClientRect();_e=je.cloneNode(!0),Se=g([].filter,Ie.children,e=>"none"!==e.style.display),De=Se.indexOf(je),Ue=De,Se.splice(De,1),ze=a.height,Ee=l-a.left,Ve=o-a.top,We=s.top+50,Oe=s.bottom-50,Ze={},je.classList.add("dragging-placeholder"),_e.classList.add("dragging"),_e.style.transform=`translate(${a.left}px, ${a.top}px)`,_e.style.width=`${a.width}px`,Ie.appendChild(_e),we&&Ie.insertAdjacentElement("afterBegin",ye),g(Ce,t,be.move,qe),g(Ce,t,be.end,Ye)}function qe(e){var t;const{clientX:n,clientY:l,target:o}=(null==(t=e.touches)?void 0:t[0])||e;let a;const s=we?tt(n,l):null==o.closest?void 0:o.closest(ve);if(s&&s!==je){const e=s.getBoundingClientRect(),t=l>e.top+e.height/2;a=je!==s[(t?"next":"previous")+"ElementSibling"],a&&(s.insertAdjacentElement(t?"afterEnd":"beforeBegin",je),Ke(Se.indexOf(s)+t))}_e.style.transform=`translate(${n-Ee}px, ${l-Ve}px)`,(Ge(l)||a)&&(Ze={})}function Ye(){g(ke,t,be.move,qe),g(ke,t,be.end,Ye),Xe(),_e.remove(),we&&ye.remove(),je.classList.remove("dragging-placeholder"),Te(De,Ue)}function Ke(e){const t=Ue<e?ze:-ze,n=Se.slice(...Ue<e?[Ue,e]:[e,Ue]);n.forEach(e=>{e.style.transition="none",e.style.transform=`translateY(${t}px)`}),setTimeout(()=>n.forEach(({style:e})=>{e.removeProperty("transition"),e.removeProperty("transform")})),Ue=e}function Je(){return Ie.scrollHeight>Ie.clientHeight}function Ge(e){const t=Je()&&Math.min(1,Math.max(0,e-Oe,We-e)/50);return!t&&Le&&Xe(),t&&!Le&&(Le=setInterval(Qe,16),xe.forEach(e=>g(Ce,n,e,et,!0))),Ae=t&&(e>Oe?1:-1)*(1+20*t|0),Me=p.now(),!!t}function Qe(){const e=p.now(),t=Ae*(e-Me)/16;Ie.scrollTop+=t,Me=e}function Xe(){xe.forEach(e=>g(ke,n,e,et,!0)),Le&&clearInterval(Le),Le=0}function et(e){e.stopPropagation()}function tt(e,n){var l;const o=`${e}:${n}`;return Ze[o]||(Ze[o]=null==(l=t.elementFromPoint(e,n))?void 0:l.closest(ve))}function nt(e){return je=e.target.closest(ve),je}const lt=["tabIndex"],ot={class:"script-icon hidden-xs"},at=["href","data-hotkey"],st=["src"],it={class:"script-name flex ml-1c"},rt=["textContent"],ct={class:"script-info flex ml-1c"},ut=["href","textContent","tabIndex"],dt=["textContent"],pt=["textContent"],ht={class:"script-buttons script-buttons-left"},mt=["href","data-hotkey","tabIndex"],gt=["data-hotkey","tabIndex"],ft=["data-hotkey","tabIndex"],vt=(0,$._)("span",{class:"sep"},null,-1),wt=["tabIndex"],bt=["href","tabIndex"],yt=["textContent","title"],xt={class:"script-buttons script-buttons-right"},Ct=["data-hotkey","tabIndex"],kt=["data-hotkey","tabIndex"],_t={props:["script","visible","viewTable","focused","hotkeys","showHotkeys"],components:{Icon:ge.Z,Tooltip:he.Z},data(){return{canRender:this.visible}},computed:{showRecycle:()=>"recycleBin"===U.route.paths[0],canUpdate(){return(0,x.TZ)(this.script)},author(){const e=this.script.meta.author;if(!e)return;const t=e.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:t&&t[2],name:t?t[1]:e}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||(0,x.iQ)(this.script.meta,"description")},updatedAt(){const{props:e,config:t}=this.script,n={};let l;if(t.removed?({lastModified:l}=e):l=e.lastUpdated||e.lastModified,l){const e=new Date(l);n.show=(0,x.mr)(Date.now()-l),t.removed?n.title=this.i18n("labelRemovedAt",e.toLocaleString()):n.title=this.i18n("labelLastUpdatedAt",e.toLocaleString())}return n},tabIndex(){return this.focused?0:-1},url(){return`${this.script.config.removed?"#recycleBin":v}/${this.script.props.id}`},urls(){return{home:[(0,x.ag)("buttonHome"),(0,x.t$)(this.script)],question:[(0,x.ag)("buttonSupport"),(0,x.b7)(this.script)]}},nameProps(){return this.viewTable?{is:"a",href:this.url,tabIndex:this.tabIndex,draggable:!1}:{is:"span"}}},watch:{visible(e){e&&(this.canRender=!0)},focused(e,n){const{$el:l}=this;if(e&&!n&&l){const e=l.getBoundingClientRect(),n=l.parentNode.getBoundingClientRect();let o=0;e.bottom>n.bottom-8?o+=e.bottom-n.bottom+8:e.top<n.top+8&&(o-=n.top-e.top+8),(0,L.u7)(t.activeElement)||l.focus({preventScroll:!0}),this.$emit("scrollDelta",o)}}},methods:{onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){L.$J.setContext("scriptFocus",!0)},onBlur(){L.$J.setContext("scriptFocus",!1)},toggleTip(e){(0,L.xr)(e.target)}}};var St=b(3744);const zt=(0,St.Z)(_t,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("icon"),i=(0,$.up)("tooltip");return(0,$.wg)(),(0,$.iD)("div",{class:(0,R.C_)(["script",{disabled:!n.script.config.enabled,removed:n.script.config.removed,error:n.script.error,focused:n.focused,hotkeys:n.focused&&n.showHotkeys}]),tabIndex:a.tabIndex,onFocus:t[5]||(t[5]=(...e)=>a.onFocus&&a.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>a.onBlur&&a.onBlur(...e))},[(0,$._)("div",ot,[(0,$._)("a",{href:a.url,"data-hotkey":n.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},[(0,$._)("img",{src:n.script.safeIcon},null,8,st)],8,at)]),(0,$._)("div",it,[n.script.config.removed?(0,$.kq)("",!0):((0,$.wg)(),(0,$.iD)("span",{key:0,class:"script-order",textContent:(0,R.zw)(n.script.props.position)},null,8,rt)),((0,$.wg)(),(0,$.j4)((0,$.LL)(a.nameProps.is),(0,$.dG)({class:"ellipsis"},a.nameProps),{default:(0,$.w5)(()=>[(0,$.Uk)((0,R.zw)(n.script.$cache.name),1)]),_:1},16))]),(0,$._)("div",ct,[o.canRender?((0,$.wg)(),(0,$.iD)($.HY,{key:0},[a.author?((0,$.wg)(),(0,$.j4)(i,{key:0,content:e.i18n("labelAuthor")+n.script.meta.author,class:"script-author ml-1c hidden-sm",align:"end"},{default:(0,$.w5)(()=>[(0,$.Wm)(s,{name:"author"}),a.author.email?((0,$.wg)(),(0,$.iD)("a",{key:0,class:"ellipsis",href:`mailto:${a.author.email}`,textContent:(0,R.zw)(a.author.name),tabIndex:a.tabIndex},null,8,ut)):((0,$.wg)(),(0,$.iD)("span",{key:1,class:"ellipsis",textContent:(0,R.zw)(a.author.name)},null,8,dt))]),_:1},8,["content"])):(0,$.kq)("",!0),(0,$._)("span",{class:"version ellipsis",textContent:(0,R.zw)(n.script.meta.version)},null,8,pt),n.script.config.removed?(0,$.kq)("",!0):((0,$.wg)(),(0,$.j4)(i,{key:1,class:"size hidden-sm",content:n.script.$cache.sizes,align:"end"},{default:(0,$.w5)(()=>[(0,$.Uk)((0,R.zw)(n.script.$cache.size),1)]),_:1},8,["content"])),(0,$.Wm)(i,{class:"updated hidden-sm ml-1c",content:a.updatedAt.title,align:"end"},{default:(0,$.w5)(()=>[(0,$.Uk)((0,R.zw)(a.updatedAt.show),1)]),_:1},8,["content"])],64)):(0,$.kq)("",!0)]),(0,$._)("div",ht,[o.canRender?((0,$.wg)(),(0,$.iD)($.HY,{key:0},[(0,$.Wm)(i,{content:e.i18n("buttonEdit"),align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",href:a.url,"data-hotkey":n.hotkeys.edit,tabIndex:a.tabIndex},[(0,$.Wm)(s,{name:"code"})],8,mt)]),_:1},8,["content"]),n.script.config.removed?(0,$.kq)("",!0):((0,$.wg)(),(0,$.iD)($.HY,{key:0},[(0,$.Wm)(i,{content:a.labelEnable,align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",onClick:t[0]||(t[0]=(...e)=>a.onToggle&&a.onToggle(...e)),"data-hotkey":n.hotkeys.toggle,tabIndex:a.tabIndex},[(0,$.Wm)(s,{name:"toggle-"+(n.script.config.enabled?"on":"off")},null,8,["name"])],8,gt)]),_:1},8,["content"]),(0,$.Wm)(i,{disabled:!a.canUpdate||n.script.checking,content:e.i18n("buttonCheckForUpdates"),align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",onClick:t[1]||(t[1]=(...e)=>a.onUpdate&&a.onUpdate(...e)),"data-hotkey":n.hotkeys.update,tabIndex:a.canUpdate?a.tabIndex:-1},[(0,$.Wm)(s,{name:"refresh"})],8,ft)]),_:1},8,["disabled","content"])],64)),vt,(0,$.Wm)(i,{disabled:!a.description,content:a.description,align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",tabIndex:a.description?a.tabIndex:-1,onClick:t[2]||(t[2]=(...e)=>a.toggleTip&&a.toggleTip(...e))},[(0,$.Wm)(s,{name:"info"})],8,wt)]),_:1},8,["disabled","content"]),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(a.urls,([e,t],n)=>((0,$.wg)(),(0,$.j4)(i,{key:n,disabled:!t,content:e,align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",target:"_blank",rel:"noopener noreferrer",href:t,tabIndex:t?a.tabIndex:-1},[(0,$.Wm)(s,{name:n},null,8,["name"])],8,bt)]),_:2},1032,["disabled","content"]))),128)),n.script.message?((0,$.wg)(),(0,$.iD)("div",{key:1,class:"script-message",textContent:(0,R.zw)(n.script.message),title:n.script.error},null,8,yt)):(0,$.kq)("",!0)],64)):(0,$.kq)("",!0)]),(0,$._)("div",xt,[o.canRender?((0,$.wg)(),(0,$.iD)($.HY,{key:0},[a.showRecycle||!n.script.config.removed?((0,$.wg)(),(0,$.j4)(i,{key:0,content:e.i18n("buttonRemove"),align:"end"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:(0,R.C_)(["btn-ghost",{"btn-danger":n.script.config.removed}]),onClick:t[3]||(t[3]=(...e)=>a.onRemove&&a.onRemove(...e)),"data-hotkey":n.hotkeys.remove,tabIndex:a.tabIndex},[(0,$.Wm)(s,{name:"trash"})],10,Ct)]),_:1},8,["content"])):(0,$.kq)("",!0),n.script.config.removed?((0,$.wg)(),(0,$.j4)(i,{key:1,content:e.i18n("buttonRestore"),placement:"left"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",onClick:t[4]||(t[4]=(...e)=>a.onRestore&&a.onRestore(...e)),"data-hotkey":n.hotkeys.restore,tabIndex:a.tabIndex},[(0,$.Wm)(s,{name:"undo"})],8,kt)]),_:1},8,["content"])):(0,$.kq)("",!0)],64)):(0,$.kq)("",!0)])],42,lt)}]]),Dt=zt,Ut={class:"edit frame flex flex-col fixed-full"},$t={class:"edit-header flex mr-1c"},Rt=["textContent","onClick"],Et={class:"edit-name text-center ellipsis flex-1"},Vt=["textContent"],jt={class:"edit-hint text-right ellipsis"},It=["textContent"],Tt={class:"edit-buttons"},Wt=["textContent","disabled","title"],Ot=["textContent","disabled"],Lt=["textContent"],At={class:"frame-block flex-auto pos-rel"},Mt={key:0,class:"errors my-1c"},Zt=["textContent"],Pt={class:"my-1"},Ht=["href","textContent"];var Nt=b(7462),Bt=b(1181),Ft=b(9727);const qt={class:"edit-settings",ref:"container"},Yt=["textContent"],Kt={class:"form-group condensed"},Jt=["disabled"],Gt=["textContent"],Qt=["textContent"],Xt=["value","disabled"],en=["textContent"],tn=["textContent"],nn=(0,$._)("td",null,[(0,$._)("code",null,"@run-at")],-1),ln=["textContent"],on=["disabled"],an=["textContent"],sn=(0,$._)("option",{value:"document-start"},"document-start",-1),rn=(0,$._)("option",{value:"document-body"},"document-body",-1),cn=(0,$._)("option",{value:"document-end"},"document-end",-1),un=(0,$._)("option",{value:"document-idle"},"document-idle",-1),dn=(0,$._)("td",null,[(0,$._)("code",null,[(0,$.Uk)("@"),(0,$._)("s",{style:{color:"var(--fill-6)"}},"no"),(0,$.Uk)("frames")])],-1),pn=["textContent"],hn=["disabled"],mn=["textContent"],gn=["textContent"],fn=["textContent"],vn=["textContent"],wn=["textContent"],bn=["onUpdate:modelValue","placeholder","disabled"],yn=["textContent"],xn=["textContent"],Cn=["textContent"],kn=["onUpdate:modelValue","disabled"],_n=["textContent"],Sn=["onUpdate:modelValue","rows","disabled"],zn=e=>{var t;return(null==(t=e.match(/^(.*?)(@[-a-z]+)(.*)/))?void 0:t.slice(1))||[e,"",""]},Dn={props:["active","settings","value","readOnly"],computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:e}=this;return{name:(0,de._M)(e,"meta.name"),homepageURL:(0,x.t$)(e),updateURL:(0,de._M)(e,"meta.updateURL")||(0,x.ag)("hintUseDownloadURL"),downloadURL:(0,de._M)(e,"meta.downloadURL")||(0,de._M)(e,"custom.lastInstallURL")}},textInputs:()=>[["name",(0,x.ag)("labelName")],["homepageURL",(0,x.ag)("labelHomepageURL")],["updateURL",(0,x.ag)("labelUpdateURL")],["downloadURL",(0,x.ag)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",...zn((0,x.ag)("labelInclude"))],["match","origMatch",...zn((0,x.ag)("labelMatch"))],["exclude","origExclude",...zn((0,x.ag)("labelExclude"))],["excludeMatch","origExcludeMatch",...zn((0,x.ag)("labelExcludeMatch"))]]},watch:{active(e){e&&this.$refs.container.querySelector("input").focus()}}},Un=(0,St.Z)(Dn,[["render",(e,t,n,l,o,a)=>((0,$.wg)(),(0,$.iD)("div",qt,[(0,$._)("h4",{textContent:(0,R.zw)(e.i18n("editLabelSettings"))},null,8,Yt),(0,$._)("div",Kt,[(0,$._)("label",null,[(0,$.wy)((0,$._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>a.config.shouldUpdate=e),disabled:n.readOnly},null,8,Jt),[[A.e8,a.config.shouldUpdate]]),(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelAllowUpdate"))},null,8,Gt)]),(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelNotifyThisUpdated"))},null,8,Qt),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)([[e.i18n("genericOn"),"1"],[e.i18n("genericOff"),"0"],[e.i18n("genericUseGlobal"),""]],([e,l])=>((0,$.wg)(),(0,$.iD)("label",{class:"ml-1",key:l},[(0,$.wy)((0,$._)("input",{type:"radio",value:l,"onUpdate:modelValue":t[1]||(t[1]=e=>a.config.notifyUpdates=e),disabled:n.readOnly},null,8,Xt),[[A.G2,a.config.notifyUpdates]]),(0,$.Uk)(),(0,$._)("span",{textContent:(0,R.zw)(e)},null,8,en)]))),128))]),(0,$._)("h4",{textContent:(0,R.zw)(e.i18n("editLabelMeta"))},null,8,tn),(0,$._)("table",null,[(0,$._)("tr",null,[nn,(0,$._)("td",null,[(0,$._)("p",{textContent:(0,R.zw)(e.i18n("labelRunAt"))},null,8,ln)]),(0,$._)("td",null,[(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.custom.runAt=e),disabled:n.readOnly},[(0,$._)("option",{value:"",textContent:(0,R.zw)(e.i18n("labelRunAtDefault"))},null,8,an),sn,rn,cn,un],8,on),[[A.bM,a.custom.runAt]])])]),(0,$._)("tr",null,[dn,(0,$._)("td",null,[(0,$._)("p",{textContent:(0,R.zw)(e.i18n("labelNoFrames"))},null,8,pn)]),(0,$._)("td",null,[(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.custom.noframes=e),disabled:n.readOnly},[(0,$._)("option",{value:"",textContent:(0,R.zw)(e.i18n("labelRunAtDefault"))},null,8,mn),(0,$._)("option",{value:"0",textContent:(0,R.zw)(e.i18n("genericOn"))},null,8,gn),(0,$._)("option",{value:"1",textContent:(0,R.zw)(e.i18n("genericOff"))},null,8,fn)],8,hn),[[A.bM,a.custom.noframes]])])]),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(a.textInputs,([e,t])=>((0,$.wg)(),(0,$.iD)("tr",{key:e},[(0,$._)("td",null,[(0,$._)("code",{textContent:(0,R.zw)(`@${e}`)},null,8,vn)]),(0,$._)("td",null,[(0,$._)("p",{textContent:(0,R.zw)(t)},null,8,wn)]),(0,$._)("td",null,[(0,$.wy)((0,$._)("input",{type:"text","onUpdate:modelValue":t=>a.custom[e]=t,placeholder:a.placeholders[e],disabled:n.readOnly},null,8,bn),[[A.nr,a.custom[e]]])])]))),128))]),(0,$._)("table",null,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(a.textAreas,([t,l,o,s,i])=>((0,$.wg)(),(0,$.iD)("tr",{key:t},[(0,$._)("td",null,[(0,$._)("p",null,[(0,$._)("span",{textContent:(0,R.zw)(o)},null,8,yn),(0,$._)("code",{textContent:(0,R.zw)(s)},null,8,xn),(0,$._)("span",{textContent:(0,R.zw)(i)},null,8,Cn)]),(0,$._)("label",null,[(0,$.wy)((0,$._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.custom[l]=e,disabled:n.readOnly},null,8,kn),[[A.e8,a.custom[l]]]),(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelKeepOriginal"))},null,8,_n)])]),(0,$._)("td",null,[(0,$.wy)((0,$._)("textarea",{"onUpdate:modelValue":e=>a.custom[t]=e,spellcheck:"false",rows:e.calcRows(a.custom[t]),disabled:n.readOnly},null,8,Sn),[[A.nr,a.custom[t]]])])]))),128))])],512))]]),$n=Un,Rn={class:"edit-values",ref:"container"},En={class:"mb-1"},Vn={key:1,class:"inline-block ml-2"},jn=["disabled"],In=["textContent"],Tn=["textContent"],Wn=["disabled"],On={class:"ml-2 mr-2c"},Ln=(0,$._)("kbd",null,"PageUp",-1),An=(0,$._)("kbd",null,"PageDown",-1),Mn=(0,$._)("kbd",null,"\u2191",-1),Zn=(0,$._)("kbd",null,"\u2193",-1),Pn=(0,$._)("kbd",null,"Tab",-1),Hn=(0,$._)("kbd",null,"Shift-Tab",-1),Nn=(0,$._)("kbd",null,"Enter",-1),Bn=(0,$._)("kbd",null,"Ctrl-Del",-1),Fn=["textContent"],qn=["onKeydown","onClick"],Yn={class:"ellipsis"},Kn=["textContent"],Jn=["textContent"],Gn=["textContent"],Qn=["onClick"],Xn=["textContent"],el=["onClick"],tl=["textContent"],nl=["textContent"],ll=["textContent"],ol=["textContent"],al={key:3,class:"edit-values-panel flex flex-col mb-1c"},sl={class:"control"},il=["textContent"],rl=["textContent","onClick","title","disabled"],cl=["textContent"],ul=["textContent"],dl=["readOnly"],pl=["textContent"];var hl=b(432);let ml;const gl={error:"",dirty:!1},fl=e=>e.length>1024?e.slice(0,1024):e,vl=e=>{try{return JSON.stringify(JSON.parse(e),null,"  ")}catch(t){return e}},wl=(e,t)=>{e.page=Math.max(1,Math.min(e.totalPages,e.page+t))},bl={condition:"!edit"},yl={props:["active","script","readOnly"],components:{Icon:ge.Z,VmCode:Bt.default},data:()=>({current:null,loading:!0,page:null,values:null,trash:null}),computed:{keys(){return c.keys(this.values||{}).sort()},totalPages(){return Math.ceil(this.keys.length/25)},pageKeys(){const e=25*(this.page-1);return this.keys.slice(e,e+25)}},mounted(){this.$refs.container.addEventListener("focusin",e=>{L.$J.setContext("edit","selectionEnd"in e.target)})},watch:{active(e){const t=this.script.props.id;var n,l;if(e?(null==(n=this.current?this.cm:ml)||n.focus(),(0,x.gj)("GetValueStore",t,void 0,this.sender={tab:{id:Math.random()-2},frameId:0}).then(e=>{const t=!this.values;this.setData(e)&&t&&this.keys.length&&this.autofocus(!0),this.loading=!1}),this.disposeList=[L.$J.register("pageup",()=>wl(this,-1),bl),L.$J.register("pagedown",()=>wl(this,1),bl)]):null==(l=this.disposeList)||l.forEach(e=>e()),e){const e=this.onStorageChanged,n=browser.extension.getBackgroundPage();this[hl.vy]=browser.runtime.connect({name:hl.vy+JSON.stringify({cfg:{value:t},id:null==n?void 0:n[hl.vy](e),tabId:this.sender.tab.id})}),n||this[hl.vy].onMessage.addListener(e)}else{var o;null==(o=this[hl.vy])||o.disconnect(),this[hl.vy]=null}},current(e,n){if(e)ml=t.activeElement,this.$nextTick(()=>{const t=this.$refs,l=t.value,{cm:o}=l;if(this.cm=o,n&&l.updateValue(e.value),e.isNew){const e=t.key;e.setSelectionRange(0,0),e.focus()}else o.setCursor(0,0),o.focus()});else if(n){var l;null==(l=ml)||l.focus()}},page(){ml=null,this.autofocus()}},methods:{autofocus(e){this.$nextTick(()=>{this.$refs.editAll[e?"click":"focus"]()})},getLength(e,t){const n=e.length+(this.values[e]||t).length-1;return n<1e4?n:(0,x.aj)(n)},getValue(e,t,n){let l=this.values[e]||n;const o=l[0];return l=l.slice(1),"s"===o?l=JSON.stringify(l):t||(l=vl(l)),t?fl(l):l},getValueAll(){return`{\n  ${this.keys.map(e=>`${JSON.stringify(e)}: ${this.getValue(e)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`},setData(e={}){if(!(0,de.vZ)(this.values,e))return this.values=e,this.page=Math.min(this.page,this.totalPages)||1,this.calcSize(),!0},calcSize(){U.storageSize=this.keys.reduce((e,t)=>e+t.length+4+this.values[t].length+2,2)},updateValue({key:e,jsonValue:t,rawValue:n=(0,x.bd)(t)||""}){const{id:l}=this.script.props;return(0,x.gj)("UpdateValue",{id:l,key:e,raw:n},void 0,this.sender).then(()=>{n?this.values[e]=n:delete this.values[e],this.calcSize()})},onNew(){this.current=(0,Nt.Z)({isNew:!0,key:"",value:""},gl)},async onRemove(e){var t;this.updateValue({key:e}),(this.trash||(this.trash={}))[e+Math.random()]={key:e,rawValue:this.values[e],cut:this.getValue(e,!0),len:this.getLength(e)},(null==(t=this.current)?void 0:t.key)===e&&(this.current=null)},onRestore(e){const{trash:t}=this,{key:n,rawValue:l}=t[e];delete t[e],(0,x.xb)(t)&&(this.trash=null),this.updateValue({key:n,rawValue:l})},onEdit(e){this.current=(0,Nt.Z)({key:e,value:this.getValue(e)},gl)},onEditAll(){this.current=(0,Nt.Z)({isAll:!0,value:this.getValueAll()},gl)},async onSave(e){const{cm:t,current:n}=this;if(n.jsonPaused&&(n.jsonPaused=!1,this.onChange()),n.error){const e=n.errorPos;return t.setSelection(e,{line:e.line,ch:e.ch+1}),t.focus(),void(0,S.PV)({text:n.error})}1===e?(t.markClean(),n.dirty=!1):this.current=null,n.isAll?await(0,x.gj)("SetValueStores",{[this.script.props.id]:g(de.Xw,n.jsonValue,e=>(0,x.bd)(e)||"")}):await this.updateValue(n)},onCancel(){const e=this.current;if(e.dirty){const t=`${e.key} ${1e9*Math.random()|0}`,n=this.cm.getValue(),l=(0,x.bd)(n);(this.trash||(this.trash={}))[t]={key:t,rawValue:l,cut:fl(n),len:this.getLength(t,l)}}this.current=null},onChange(e){const{current:t}=this;if(t.dirty=e,t.error=null,t.jsonPaused)return;const{cm:n}=this,l=p.now();try{const e=n.getValue();t.jsonValue=e.trim()?JSON.parse(e):void 0}catch(e){const l=/(position\s+)(\d+)|$/,o=n.posFromIndex(+`${e}`.match(l)[2]||0);t.error=`${e}`.replace(l,`$1${o.line+1}:${o.ch+1}`),t.errorPos=o,t.jsonValue=void 0}t.jsonPaused=p.now()-l>10},onStorageChanged(e){const t=c.values(e)[0].newValue;if(t){const{current:e}=this,n=null==e?void 0:e.key,l=e&&(e.isAll?this.getValueAll:this.getValue);if(this.setData(t instanceof c?t:(0,de.p$)(t)),e){const t=l(n);this.cm.getValue()===t?(e.isNew=!1,e.dirty=!1):e.dirty||(e.value=t,this.onChange())}}else this.setData(t)},onUpDown(e){(0,L.nk)(("ArrowDown"===e.key?1:e.target!==this.$refs.editAll&&-1)||0)}}},xl=(0,St.Z)(yl,[["render",(e,t)=>{const n=(0,$.up)("icon"),l=(0,$.up)("vm-code");return(0,$.wg)(),(0,$.iD)("div",Rn,[(0,$._)("div",En,[e.readOnly?(0,$.kq)("",!0):((0,$.wg)(),(0,$.iD)("button",{key:0,onClick:t[0]||(t[0]=(...t)=>e.onNew&&e.onNew(...t))},"+")),e.totalPages>1?((0,$.wg)(),(0,$.iD)("div",Vn,[(0,$._)("button",{disabled:1===e.page,onClick:t[1]||(t[1]=t=>e.page-=1)},"\u2190",8,jn),(0,$._)("span",{class:"ml-1",textContent:(0,R.zw)(e.page)},null,8,In),(0,$.Uk)(" / "),(0,$._)("span",{class:"mr-1",textContent:(0,R.zw)(e.totalPages)},null,8,Tn),(0,$._)("button",{disabled:e.page>=e.totalPages,onClick:t[2]||(t[2]=t=>e.page+=1)},"\u2192",8,Wn)])):(0,$.kq)("",!0),(0,$._)("span",On,[(0,$._)("span",null,[e.totalPages>1?((0,$.wg)(),(0,$.iD)($.HY,{key:0},[Ln,(0,$.Uk)(", "),An,(0,$.Uk)(", ")],64)):(0,$.kq)("",!0),Mn,(0,$.Uk)(", "),Zn,(0,$.Uk)(", "),Pn,(0,$.Uk)(", "),Hn,(0,$.Uk)(", ")]),(0,$._)("span",null,[Nn,(0,$.Uk)(": "+(0,R.zw)(e.i18n("buttonEdit"))+",",1)]),(0,$._)("span",null,[Bn,(0,$.Uk)(": "+(0,R.zw)(e.i18n("buttonRemove")),1)])])]),(0,$._)("div",{class:"edit-values-table main",onKeydown:[t[4]||(t[4]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[5]||(t[5]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[(0,$._)("a",{ref:"editAll",class:"edit-values-row flex",onClick:t[3]||(t[3]=(...t)=>e.onEditAll&&e.onEditAll(...t)),tabindex:"0",textContent:(0,R.zw)(e.i18n("editValueAllHint"))},null,8,Fn),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.pageKeys,t=>((0,$.wg)(),(0,$.iD)("div",{key:t,class:"edit-values-row flex",onKeydown:(0,A.D2)((0,A.iM)(n=>e.onRemove(t),["ctrl","exact"]),["delete"]),onClick:n=>e.onEdit(t)},[(0,$._)("div",Yn,[(0,$._)("a",{textContent:(0,R.zw)(t),tabindex:"0"},null,8,Kn)]),(0,$._)("div",{class:"ellipsis flex-auto",textContent:(0,R.zw)(e.getValue(t,!0))},null,8,Jn),(0,$._)("pre",{textContent:(0,R.zw)(e.getLength(t))},null,8,Gn),(0,$._)("div",{class:"del",onClick:(0,A.iM)(n=>e.onRemove(t),["stop"])},[(0,$.Wm)(n,{name:"trash"})],8,Qn)],40,qn))),128))],32),e.trash?((0,$.wg)(),(0,$.iD)("h3",{key:0,textContent:(0,R.zw)(e.i18n("headerRecycleBin"))},null,8,Xn)):(0,$.kq)("",!0),e.trash?((0,$.wg)(),(0,$.iD)("div",{key:1,class:"edit-values-table trash",onKeydown:[t[6]||(t[6]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[7]||(t[7]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.trash,({key:t,cut:n,len:l},o)=>((0,$.wg)(),(0,$.iD)("div",{key:o,class:"edit-values-row flex",onClick:t=>e.onRestore(o)},[(0,$._)("a",{class:"ellipsis",textContent:(0,R.zw)(t),tabindex:"0"},null,8,tl),(0,$._)("s",{class:"ellipsis flex-auto",textContent:(0,R.zw)(n)},null,8,nl),(0,$._)("pre",{textContent:(0,R.zw)(l)},null,8,ll)],8,el))),128))],32)):(0,$.kq)("",!0),e.loading||e.keys.length?(0,$.kq)("",!0):((0,$.wg)(),(0,$.iD)("div",{key:2,class:"edit-values-empty mt-1",textContent:(0,R.zw)(e.i18n("noValues"))},null,8,ol)),e.current?((0,$.wg)(),(0,$.iD)("div",al,[(0,$._)("div",sl,[(0,$._)("h4",{textContent:(0,R.zw)(e.current.isAll?e.i18n("labelEditValueAll"):e.i18n("labelEditValue"))},null,8,il),(0,$._)("div",null,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)([e.i18n("buttonOK"),e.i18n("buttonApply")],(t,n)=>((0,$.wg)(),(0,$.iD)("button",{key:t,textContent:(0,R.zw)(t),onClick:t=>e.onSave(n),class:(0,R.C_)({"has-error":e.current.error,"save-beacon":!n}),title:e.current.error,disabled:e.current.error||!e.current.dirty},null,10,rl))),128)),(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonCancel")),onClick:t[8]||(t[8]=(...t)=>e.onCancel&&e.onCancel(...t))},null,8,cl)])]),(0,$.wy)((0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("valueLabelKey"))},null,8,ul),(0,$.wy)((0,$._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.current.key=t),readOnly:!e.current.isNew||e.readOnly,ref:"key",spellcheck:"false",onKeydown:t[10]||(t[10]=(0,A.D2)((0,A.iM)((...t)=>e.onCancel&&e.onCancel(...t),["exact","stop"]),["esc"]))},null,40,dl),[[A.nr,e.current.key]])],512),[[A.F8,!e.current.isAll]]),(0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.current.isAll?e.i18n("valueLabelValueAll"):e.i18n("valueLabelValue"))},null,8,pl),(0,$.Wm)(l,{value:e.current.value,ref:"value",class:"h-100 mt-1",mode:"application/json",readOnly:e.readOnly,onCodeDirty:e.onChange,commands:{close:e.onCancel,save:e.onSave}},null,8,["value","readOnly","onCodeDirty","commands"])])])):(0,$.kq)("",!0)],512)}]]),Cl={class:"edit-help mb-2c"},kl=["innerHTML"],_l=(0,$._)("a",{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"},"violentmonkey.github.io/api/",-1),Sl={class:"keyboard"},zl=["textContent"],Dl=["textContent"],Ul=["textContent"],$l={props:["hotkeys"]},Rl=(0,St.Z)($l,[["render",(e,t,n,l,o,a)=>((0,$.wg)(),(0,$.iD)("div",Cl,[(0,$._)("div",null,[(0,$._)("h3",{innerHTML:e.i18n("editHelpDocumention")},null,8,kl),_l]),(0,$._)("div",Sl,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("editHelpKeyboard"))},null,8,zl),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(n.hotkeys,([e,t])=>((0,$.wg)(),(0,$.iD)("dl",{key:e},[(0,$._)("dt",{class:"monospace-font",textContent:(0,R.zw)(e)},null,8,Dl),(0,$._)("dd",{textContent:(0,R.zw)(t)},null,8,Ul)]))),128))])]))]]),El={name:"",runAt:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},Vl=["include","match","exclude","excludeMatch"],jl=e=>e?`${e.join("\n")}${e.length?"\n":""}`:"",Il=e=>e.split("\n").map(e=>e.trim()).filter(i);let Tl,Wl;const Ol=async e=>{_.Z.get("editorWindow")&&(e||(e=await(null==x.oy?void 0:x.oy.getCurrent())||{}),"normal"===e.state&&_.Z.set("editorWindowPos",(0,de.zr)(e,["left","top","width","height"])))},Ll=({id:e,tabs:t})=>{if(1===t.length){const{onBoundsChanged:t}=d.windows;t?t.addListener(t=>{t.id===e&&Ol(t)}):(n.addEventListener("resize",(0,x.Ds)(Ol,100)),Wl=!0)}};let Al;const Ml=(e,t)=>e<t?-1:e>t,Zl={props:["initial","initialCode","readOnly"],components:{VmCode:Bt.default,VmSettings:$n,VmValues:xl,VmExternals:Ft.Z,VmHelp:Rl},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null,errors:null,urlMatching:"https://violentmonkey.github.io/api/matching/"}},computed:{navItems(){const{meta:e,props:t}=this.script||{},n=(null==e?void 0:e.require.length)&&"@require",l=!(0,x.xb)(null==e?void 0:e.resources)&&"@resource",o=U.storageSize;return(0,Nt.Z)({code:(0,x.ag)("editNavCode"),settings:(0,x.ag)("editNavSettings")},(null==t?void 0:t.id)&&{values:(0,x.ag)("editNavValues")+(o?` (${(0,x.aj)(o)})`:"")},(n||l)&&{externals:g(x.Hv,[n,l],"/")},{help:"?"})},scriptName(){const{script:e}=this,t=(null==e?void 0:e.meta)&&(0,x.pV)(e);return U.title=t,t}},watch:{nav(e){L.$J.setContext("tabCode","code"===e),"code"===e&&this.$nextTick(()=>{this.$refs.code.cm.focus()})},canSave(e){this.toggleUnloadSentry(e),L.$J.setContext("canSave",e)},"initial.error"(e){e&&(0,S.PV)({text:`${this.initial.message}\n\n${e}`})}},created(){var t;this.script=this.initial,this.toggleUnloadSentry=(0,D.Q$)(null,()=>{this.$refs.code.cm.focus()}),_.Z.get("editorWindow")&&1===e.history.length&&(null==(t=browser.windows)||t.getCurrent({populate:!0}).then(Ll))},async mounted(){var e;U.storageSize=0,this.nav="code";const{custom:t,config:n}=this.script,{noframes:l}=t;this.settings={config:{notifyUpdates:`${null!=(e=n.notifyUpdates)?e:""}`,shouldUpdate:i(n.shouldUpdate)},custom:(0,Nt.Z)({},El,(0,de.zr)(t,c.keys(El)),(0,de.zr)(t,Vl,jl),{runAt:t.runAt||"",noframes:null==l?"":+l})},Tl=(0,de.p$)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var o;const e=c.values(this.navItems),t=[["Alt-PageUp",` ${e.join(" < ")}`],["Alt-PageDown",` ${e.join(" > ")}`],...c.entries(this.$refs.code.expandKeyMap()).sort((e,t)=>Ml(e[1],t[1])||Ml(e[0],t[0]))];Al=null==(o=t.find(([,e])=>"save"===e))?void 0:o[0],Al||(Al="Ctrl-S",t.unshift([Al,"save"])),this.hotkeys=t}this.disposeList=[L.$J.register("a-pageup",this.switchPrevPanel),L.$J.register("a-pagedown",this.switchNextPanel),L.$J.register(Al.replace(/(?:Ctrl|Cmd)-/i,"ctrlcmd-"),this.save),L.$J.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})],this.code=this.initialCode},methods:{async save(){if(!this.canSave)return;Wl&&Ol();const{settings:e}=this,{config:t,custom:n}=e,{notifyUpdates:l}=t,{noframes:o}=n;try{var a,s,i;const r=this.$refs.code,u=null==(a=this.script)||null==(s=a.props)?void 0:s.id,d=await(0,x.gj)("ParseScript",{id:u,code:r.getRealContent(),config:(0,Nt.Z)({},t,{notifyUpdates:l?+l:null}),custom:(0,Nt.Z)({},(0,de.zr)(n,c.keys(El)),(0,de.zr)(n,Vl,Il),{noframes:o?+o:null}),isNew:!u,message:""}),p=null==d||null==(i=d.where)?void 0:i.id;Tl=(0,de.p$)(e),r.cm.markClean(),this.codeDirty=!1,this.canSave=!1,this.errors=d.errors,p&&(this.script=d.update,u||history.replaceState(null,this.scriptName,`${v}/${p}`))}catch(e){(0,S.GW)(`${e.message||e}`,{cancel:!1})}},close(e){var n;e&&"code"!==this.nav?this.nav="code":(this.$emit("close"),f&&(null==(n=t.activeElement)||n.blur()))},saveClose(){this.save().then(this.close)},switchPanel(e){const t=c.keys(this.navItems);this.nav=t[(t.indexOf(this.nav)+e+t.length)%t.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!(0,de.vZ)(this.settings,Tl)}},beforeUnmount(){var e;U.title=null,this.toggleUnloadSentry(!1),null==(e=this.disposeList)||e.forEach(e=>{e()})}},Pl=(0,St.Z)(Zl,[["render",(e,t)=>{var n,l;const o=(0,$.up)("vm-code"),a=(0,$.up)("vm-settings"),s=(0,$.up)("vm-values"),i=(0,$.up)("vm-externals"),r=(0,$.up)("vm-help");return(0,$.wg)(),(0,$.iD)("div",Ut,[(0,$._)("div",$t,[(0,$._)("nav",null,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.navItems,(t,n)=>((0,$.wg)(),(0,$.iD)("div",{key:n,class:(0,R.C_)(["edit-nav-item",{active:e.nav===n}]),textContent:(0,R.zw)(t),onClick:t=>e.nav=n},null,10,Rt))),128))]),(0,$._)("div",Et,[null!=(n=e.script)&&null!=(l=n.config)&&l.removed?((0,$.wg)(),(0,$.iD)("span",{key:0,class:"subtle",textContent:(0,R.zw)(e.i18n("headerRecycleBin")+" / ")},null,8,Vt)):(0,$.kq)("",!0),(0,$.Uk)(" "+(0,R.zw)(e.scriptName),1)]),(0,$._)("div",jt,[(0,$._)("a",{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("editHowToHint"))},null,8,It)]),(0,$._)("div",Tt,[(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonSave")),onClick:t[0]||(t[0]=(...t)=>e.save&&e.save(...t)),disabled:!e.canSave,class:(0,R.C_)({"has-error":e.errors}),title:e.errors},null,10,Wt),(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonSaveClose")),onClick:t[1]||(t[1]=(...t)=>e.saveClose&&e.saveClose(...t)),disabled:!e.canSave},null,8,Ot),(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonClose")),onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t))},null,8,Lt)])]),(0,$._)("div",At,[(0,$.wy)((0,$.Wm)(o,{class:"abs-full",value:e.code,readOnly:e.readOnly,ref:"code",active:"code"===e.nav,commands:e.commands,onCodeDirty:t[3]||(t[3]=t=>e.codeDirty=t)},null,8,["value","readOnly","active","commands"]),[[A.F8,"code"===e.nav]]),(0,$.wy)((0,$.Wm)(a,{class:"abs-full edit-body",readOnly:e.readOnly,active:"settings"===e.nav,settings:e.settings,value:e.script},null,8,["readOnly","active","settings","value"]),[[A.F8,"settings"===e.nav]]),(0,$.wy)((0,$.Wm)(s,{class:"abs-full edit-body",readOnly:e.readOnly,active:"values"===e.nav,script:e.script},null,8,["readOnly","active","script"]),[[A.F8,"values"===e.nav]]),"externals"===e.nav?((0,$.wg)(),(0,$.j4)(i,{key:0,class:"abs-full",value:e.script},null,8,["value"])):(0,$.kq)("",!0),(0,$.wy)((0,$.Wm)(r,{class:"abs-full edit-body",hotkeys:e.hotkeys},null,8,["hotkeys"]),[[A.F8,"help"===e.nav]])]),e.errors?((0,$.wg)(),(0,$.iD)("div",Mt,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.errors,e=>((0,$.wg)(),(0,$.iD)("p",{key:e,textContent:(0,R.zw)(e),class:"text-red"},null,8,Zt))),128)),(0,$._)("p",Pt,[(0,$._)("a",{href:e.urlMatching,target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.urlMatching)},null,8,Ht)])])):(0,$.kq)("",!0)])}]]),Hl={sort:{exec:{title:(0,x.ag)("filterExecutionOrder")},alpha:{title:(0,x.ag)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:e}},{$cache:{lowerName:t}})=>e<t?-1:e>t},update:{title:(0,x.ag)("filterLastUpdateOrder"),compare:({props:{lastUpdated:e}},{props:{lastUpdated:t}})=>(+t||0)-(+e||0)},size:{title:(0,x.ag)("filterSize"),compare:(e,t)=>t.$cache.sizeNum-e.$cache.sizeNum}}},Nl=(0,z.qj)({searchScope:null,showEnabledFirst:null,showOrder:null,viewSingleColumn:null,viewTable:null,sort:null});g(de.SE,Nl,e=>{(0,ue.Z)(`filters.${e}`,t=>{Nl[e]=t,"sort"!==e||Hl.sort[t]||(Nl[e]=c.keys(Hl.sort)[0])})});const Bl="tabScripts",Fl="tabScripts && !inputFocus",ql=`${Fl} && selectedScript && !showRecycle`,Yl=`${Fl} && selectedScript && showRecycle`,Kl=`${Fl} && !buttonFocus`,Jl=`${Fl} && selectedScript && showHotkeys`,Gl={edit:"e",toggle:"space",update:"r",restore:"r",remove:"x"},Ql=(e,t)=>t.map(([t,n,l])=>L.$J.register(t,e,{condition:n,caseSensitive:l}));let Xl=0,eo=[],to=[];const no=(0,z.iH)(),lo=(0,z.iH)(),oo=(0,z.qj)({focusedIndex:-1,menuNewActive:!1,showHotkeys:!1,canRenderScripts:!U.route.paths[1],search:"",searchError:null,sortedScripts:[],filteredScripts:[],script:null,code:"",numColumns:0,batchRender:{limit:Xl}}),ao=(0,$.Fl)(()=>"recycleBin"===U.route.paths[0]),so=(0,$.Fl)(()=>!ao.value&&"exec"===Nl.sort),io=(0,$.Fl)(()=>{var e;return null==(e=Hl.sort[Nl.sort])?void 0:e.compare}),ro=(0,$.Fl)(()=>oo.filteredScripts[oo.focusedIndex]),co=(0,$.Fl)(()=>U.loading||(oo.search?oo.sortedScripts.find(e=>!1!==e.$cache.show):oo.sortedScripts.length)?null:(0,x.ag)("labelNoSearchScripts")),uo=(0,$.Fl)(()=>oo.search&&["code","all"].includes(Nl.searchScope)&&U.scripts.filter(e=>null==e.$cache.code).map(e=>e.props.id)),po=(0,x.Ds)(fo,100),ho=(0,x.Ds)(So);function mo(){!ao.value&&U.needRefresh&&(U.scripts=U.scripts.filter(e=>!e.config.removed),U.needRefresh=!1),oo.focusedIndex=-1,fo()}async function go(){const e=uo.value;null!=e&&e.length&&await Uo(e),fo(),_o()}function fo(){const e=[...ao.value?U.removedScripts:U.scripts],t=oo.search?zo(e):e.length,n=io.value;var l;n&&e.sort((l=n,Nl.showEnabledFirst?(e,t)=>t.config.enabled-e.config.enabled||l(e,t):l)),oo.sortedScripts=e,oo.filteredScripts=oo.search?e.filter(({$cache:e})=>e.show):e,Eo(oo.focusedIndex),!Xl||t<Xl?So():ho()}function vo(){(0,x.gj)("CheckUpdate")}async function wo(){try{var e;let t=await(0,S.GW)((0,x.ag)("hintInputURL"),{input:"",ok:{type:"submit"}});t=null==(e=t)?void 0:e.trim(),t&&(t.includes("://")||(t=`https://${t}`),new URL(t),await(0,x.gj)("ConfirmInstall",{url:t}))}catch(e){e&&(0,S.PV)({text:e})}}async function bo(e,t){if(e===t)return;const n=oo.filteredScripts,l=U.scripts,o=n[e],a=l.indexOf(o),s=l.indexOf(n[t]),{id:i}=o.props;await(0,x.gj)("Move",{id:i,offset:s-a})&&(l.splice(a,1),l.splice(s,0,o),l.forEach((e,t)=>{e.props.position=t+1}),fo())}function yo(e){_.Z.set("filters.sort",e.target.value)}function xo(e){oo.search&&Do(),_.Z.set("filters.searchScope",e.target.value)}function Co(e){oo.menuNewActive=e}function ko(e){const t=[ao.value?"recycleBin":"scripts",e].filter(i).join("/");e||t!==(0,D.Qs)().pathname?(0,D.pV)(t):n.history.back()}async function _o(){const[e,t,n]=U.route.paths;if("_new"===t){const{script:e,code:t}=await(0,x.gj)("NewScript",n);oo.script=e,oo.code=t}else{const n=t&&+t||null,l=n&&(ao.value?U.removedScripts:U.scripts).find(e=>e.props.id===n);l?oo.code=await(0,x.gj)("GetScriptCode",t):(oo.canRenderScripts||(lr(),oo.canRenderScripts=!0),ho(),t&&(0,D.pV)(e,!0)),oo.script=l}}async function So(){if(!oo.canRenderScripts)return;const{length:e}=oo.sortedScripts;let t=9;const n=(0,z.qj)({limit:t});oo.batchRender=n;const l=p.now();for(;t<e&&n===oo.batchRender;){if(Xl&&oo.search)for(let n=0;n<Xl&&t<e;t+=1)n+=oo.sortedScripts[t].$cache.show?1:0;else t+=Xl||1;n.limit=t,await new u(e=>(0,$.Y3)(e)),!Xl&&p.now()-l>=100&&(Xl=2*t),Xl&&t<e&&await(0,x.dL)()}}function zo(e){let t,n=0;const[,l=oo.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),o="i"]=oo.search.match(/^\/(.+?)\/(\w*)$|$/),a=Nl.searchScope,s="name"===a||"all"===a,i="code"===a||"all"===a;try{t=l&&new RegExp(l,o),e.forEach(({$cache:e})=>{e.show=!l||s&&t.test(e.search)||i&&t.test(e.code),n+=e.show}),oo.searchError=null}catch(e){oo.searchError=e.message}return n}async function Do(){const e=uo.value;null!=e&&e.length&&await Uo(e),po()}async function Uo(e){const t=await(0,x.gj)("GetScriptCode",e);U.scripts.forEach(({$cache:e,props:{id:n}})=>{n in t&&(e.code=t[n])})}async function $o(){await(0,S.GW)((0,x.ag)("buttonEmptyRecycleBin"))&&((0,x.gj)("CheckRemove",{force:!0}),U.removedScripts=[])}function Ro(){const e=Nl.viewTable?eo:to;oo.numColumns=Nl.viewSingleColumn?1:e.findIndex(e=>n.innerWidth<e)+1||e.length+1}function Eo(e){e=Math.min(e,oo.filteredScripts.length-1),(e=Math.max(e,-1))!==oo.focusedIndex&&(oo.focusedIndex=e)}function Vo(e,t){return(0,x.gj)("MarkRemoved",{id:e.props.id,removed:t})}function jo(e){e.config.removed?(0,x.gj)("RemoveScripts",[e.props.id]):Vo(e,1)}async function Io(e){try{await Vo(e,0)}catch(t){(0,S.GW)(`${t.message||t}\n\n@namespace ${e.meta.namespace}\n@name ${e.meta.name}`,{cancel:!1})}}function To(e){(0,x.gj)("UpdateScriptInfo",{id:e.props.id,config:{enabled:e.config.enabled?0:1}})}function Wo(e){(0,x.gj)("CheckUpdate",e.props.id)}function Oo(e){if(!e)return;const t=lo.value;t.scroll({top:t.scrollTop+e,behavior:"smooth"})}function Lo(){const e=()=>{var e;L.$J.setContext("buttonFocus",(null==(e=t.activeElement)?void 0:e.tabIndex)>=0)};t.addEventListener("focus",e,!0);const n=[()=>t.removeEventListener("focus",e,!0),...f?[L.$J.register("tab",()=>{(0,L.nk)(1)}),L.$J.register("s-tab",()=>{(0,L.nk)(-1)})]:[],...Ql(()=>{var e;null==(e=no.value)||e.focus()},[["ctrlcmd-f",Bl],["/",Fl,!0]]),...Ql(()=>{var e;null==(e=no.value)||e.blur()},[["enter","tabScripts && inputFocus"]]),...Ql(()=>{oo.showHotkeys=!1},[["escape",Jl],["q",Jl,!0]]),...Ql(()=>{let e=oo.focusedIndex;e<0?e=0:e+=oo.numColumns,e<oo.filteredScripts.length&&Eo(e)},[["ctrlcmd-down",Bl],["down",Bl],["j",Fl,!0]]),...Ql(()=>{const e=oo.focusedIndex-oo.numColumns;e>=0&&Eo(e)},[["ctrlcmd-up",Bl],["up",Bl],["k",Fl,!0]]),...Ql(()=>{Eo(oo.focusedIndex-1)},[["ctrlcmd-left",Bl],["left",Fl],["h",Fl,!0]]),...Ql(()=>{Eo(oo.focusedIndex+1)},[["ctrlcmd-right",Bl],["right",Fl],["l",Fl,!0]]),...Ql(()=>{Eo(0)},[["ctrlcmd-home",Bl],["g g",Fl,!0]]),...Ql(()=>{Eo(oo.filteredScripts.length-1)},[["ctrlcmd-end",Bl],["G",Fl,!0]]),...Ql(()=>{ko(ro.value.props.id)},[[Gl.edit,ql,!0],["enter",Kl]]),...Ql(()=>{jo(ro.value)},[["delete",ql],[Gl.remove,ql,!0]]),...Ql(()=>{Wo(ro.value)},[[Gl.update,ql,!0]]),...Ql(()=>{To(ro.value)},[[Gl.toggle,ql,!0]]),...Ql(()=>{Io(ro.value)},[[Gl.restore,Yl,!0]]),...Ql(()=>{oo.showHotkeys=!oo.showHotkeys},[["?",Fl,!0]])];return()=>n.forEach(e=>{e()})}const Ao={components:{Dropdown:pe.Z,Tooltip:he.Z,SettingCheck:me.Z,Icon:ge.Z,LocaleGroup:fe.Z,ScriptItem:Dt,Edit:Pl},directives:{focus:S.Tu},setup:()=>(mo(),(0,$.YP)(ao,mo),(0,$.YP)(so,e=>Pe(lo.value,bo,e)),(0,$.YP)(()=>oo.search,Do),(0,$.YP)(()=>[Nl.sort,Nl.showEnabledFirst],po),(0,$.YP)(()=>[Nl.viewSingleColumn,Nl.viewTable],Ro),(0,$.YP)(()=>ao.value?U.removedScripts:U.scripts,go),(0,$.YP)(()=>U.route.paths[1],_o),(0,$.YP)(ro,e=>{L.$J.setContext("selectedScript",e)}),(0,$.YP)(()=>oo.showHotkeys,e=>{L.$J.setContext("showHotkeys",e)}),(0,$.bv)(()=>{if(U.loading||go(),!to.length){const n=getComputedStyle(t.documentElement);[to,eo]=["cards","table"].map(e=>{var t;return(null==(t=n.getPropertyValue(`--columns-${e}`))?void 0:t.split(",").map(Number).filter(i))||[]}),e.addEventListener("resize",Ro)}return Ro(),Lo()}),{refSearch:no,refList:lo,store:U,state:oo,filters:Nl,filterOptions:Hl,currentSortCompare:io,selectedScript:ro,draggable:so,scriptHotkeys:Gl,showRecycle:ao,message:co,handleStateChange:Co,handleOrderChange:yo,handleEditScript:ko,handleEmptyRecycleBin:$o,handleInstallFromURL:wo,handleUpdateAll:vo,handleOnScopeChange:xo,handleActionRemove:jo,handleActionRestore:Io,handleActionToggle:To,handleActionUpdate:Wo,handleSmoothScroll:Oo})},Mo=(0,St.Z)(Ao,[["render",(e,t)=>{const n=(0,$.up)("Icon"),l=(0,$.up)("Tooltip"),o=(0,$.up)("Dropdown"),a=(0,$.up)("LocaleGroup"),s=(0,$.up)("SettingCheck"),i=(0,$.up)("script-item"),r=(0,$.up)("edit"),c=(0,$.Q2)("focus");return(0,$.wg)(),(0,$.iD)("div",M,[e.state.canRenderScripts?((0,$.wg)(),(0,$.iD)("div",Z,[(0,$._)("header",P,[e.showRecycle?((0,$.wg)(),(0,$.iD)("div",{key:1,class:"flex-auto",textContent:(0,R.zw)(e.i18n("headerRecycleBin"))},null,8,K)):((0,$.wg)(),(0,$.iD)("div",H,[(0,$.Wm)(o,{closeAfterClick:!0,class:(0,R.C_)({active:e.state.menuNewActive}),onStateChange:e.handleStateChange},{content:(0,$.w5)(()=>[(0,$._)("a",{class:"dropdown-menu-item",textContent:(0,R.zw)(e.i18n("buttonNew")),tabindex:"0",onClick:t[0]||(t[0]=(0,A.iM)(t=>e.handleEditScript("_new"),["prevent"]))},null,8,B),(0,$._)("a",{class:"dropdown-menu-item",textContent:(0,R.zw)(e.i18n("installFrom","OpenUserJS")),href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},null,8,F),(0,$._)("a",{class:"dropdown-menu-item",textContent:(0,R.zw)(e.i18n("installFrom","GreasyFork")),href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},null,8,q),(0,$._)("a",{class:"dropdown-menu-item",textContent:(0,R.zw)(e.i18n("buttonInstallFromURL")),tabindex:"0",onClick:t[1]||(t[1]=(0,A.iM)((...t)=>e.handleInstallFromURL&&e.handleInstallFromURL(...t),["prevent"]))},null,8,Y)]),default:(0,$.w5)(()=>[(0,$.Wm)(l,{content:e.i18n("buttonNew"),placement:"bottom",align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",N,[(0,$.Wm)(n,{name:"plus"})])]),_:1},8,["content"])]),_:1},8,["class","onStateChange"]),(0,$.Wm)(l,{content:e.i18n("buttonUpdateAll"),placement:"bottom",align:"start"},{default:(0,$.w5)(()=>[(0,$._)("a",{class:"btn-ghost",tabindex:"0",onClick:t[2]||(t[2]=(...t)=>e.handleUpdateAll&&e.handleUpdateAll(...t))},[(0,$.Wm)(n,{name:"refresh"})])]),_:1},8,["content"])])),(0,$.Wm)(o,{align:"right",class:"filter-sort"},{content:(0,$.w5)(()=>[(0,$._)("div",null,[(0,$.Wm)(a,{"i18n-key":"labelFilterSort"},{default:(0,$.w5)(()=>[(0,$._)("select",{value:e.filters.sort,onChange:t[3]||(t[3]=(...t)=>e.handleOrderChange&&e.handleOrderChange(...t))},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.filterOptions.sort,(e,t)=>((0,$.wg)(),(0,$.iD)("option",{textContent:(0,R.zw)(e.title),key:t,value:t},null,8,Q))),128))],40,G)]),_:1})]),(0,$.wy)((0,$._)("div",null,[(0,$.Wm)(s,{name:"filters.showEnabledFirst",label:e.i18n("optionShowEnabledFirst")},null,8,["label"])],512),[[A.F8,e.currentSortCompare]]),(0,$._)("div",null,[(0,$.Wm)(s,{name:"filters.showOrder",label:e.i18n("labelShowOrder")},null,8,["label"])]),(0,$._)("div",X,[(0,$.Wm)(s,{name:"filters.viewTable",label:e.i18n("labelViewTable")},null,8,["label"]),(0,$.Wm)(s,{name:"filters.viewSingleColumn",label:e.i18n("labelViewSingleColumn")},null,8,["label"])])]),default:(0,$.w5)(()=>[(0,$.Wm)(l,{content:e.i18n("labelSettings"),placement:"bottom"},{default:(0,$.w5)(()=>[(0,$._)("a",J,[(0,$.Wm)(n,{name:"cog"})])]),_:1},8,["content"])]),_:1}),(0,$._)("form",{class:"filter-search hidden-xs flex",onSubmit:t[7]||(t[7]=(0,A.iM)(()=>{},["prevent"]))},[(0,$.Wm)(l,{placement:"bottom"},{content:(0,$.w5)(()=>[(0,$._)("pre",{class:"filter-search-tooltip",textContent:(0,R.zw)(e.state.searchError||e.i18n("titleSearchHint"))},null,8,te)]),default:(0,$.w5)(()=>[(0,$._)("label",null,[(0,$.wy)((0,$._)("input",{type:"search",class:(0,R.C_)({"has-error":e.state.searchError}),placeholder:e.i18n("labelSearchScript"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.state.search=t),ref:"refSearch",id:"installed-search"},null,10,ee),[[A.nr,e.state.search]]),(0,$.Wm)(n,{name:"search"})])]),_:1}),(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.filters.searchScope=t),onChange:t[6]||(t[6]=(...t)=>e.handleOnScopeChange&&e.handleOnScopeChange(...t))},[(0,$._)("option",{value:"name",textContent:(0,R.zw)(e.i18n("filterScopeName"))},null,8,ne),(0,$._)("option",{value:"code",textContent:(0,R.zw)(e.i18n("filterScopeCode"))},null,8,le),(0,$._)("option",{value:"all",textContent:(0,R.zw)(e.i18n("filterScopeAll"))},null,8,oe)],544),[[A.bM,e.filters.searchScope]])],32)]),e.showRecycle?((0,$.wg)(),(0,$.iD)("div",ae,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("hintRecycleBin"))},null,8,se),e.store.removedScripts.length?((0,$.wg)(),(0,$.iD)("a",{key:0,textContent:(0,R.zw)(e.i18n("buttonEmptyRecycleBin")),tabindex:"0",onClick:t[8]||(t[8]=(...t)=>e.handleEmptyRecycleBin&&e.handleEmptyRecycleBin(...t))},null,8,ie)):(0,$.kq)("",!0)])):e.message?((0,$.wg)(),(0,$.iD)("div",{key:1,class:"hint mx-1 my-1 flex flex-col",textContent:(0,R.zw)(e.message)},null,8,re)):(0,$.kq)("",!0),(0,$.wy)(((0,$.wg)(),(0,$.iD)("div",{class:"scripts flex-auto",ref:"refList",style:(0,R.j5)(`--num-columns:${e.state.numColumns}`),"data-columns":e.state.numColumns,"data-show-order":e.filters.showOrder||null,"data-table":e.filters.viewTable||null},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.state.sortedScripts,(t,n)=>(0,$.wy)(((0,$.wg)(),(0,$.j4)(i,{key:t.props.id,focused:e.selectedScript===t,showHotkeys:e.state.showHotkeys,script:t,draggable:e.draggable,visible:n<e.state.batchRender.limit,viewTable:e.filters.viewTable,hotkeys:e.scriptHotkeys,onRemove:e.handleActionRemove,onRestore:e.handleActionRestore,onToggle:e.handleActionToggle,onUpdate:e.handleActionUpdate,onScrollDelta:e.handleSmoothScroll},null,8,["focused","showHotkeys","script","draggable","visible","viewTable","hotkeys","onRemove","onRestore","onToggle","onUpdate","onScrollDelta"])),[[A.F8,!e.state.search||!1!==t.$cache.show]])),128))],12,ce)),[[c,!e.state.script]])])):(0,$.kq)("",!0),e.state.script?((0,$.wg)(),(0,$.j4)(r,{key:1,initial:e.state.script,"initial-code":e.state.code,"read-only":e.state.script.config.removed,onClose:t[9]||(t[9]=t=>e.handleEditScript())},null,8,["initial","initial-code","read-only"])):(0,$.kq)("",!0)])}]]),Zo=Mo,Po=["data-show-advanced"],Ho=["textContent"],No={class:"mb-1c"},Bo=["textContent"],Fo={class:"ml-2c flex flex-col"},qo=["textContent"],Yo={class:"ml-2c"},Ko=["onUpdate:modelValue"],Jo=["value","textContent"],Go=["onUpdate:modelValue"],Qo=["value","textContent"],Xo=["textContent"],ea=["onUpdate:modelValue"],ta=["value","textContent"],na=["textContent"],la=["onUpdate:modelValue"],oa=["textContent"],aa={class:"mb-1c"},sa=["textContent"],ia={class:"ml-2c flex flex-col"},ra={class:"ml-2c flex flex-col"},ca={class:"mb-2c"},ua=["textContent"],da=["open"],pa=["onClick"],ha={class:"mb-1c"},ma=["textContent"],ga=["onUpdate:modelValue"],fa=["value","textContent"],va={class:"ml-2c flex flex-col"},wa=["textContent"],ba=["onUpdate:modelValue"],ya=["value","textContent"],xa=["textContent"],Ca=(0,$._)("code",null,"page",-1),ka=["textContent"],_a=["href"];var Sa=b(9285);const za=(0,b(3055).HP)(async()=>{await("/public/lib/zip-no-worker.min.js",new u((e,n)=>{const l=t.createElement("script");l.src="/public/lib/zip-no-worker.min.js",l.onload=e,l.onerror=n,t.body.append(l)}));const{zip:e}=n,l=["/public/lib/z-worker.js"];return e.configure({workerScripts:{deflate:l,inflate:l}}),e}),Da=["textContent"],Ua=["disabled","textContent"],$a={class:"mt-1"},Ra=(0,$._)("br",null,null,-1),Ea={class:"import-report"},Va=["data-type"],ja=["textContent"],Ia=["textContent","colspan"],Ta=(0,z.qj)([]),Wa={components:{SettingCheck:me.Z,Tooltip:he.Z},data(){return{reports:Ta,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const e=t.createElement("input");e.type="file",e.accept=".zip",e.onchange=()=>{var t;return Oa(null==(t=e.files)?void 0:t[0])},e.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming");const{fixes:e,errors:t}=await(0,x.gj)("Vacuum"),n=null==t?void 0:t.join("\n");this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")+(e?` (${e})`:""),n&&(0,S.PV)({text:n})}},mounted(){const e=La(this.$refs.buttonImport);n.addEventListener("hashchange",e),e()}};async function Oa(e){if(!e)return;Ta.length=0;const t=await za(),n=new t.ZipReader(new t.BlobReader(e)),l=await n.getEntries().catch(f)||[];if(Ta.length)return;f("",e.name,"info");const o={},a=l.reduce((e,t)=>{var n;return e+(null==(n=t.filename)?void 0:n.endsWith(".user.js"))},0),s=l.find(e=>{var t;return"violentmonkey"===(null==(t=e.filename)?void 0:t.toLowerCase())}),r=s&&await g(s)||{};var d,p;function h(e,t){try{return JSON.parse(e)}catch(e){f(e,t.filename,null)}}function m(e,t){return u.all(l.map(async n=>{const{filename:l}=n;if(null!=l&&l.endsWith(t)){const o=await g(n);return o&&e(n,o,l.slice(0,-t.length))}}))}async function g(e){const n=await e.getData(new t.TextWriter);return e.filename.endsWith(".js")?n:h(n,e)}function f(e,t,n="critical"){Ta.push({text:e,name:t,type:n})}function v(e=""){const t=c.keys(o).length,n=(0,x.ag)("msgImported",[t===a?t:`${t} / ${a}`]);return Ta[0].name=n,Ta[0].text=e,n}function w(e){return(0,x.rY)(e).filter(e=>"string"==typeof e)}r.scripts||(r.scripts={}),r.values||(r.values={}),await m(async(e,t,n)=>{const{meta:l,settings:o={},options:a}=t;if(!l||!a)return;const s=a.override||{};Ta[0].text="Tampermonkey",r.scripts[n]={config:{enabled:!1!==o.enabled?1:0,shouldUpdate:a.check_for_updates?1:0},custom:{downloadURL:"string"==typeof l.file_url?l.file_url:void 0,noframes:null==s.noframes?void 0:+!!s.noframes,runAt:hl.qh.test(a.run_at)?a.run_at:void 0,exclude:w(s.use_excludes),include:w(s.use_includes),match:w(s.use_matches),origExclude:!1!==s.merge_excludes,origInclude:!1!==s.merge_includes,origMatch:!1!==s.merge_matches},position:+o.position||void 0,props:{lastModified:+l.modified,lastUpdated:+l.modified}}},".options.json"),await m(async(e,t,n)=>{var l,a,s,i;const{filename:c}=e,u=r.scripts[n],d=(0,Nt.Z)({code:t},u&&{custom:u.custom,config:(0,Nt.Z)({enabled:null!=(l=u.enabled)?l:1,shouldUpdate:null!=(a=u.update)?a:1},u.config),position:u.position,props:{lastModified:u.lastModified||(null==(s=u.props)?void 0:s.lastModified)||+e.lastModDate,lastUpdated:u.lastUpdated||(null==(i=u.props)?void 0:i.lastUpdated)||+e.lastModDate}});try{o[n]=(await(0,x.gj)("ParseScript",d)).update.props.uri,v(c)}catch(e){f(e,c,"script")}},".user.js"),_.Z.get("importScriptData")&&(await m(async(e,t,n)=>{Ta[0].text="Tampermonkey",r.values[o[n]]=t.data},".storage.json"),(0,x.gj)("SetValueStores",r.values)),_.Z.get("importSettings")&&(0,x.gj)("SetOptions",(d=r.settings,p=([e,t])=>"sync"!==e&&{key:e,value:t},c.entries(d||{}).map(p).filter(i))),(0,x.gj)("CheckPosition"),(0,S.PV)({text:v()}),await n.close()}function La(e){let l;const o=t=>e.classList.toggle("drop-allowed",t),a=()=>o(!1),s=()=>{clearTimeout(l),l=setTimeout(a,250)},i=e=>{clearTimeout(l);const t=e.dataTransfer.types.includes("Files");t&&e.preventDefault(),o(t)},r=async t=>{t.preventDefault(),o(!1);const n=t.dataTransfer.files[0];await(0,S.GW)((0,x.ag)("buttonImportData"))&&(e.disabled=!0,await Oa(n),e.disabled=!1)};return()=>{const e="#settings"===n.location.hash,l=t[(e?"add":"remove")+"EventListener"];g(l,t,"dragend",a),g(l,t,"dragleave",s),g(l,t,"dragover",i),g(l,t,"drop",r)}}const Aa=(0,St.Z)(Wa,[["render",(e,t)=>{const n=(0,$.up)("tooltip"),l=(0,$.up)("setting-check");return(0,$.wg)(),(0,$.iD)("div",null,[(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonImportData")),onClick:t[0]||(t[0]=(...t)=>e.pickBackup&&e.pickBackup(...t)),ref:"buttonImport"},null,8,Da),(0,$.Wm)(n,{content:e.i18n("hintVacuum")},{default:(0,$.w5)(()=>[(0,$._)("button",{onClick:t[1]||(t[1]=(...t)=>e.vacuum&&e.vacuum(...t)),disabled:e.vacuuming,textContent:(0,R.zw)(e.labelVacuum)},null,8,Ua)]),_:1},8,["content"]),(0,$._)("div",$a,[(0,$.Wm)(l,{name:"importScriptData",label:e.i18n("labelImportScriptData")},null,8,["label"]),Ra,(0,$.Wm)(l,{name:"importSettings",label:e.i18n("labelImportSettings")},null,8,["label"])]),(0,$._)("table",Ea,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.reports,({type:e,name:t,text:n},l)=>((0,$.wg)(),(0,$.iD)("tr",{key:l,"data-type":e},[t?((0,$.wg)(),(0,$.iD)("td",{key:0,textContent:(0,R.zw)(t)},null,8,ja)):(0,$.kq)("",!0),(0,$._)("td",{textContent:(0,R.zw)(n),colspan:t?null:2},null,8,Ia)],8,Va))),128))])])}]]),Ma={class:"export"},Za={class:"flex flex-wrap center-items mr-1c"},Pa=["textContent","disabled"],Ha={href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"},Na=["textContent"],Ba={class:"mt-1"},Fa={class:"modal-content"},qa=["download","href"],Ya=(0,$._)("br",null,null,-1),Ka=(0,$._)("strong",null,"scripts.zip",-1);var Ja=b(3011),Ga=b(8346),Qa=b(3795),Xa=b(8860),es=b(3220);f&&(U.ffDownload={});const ts={components:{SettingCheck:me.Z,SettingText:Xa.Z,Icon:ge.Z,Modal:Ja.Z,Tooltip:he.Z},data:()=>({store:U,dateTokens:c.keys(Ga.q).join(", "),exporting:!1}),methods:{async handleExport(){try{this.exporting=!0,ns(await os(),this.getFileName())}finally{this.exporting=!1}},getFileName(){var e;const{tpl:t}=this.$refs;return t&&`${(0,Ga.p)((null==(e=t.value)?void 0:e.trim())||t.defaultValue)}.zip`}}};function ns(e,t){const n=Qa.Z.firefox;if(n&&("win"===Qa.Z.os?n<56:"mac"===Qa.Z.os?n<61:n<63)){const n=new FileReader;n.onload=()=>{U.ffDownload={name:t,url:n.result}},n.readAsDataURL(e)}else(0,es.l)(e,t)}function ls(e){return e.replace(/[\\/:*?"<>|]/g,"-")}async function os(){const e=_.Z.get("exportValues"),t=await(0,x.gj)("ExportZip",{values:e}),n={},l={scripts:{},settings:_.Z.get()};delete l.settings.sync,e&&(l.values={});const o=((0,de._M)(t,"items")||[]).map(({script:o,code:a})=>{let s=ls((0,x.pV)(o));n[s]?(n[s]+=1,s=`${s}_${n[s]}`):n[s]=1;const{lastModified:i,lastUpdated:r}=o.props,c={custom:o.custom,config:o.config,position:o.props.position,lastModified:i,lastUpdated:r};if(e){const e=t.values[o.props.id];e&&(l.values[o.props.uri]=e)}return l.scripts[s]=c,{name:`${s}.user.js`,content:a,lastModDate:new Date(r||i)}});o.push({name:"violentmonkey",content:JSON.stringify(l)});const a=await za(),s=new a.BlobWriter("application/zip"),i=new a.ZipWriter(s,{bufferedWrite:!0,keepOrder:!1});return await u.all(o.map(e=>i.add(e.name,new a.TextReader(e.content),{lastModDate:e.lastModDate}))),await i.close()}const as=(0,St.Z)(ts,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("setting-text"),i=(0,$.up)("icon"),r=(0,$.up)("tooltip"),c=(0,$.up)("setting-check"),u=(0,$.up)("modal");return(0,$.wg)(),(0,$.iD)("div",Ma,[(0,$._)("div",Za,[(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonExportData")),onClick:t[0]||(t[0]=(...e)=>a.handleExport&&a.handleExport(...e)),disabled:o.exporting},null,8,Pa),(0,$.Wm)(s,{name:"exportNameTemplate",ref:"tpl","has-reset":"","has-save":!1,rows:1,class:"tpl flex flex-1 center-items ml-1c"},null,512),(0,$.Wm)(r,{content:e.i18n("msgDateFormatInfo",o.dateTokens),placement:"left"},{default:(0,$.w5)(()=>[(0,$._)("a",Ha,[(0,$.Wm)(i,{name:"info"})])]),_:1},8,["content"]),(0,$._)("span",{hidden:"",textContent:(0,R.zw)(a.getFileName())},null,8,Na)]),(0,$._)("div",Ba,[(0,$.Wm)(c,{name:"exportValues",label:e.i18n("labelExportScriptData")},null,8,["label"])]),o.store.ffDownload?((0,$.wg)(),(0,$.j4)(u,{key:0,transition:"in-out",visible:!!o.store.ffDownload.url,onClose:t[1]||(t[1]=e=>o.store.ffDownload={})},{default:(0,$.w5)(()=>[(0,$._)("div",Fa,[(0,$._)("a",{download:o.store.ffDownload.name,href:o.store.ffDownload.url},[(0,$.Uk)(" Right click and save as"),Ya,Ka],8,qa)])]),_:1},8,["visible"])):(0,$.kq)("",!0)])}]]),ss={class:"mb-1c"},is=["textContent"],rs={key:0,class:"flex flex-wrap center-items"},cs=["textContent"],us=["value"],ds=["textContent","value"],ps=["textContent","disabled"],hs=["disabled"],ms=["textContent"],gs={key:1,class:"mt-1c"},fs={class:"sync-server-url"},vs=["textContent"],ws=["disabled"],bs={class:"mr-2c"},ys=["textContent"],xs=["disabled"],Cs={class:"inline-block"},ks=["textContent"],_s=["disabled"],Ss=["disabled"],zs=["textContent"],Ds=["textContent","disabled"],Us={key:2},$s="sync.current",Rs={current:""};(0,ue.Z)($s,e=>{Rs.current=e||""});const Es={components:{SettingCheck:me.Z,Icon:ge.Z,Tooltip:he.Z},data:()=>({syncConfig:Rs,store:U}),computed:{syncServices(){const e=this.store.sync;return e&&e.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...e]:null},service(){if(this.syncServices){const e=this.syncConfig.current||"";let t=this.syncServices.find(t=>t.name===e);return t||(console.warn("Invalid current service:",e),t=this.syncServices[0]),t}return null},state(){const{service:e}=this;if(e){const t=["idle","error"].includes(e.syncState)&&["no-auth","unauthorized","error","authorized"].includes(e.authState),n=t&&"authorized"===e.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:t,canSync:n,authType:e.properties.authType,userConfig:e.userConfig||{}}}return null}},methods:{onSaveUserConfig(){(0,x.gj)("SyncSetConfig",this.state.userConfig)},onSyncChange(e){const{value:t}=e.target;_.Z.set($s,t)},onAuthorize(){const{service:e}=this;["authorized"].includes(e.authState)?(0,x.gj)("SyncRevoke"):["no-auth","unauthorized","error"].includes(e.authState)&&(0,x.gj)("SyncAuthorize")},onSync(){(0,x.gj)("SyncStart")},getMessage(){const{service:e}=this;if("initializing"===e.authState)return this.i18n("msgSyncInit");if("no-auth"===e.authState)return this.i18n("msgSyncNoAuthYet");if("error"===e.authState)return this.i18n("msgSyncInitError");if("unauthorized"===e.authState)return this.i18n("msgSyncInitError");if("error"===e.syncState)return this.i18n("msgSyncError");if("ready"===e.syncState)return this.i18n("msgSyncReady");if("syncing"===e.syncState){let t="";return e.progress&&e.progress.total&&(t=` (${e.progress.finished}/${e.progress.total})`),this.i18n("msgSyncing")+t}if(e.lastSync){const t=new Date(e.lastSync).toLocaleString();return this.i18n("lastSync",t)}},getLabel(){const{service:e}=this;return"authorizing"===e.authState?this.i18n("labelSyncAuthorizing"):"authorized"===e.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},Vs=(0,St.Z)(Es,[["render",(e,t,n,l,o,a)=>{var s,i;const r=(0,$.up)("icon"),c=(0,$.up)("tooltip"),u=(0,$.up)("setting-check");return(0,$.wg)(),(0,$.iD)("section",ss,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelSync"))},null,8,is),a.state?((0,$.wg)(),(0,$.iD)("div",rs,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelSyncService"))},null,8,cs),(0,$._)("select",{class:"mx-1",value:o.syncConfig.current,onChange:t[0]||(t[0]=(...e)=>a.onSyncChange&&a.onSyncChange(...e))},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(a.syncServices,e=>((0,$.wg)(),(0,$.iD)("option",{key:e.name,textContent:(0,R.zw)(e.displayName),value:e.name},null,8,ds))),128))],40,us),a.service.name&&"oauth"===a.state.authType?((0,$.wg)(),(0,$.iD)("button",{key:0,textContent:(0,R.zw)(a.state.label),disabled:!a.state.canAuthorize,onClick:t[1]||(t[1]=(...e)=>a.onAuthorize&&a.onAuthorize(...e))},null,8,ps)):(0,$.kq)("",!0),a.service.name?((0,$.wg)(),(0,$.j4)(c,{key:1,content:e.i18n("labelSync"),class:"stretch-self flex mr-1"},{default:(0,$.w5)(()=>[(0,$._)("button",{disabled:!a.state.canSync,onClick:t[2]||(t[2]=(...e)=>a.onSync&&a.onSync(...e)),class:"flex center-items"},[(0,$.Wm)(r,{name:"refresh"})],8,hs)]),_:1},8,["content"])):(0,$.kq)("",!0),a.state?((0,$.wg)(),(0,$.iD)("p",{key:2,textContent:(0,R.zw)(a.state.message)},null,8,ms)):(0,$.kq)("",!0)])):(0,$.kq)("",!0),"password"===(null==(s=a.state)?void 0:s.authType)?((0,$.wg)(),(0,$.iD)("fieldset",gs,[(0,$._)("label",fs,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelSyncServerUrl"))},null,8,vs),(0,$.wy)((0,$._)("input",{type:"url","onUpdate:modelValue":t[3]||(t[3]=e=>a.state.userConfig.serverUrl=e),disabled:!a.state.canAuthorize},null,8,ws),[[A.nr,a.state.userConfig.serverUrl]])]),(0,$._)("div",bs,[(0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelSyncUsername"))},null,8,ys),(0,$.wy)((0,$._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.state.userConfig.username=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,xs),[[A.nr,a.state.userConfig.username]])]),(0,$._)("label",Cs,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelSyncPassword"))},null,8,ks),(0,$.wy)((0,$._)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>a.state.userConfig.password=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,_s),[[A.nr,a.state.userConfig.password]])]),(0,$._)("label",null,[(0,$.wy)((0,$._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>a.state.userConfig.anonymous=e),disabled:!a.state.canAuthorize},null,8,Ss),[[A.e8,a.state.userConfig.anonymous]]),(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelSyncAnonymous"))},null,8,zs)])]),(0,$._)("div",null,[(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonSave")),onClick:t[7]||(t[7]=(0,A.iM)((...e)=>a.onSaveUserConfig&&a.onSaveUserConfig(...e),["prevent"])),disabled:!a.state.canAuthorize},null,8,Ds)])])):(0,$.kq)("",!0),null!=(i=a.service)&&i.name?((0,$.wg)(),(0,$.iD)("div",Us,[(0,$.Wm)(u,{name:"syncScriptStatus",label:e.i18n("labelSyncScriptStatus")},null,8,["label"])])):(0,$.kq)("",!0)])}]]),js=["textContent"],Is={class:"mr-1c flex center-items"},Ts=["textContent"],Ws=["disabled","title"],Os=["value","textContent"],Ls=["textContent"],As=["textContent"],Ms=["href"],Zs=["textContent"],Ps=["innerHTML"],Hs=["textContent"],Ns=["textContent"],Bs="editorTheme",Fs="editorThemeName",qs=["3024-day","3024-night","abbott","abcdef","ambiance-mobile","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","juejin","lesser-dark","liquibyte","lucario","material-darker","material-ocean","material-palenight","material","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"],Ys="codemirror/CodeMirror",Ks=`https://github.com/${Ys}/tree/master/theme`,Js="default",Gs=e=>e?e.split("\n",21).map((e,t)=>(20===t?"...":e.length>100&&`${e.slice(0,100)}...`)||e).join("\n"):null,Qs={data:()=>({hint:null,busy:!1,error:null,css:null,theme:null,themes:qs,DEFAULT:Js,ghURL:Ks}),components:{SettingText:Xa.Z},beforeUnmount(){this.revokers.forEach(e=>e()),this.revokers=null},async mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean),this.revokers||(this.css=Gs(_.Z.get(Bs)),this.revokers=[(0,ue.Z)(Fs,e=>{this.theme=null!=e?e:Js})],await _.Z.ready,this.$watch("theme",async e=>{const t=e&&e!==Js&&`https://raw.githubusercontent.com/${Ys}/master/theme/${e}.css`,n=t&&await this.fetch(t);_.Z.set(Fs,!t||n?e:Js),_.Z.set(Bs,n||""),this.css=Gs(n)}))},methods:{async fetch(e,n="text"){const l=t.activeElement;this.busy=!0;try{const t=await(await fetch(e))[n]();return this.error=null,t}catch(e){this.error=e.message||e.code||`${e}`}finally{this.busy=!1,this.$nextTick(()=>null==l?void 0:l.focus())}},onSave(){(0,S.PV)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(e){const n=e.target,{selectionStart:l,selectionEnd:o,value:a}=n,s={false:"true",true:"false"}[a.slice(l,o)];s&&!t.execCommand("insertText",!1,s)&&(n.value=a.slice(0,l)+s+a.slice(o),n.setSelectionRange(l+s.length,l+s.length),n.dispatchEvent(new Event("input")),n.onblur=()=>n.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const e=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],t={};c.entries((0,Nt.Z)({},(await u.resolve().then(b.t.bind(b,4631,23))).default.defaults,(await u.resolve().then(b.bind(b,1181))).default.data().cmDefaults,_.Z.get("editor"))).sort(([e],[t])=>e<t?-1:e>t).filter(([t,n])=>!e.includes(t)&&!s(n)).forEach(([e,n])=>{t[e]=n}),this.hint=JSON.stringify(t,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>n.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},Xs=(0,St.Z)(Qs,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("setting-text");return(0,$.wg)(),(0,$.iD)("section",null,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelEditor"))},null,8,js),(0,$._)("div",Is,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelTheme"))},null,8,Ts),(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.theme=e),disabled:o.busy,title:o.css},[(0,$._)("option",{value:o.DEFAULT,textContent:(0,R.zw)(e.i18n("labelRunAtDefault"))},null,8,Os),(0,$._)("option",{value:"",textContent:(0,R.zw)(e.i18n("labelBadgeNone"))},null,8,Ls),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(o.themes,e=>((0,$.wg)(),(0,$.iD)("option",{key:e,textContent:(0,R.zw)(e)},null,8,As))),128))],8,Ws),[[A.bM,o.theme]]),(0,$._)("a",{href:o.ghURL,target:"_blank"},"\u2197",8,Ms),(0,$._)("p",{textContent:(0,R.zw)(o.error)},null,8,Zs)]),(0,$._)("p",{innerHTML:e.i18n("descEditorOptions"),class:"my-1"},null,8,Ps),(0,$.Wm)(s,{name:"editor",ref:"editor",json:!0,"has-reset":!0,onSave:a.onSave},{default:(0,$.w5)(()=>[(0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonShowEditorState")),onClick:t[1]||(t[1]=(...e)=>a.toggleStateHint&&a.toggleStateHint(...e))},null,8,Hs)]),_:1},8,["onSave"]),(0,$._)("pre",{textContent:(0,R.zw)(o.hint),class:"monospace-font dim-hint"},null,8,Ns)])}]]),ei=["textContent"],ti={components:{SettingText:Xa.Z},methods:{onSave(){(0,S.PV)({text:this.i18n("msgSavedScriptTemplate")})}}},ni=(0,St.Z)(ti,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("setting-text");return(0,$.wg)(),(0,$.iD)("section",null,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelScriptTemplate"))},null,8,ei),(0,$.Wm)(s,{name:"scriptTemplate",onSave:a.onSave,"has-reset":""},null,8,["onSave"])])}]]),li=["textContent"],oi=["textContent"],ai={class:"flex flex-wrap"},si={key:0,class:"text-red"},ii=["textContent"],ri={components:{SettingText:Xa.Z},data:()=>({errors:null}),methods:{onSave(){(0,S.PV)({text:this.i18n("msgSavedBlacklist")})}},async mounted(){this.errors=await(0,x.gj)("Storage",["base","getOne",hl.BZ])}},ci=(0,St.Z)(ri,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("setting-text");return(0,$.wg)(),(0,$.iD)("section",null,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelBlacklist"))},null,8,li),(0,$._)("p",null,[(0,$.Uk)((0,R.zw)(e.i18n("descBlacklist"))+" ",1),(0,$._)("a",{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("learnBlacklist"))},null,8,oi)]),(0,$._)("div",ai,[(0,$.Wm)(s,{name:"blacklist",class:"flex-1",onSave:a.onSave,onBgError:t[0]||(t[0]=e=>o.errors=e)},null,8,["onSave"]),o.errors?((0,$.wg)(),(0,$.iD)("ol",si,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(o.errors,e=>((0,$.wg)(),(0,$.iD)("li",{key:e,textContent:(0,R.zw)(e)},null,8,ii))),128))])):(0,$.kq)("",!0)])])}]]),ui=["textContent"],di=["innerHTML"],pi={components:{SettingText:Xa.Z},methods:{onSave(){(0,S.PV)({text:this.i18n("msgSavedCustomCSS")})}}},hi=(0,St.Z)(pi,[["render",(e,t,n,l,o,a)=>{const s=(0,$.up)("setting-text");return(0,$.wg)(),(0,$.iD)("section",null,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelCustomCSS"))},null,8,ui),(0,$._)("p",{innerHTML:e.i18n("descCustomCSS")},null,8,di),(0,$.Wm)(s,{name:"customCSS",onSave:a.onSave},null,8,["onSave"])])}]]),mi={badgeColor:(0,x.ag)("titleBadgeColor"),badgeColorBlocked:(0,x.ag)("titleBadgeColorBlocked")},gi=c.keys(mi),fi={enum:mi,normalize:(e,t)=>/^#[0-9a-f]{6}$/i.test(e)?e:Sa.Z[t]},vi=(0,Nt.Z)({autoUpdate:{normalize:e=>Math.max(0,Math.min(365,+e||0))},defaultInjectInto:{enum:{[l]:"",[o]:"",[a]:""}},showAdvanced:{normalize:e=>e},showBadge:{enum:{"":(0,x.ag)("labelBadgeNone"),unique:(0,x.ag)("labelBadgeUnique"),total:(0,x.ag)("labelBadgeTotal")}},"filtersPopup.hideDisabled":{enum:{"":(0,x.ag)("optionPopupShowDisabled"),group:(0,x.ag)("optionPopupGroupDisabled"),hide:(0,x.ag)("optionPopupHideDisabled")}},"filtersPopup.sort":{enum:{exec:(0,x.ag)("filterExecutionOrder"),alpha:(0,x.ag)("filterAlphabeticalOrder")}},uiTheme:{enum:{"":(0,x.ag)("optionUiThemeAuto"),dark:(0,x.ag)("optionUiThemeDark"),light:(0,x.ag)("optionUiThemeLight")}}},g(de.Xw,mi,()=>fi)),wi=(e,t)=>m(vi[t].enum,e)?e:c.keys(vi[t].enum)[0],bi=(e,t)=>(0,x.Ds)((n,l)=>{(n=t(n,e))!==(l=t(l,e))&&_.Z.set(e,n)},50),yi=(0,z.qj)({}),xi={components:{VmImport:Aa,VmExport:as,VmSync:Vs,VmEditor:Xs,VmTemplate:ni,VmBlacklist:ci,VmCss:hi,SettingCheck:me.Z,LocaleGroup:fe.Z,Tooltip:he.Z},data:()=>({expose:null,items:vi,settings:yi}),computed:{editorWindowHint(){var e;return null!=(e=d.windows)&&e.onBoundsChanged?null:this.i18n("optionEditorWindowHint")},isCustomBadgeColor:()=>gi.some(e=>yi[e]!==Sa.Z[e])},methods:{onResetBadgeColors(){gi.forEach(e=>{yi[e]=Sa.Z[e]})}},activated(){(0,S.wO)(this.$el)},created(){this.revokers=[],g(de.LI,vi,([e,{normalize:t=wi}])=>{this.revokers.push((0,ue.Z)(e,n=>{yi[e]=t(n,e)})),this.$watch(()=>yi[e],bi(e,t))}),this.expose=c.keys(_.Z.get("expose")).map(e=>[e,decodeURIComponent(e)]),za()},beforeUnmount(){this.revokers.forEach(e=>{e()})}},Ci=(0,St.Z)(xi,[["render",(e,t)=>{var n;const l=(0,$.up)("setting-check"),o=(0,$.up)("tooltip"),a=(0,$.up)("locale-group"),s=(0,$.up)("vm-import"),i=(0,$.up)("vm-export"),r=(0,$.up)("vm-sync"),c=(0,$.up)("vm-editor"),u=(0,$.up)("vm-template"),d=(0,$.up)("vm-blacklist"),p=(0,$.up)("vm-css");return(0,$.wg)(),(0,$.iD)("div",{class:"tab-settings","data-show-advanced":e.settings.showAdvanced},[(0,$._)("h1",{textContent:(0,R.zw)(e.i18n("labelSettings"))},null,8,Ho),(0,$._)("section",No,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("optionPopup"))},null,8,Bo),(0,$._)("div",null,[(0,$.Wm)(l,{name:"autoReload",label:e.i18n("labelAutoReloadCurrentTab")},null,8,["label"])]),(0,$._)("div",Fo,[(0,$.Wm)(l,{name:"editorWindow",class:"mr-2",ref:"EW"},{default:(0,$.w5)(()=>[(0,$.Wm)(o,{content:e.editorWindowHint,disabled:!e.editorWindowHint},{default:(0,$.w5)(()=>[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("optionEditorWindow"))},null,8,qo)]),_:1},8,["content","disabled"])]),_:1},512),(0,$.wy)((0,$.Wm)(l,{name:"editorWindowSimple",label:e.i18n("optionEditorWindowSimple")},null,8,["label"]),[[A.F8,null==(n=e.$refs.EW)?void 0:n.value]])]),(0,$._)("div",Yo,[(0,$._)("label",null,[(0,$.Wm)(a,{"i18n-key":"labelPopupSort"},{default:(0,$.w5)(()=>[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(["filtersPopup.sort"],t=>(0,$.wy)(((0,$.wg)(),(0,$.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items[t].enum,(e,n)=>((0,$.wg)(),(0,$.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,R.zw)(e)},null,8,Jo))),128))],8,Ko)),[[A.bM,e.settings[t]]])),128))]),_:1})]),(0,$.wy)((0,$.Wm)(l,{name:"filtersPopup.groupRunAt",label:e.i18n("optionPopupGroupRunAt")},null,8,["label"]),[[A.F8,"exec"===e.settings["filtersPopup.sort"]]]),(0,$._)("label",null,[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(["filtersPopup.hideDisabled"],t=>(0,$.wy)(((0,$.wg)(),(0,$.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items[t].enum,(e,n)=>((0,$.wg)(),(0,$.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,R.zw)(e)},null,8,Qo))),128))],8,Go)),[[A.bM,e.settings[t]]])),128))]),(0,$.wy)((0,$.Wm)(l,{name:"filtersPopup.enabledFirst",label:e.i18n("optionPopupEnabledFirst")},null,8,["label"]),[[A.F8,!e.settings["filtersPopup.hideDisabled"]]])]),(0,$._)("div",null,[(0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelBadge"))},null,8,Xo),((0,$.wg)(),(0,$.iD)($.HY,null,(0,$.Ko)(["showBadge"],t=>(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items[t].enum,(e,n)=>((0,$.wg)(),(0,$.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,R.zw)(e)},null,8,ta))),128))],8,ea),[[A.bM,e.settings[t]]])),64))])]),(0,$._)("div",null,[(0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelBadgeColors"))},null,8,na),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items.badgeColor.enum,(t,n)=>((0,$.wg)(),(0,$.j4)(o,{key:`bc:${n}`,content:t},{default:(0,$.w5)(()=>[(0,$.wy)((0,$._)("input",{type:"color","onUpdate:modelValue":t=>e.settings[n]=t},null,8,la),[[A.nr,e.settings[n]]])]),_:2},1032,["content"]))),128)),(0,$.wy)((0,$._)("button",{textContent:(0,R.zw)(e.i18n("buttonReset")),class:"ml-1",onClick:t[0]||(t[0]=(...t)=>e.onResetBadgeColors&&e.onResetBadgeColors(...t))},null,8,oa),[[A.F8,e.isCustomBadgeColor]])])])]),(0,$._)("section",aa,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("optionUpdate"))},null,8,sa),(0,$._)("div",ia,[(0,$._)("label",null,[(0,$.Wm)(a,{"i18n-key":"labelAutoUpdate"},{default:(0,$.w5)(()=>[(0,$.wy)((0,$._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.autoUpdate=t),type:"number",min:"0",max:"365",step:"1/"},null,512),[[A.nr,e.settings.autoUpdate]])]),_:1})]),(0,$.Wm)(l,{name:"updateEnabledScriptsOnly",label:e.i18n("labelEnabledScriptsOnly")},null,8,["label"])]),(0,$._)("div",ra,[(0,$.Wm)(l,{name:"notifyUpdates",label:e.i18n("labelNotifyUpdates")},null,8,["label"]),(0,$.Wm)(l,{name:"notifyUpdatesGlobal",label:e.i18n("labelNotifyUpdatesGlobal"),class:"ml-2"},null,8,["label"])])]),(0,$._)("section",ca,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelBackup"))},null,8,ua),(0,$.Wm)(s),(0,$.Wm)(i)]),(0,$.Wm)(r),((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)({showAdvanced:e.settings},(t,n)=>((0,$.wg)(),(0,$.iD)("details",{key:n,open:t[n]},[(0,$._)("summary",{onClick:(0,A.iM)(e=>t[n]=!t[n],["prevent"])},[((0,$.wg)(),(0,$.j4)((0,$.LL)(t[n]?"h1":"h3"),{textContent:(0,R.zw)(e.i18n("labelAdvanced")),class:"inline-block"},null,8,["textContent"]))],8,pa),(0,$._)("section",ha,[(0,$._)("h3",{textContent:(0,R.zw)(e.i18n("labelGeneral"))},null,8,ma),(0,$._)("div",null,[(0,$._)("label",null,[(0,$.Wm)(a,{"i18n-key":"optionUiTheme"},{default:(0,$.w5)(()=>[((0,$.wg)(),(0,$.iD)($.HY,null,(0,$.Ko)(["uiTheme"],t=>(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items[t].enum,(e,n)=>((0,$.wg)(),(0,$.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,R.zw)(e)},null,8,fa))),128))],8,ga),[[A.bM,e.settings[t]]])),64))]),_:1})])]),(0,$._)("div",va,[(0,$._)("label",null,[(0,$._)("span",{textContent:(0,R.zw)(e.i18n("labelInjectionMode"))},null,8,wa),((0,$.wg)(),(0,$.iD)($.HY,null,(0,$.Ko)(["defaultInjectInto"],t=>(0,$.wy)((0,$._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.items[t].enum,(e,n)=>((0,$.wg)(),(0,$.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,R.zw)(n)},null,8,ya))),128))],8,ba),[[A.bM,e.settings[t]]])),64)),(0,$._)("a",{class:"ml-1",href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("learnInjectionMode"))},null,8,xa)]),(0,$._)("label",null,[(0,$.Wm)(l,{name:"xhrInject"}),(0,$.Wm)(o,{content:e.i18n("labelXhrInjectHint")},{default:(0,$.w5)(()=>[(0,$.Wm)(a,{"i18n-key":"labelXhrInject"},{default:(0,$.w5)(()=>[Ca]),_:1})]),_:1},8,["content"])])]),(0,$._)("div",null,[(0,$.Wm)(a,{"i18n-key":"labelExposeStatus",class:"mr-1c"},{default:(0,$.w5)(()=>[((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(e.expose,([e,t])=>((0,$.wg)(),(0,$.j4)(l,{key:t,name:`expose.${e}`,class:"mr-1c valign-tb"},{default:(0,$.w5)(()=>[(0,$._)("span",{textContent:(0,R.zw)(t)},null,8,ka),(0,$._)("a",{href:`https://${t}`,target:"_blank",rel:"noopener noreferrer"},"\u2197",8,_a)]),_:2},1032,["name"]))),128))]),_:2},1024)])]),(0,$.Wm)(c),(0,$.Wm)(u),(0,$.Wm)(d),(0,$.Wm)(p)],8,da))),128))],8,Po)}]]),ki={class:"tab-about mb-2c"},_i={class:"mt-0 mr-1c"},Si=["textContent"],zi=["textContent"],Di=["textContent"],Ui=["textContent"],$i=(0,$._)("span",{class:"text-red"}," \u2665",-1),Ri=["textContent"],Ei=["textContent"],Vi=["textContent"],ji=["textContent"],Ii=["textContent"],Ti=["textContent"],Wi=["textContent"],Oi=["textContent"],Li={data:()=>({name:w.name,version:"2.13.9",language:browser.i18n.getUILanguage()}),activated(){(0,S.wO)(this.$el)}},Ai=(0,St.Z)(Li,[["render",(e,t,n,l,o,a)=>((0,$.wg)(),(0,$.iD)("div",ki,[(0,$._)("h1",_i,[(0,$._)("span",{textContent:(0,R.zw)(o.name)},null,8,Si),(0,$._)("small",{textContent:(0,R.zw)(`v${o.version}`)},null,8,zi)]),(0,$._)("p",{textContent:(0,R.zw)(e.i18n("extDescription"))},null,8,Di),(0,$._)("div",null,[(0,$._)("a",{href:"https://violentmonkey.github.io/donate/",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelDonate"))},null,8,Ui),$i]),(0,$._)("div",null,[(0,$._)("label",{textContent:(0,R.zw)(e.i18n("labelRelated"))},null,8,Ri),(0,$._)("ul",null,[(0,$._)("li",null,[(0,$._)("a",{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelHomepage"))},null,8,Ei)]),(0,$._)("li",null,[(0,$._)("a",{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelFeedback"))},null,8,Vi)]),(0,$._)("li",null,[(0,$._)("a",{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelContributors"))},null,8,ji)]),(0,$._)("li",null,[(0,$._)("a",{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelPrivacyPolicy"))},null,8,Ii)])])]),(0,$._)("div",null,[(0,$._)("label",{textContent:(0,R.zw)(e.i18n("labelCurrentLang"))},null,8,Ti),(0,$._)("span",{class:"current",textContent:(0,R.zw)(o.language)},null,8,Wi),(0,$.Uk)(" | "),(0,$._)("a",{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer",textContent:(0,R.zw)(e.i18n("labelHelpTranslate"))},null,8,Oi)])]))]]),Mi="scripts",Zi="about",Pi="recycleBin",Hi=[{name:Mi,comp:Zo,label:(0,x.ag)("sideMenuInstalled")},{name:"settings",comp:Ci,label:(0,x.ag)("sideMenuSettings")},{name:Zi,comp:Ai,label:(0,x.ag)("sideMenuAbout")},{name:Pi,comp:Zo,label:(0,x.ag)("buttonRecycleBin")}],Ni=(0,x.ag)("extName"),Bi="!editScript",[Fi,qi]=U.route.paths,Yi=(0,$.Fl)(()=>{const e=U.route.paths[0];return Hi.find(t=>t.name===e)||Hi[0]}),Ki=(0,$.Fl)(()=>({[Mi]:U.scripts.length,[Pi]:U.removedScripts.length}));function Ji(){const e=Yi.value.name===Mi,{paths:t}=U.route;L.$J.setContext("editScript",e&&t[1]),L.$J.setContext("tabScripts",e&&!t[1]),L.$J.setContext("showRecycle",Yi.value.name===Pi)}function Gi(e){const t=Hi.indexOf(Yi.value),l=Hi[(t+e+Hi.length)%Hi.length];n.location.hash=(null==l?void 0:l.name)||""}t.addEventListener("dragover",e=>{var t;["",Zi,Mi].includes(U.route.hash)&&/^application\/(zip|x-zip-compressed)$/.test(null==(t=e.dataTransfer.items[0])?void 0:t.type)&&(n.location.hash="#settings")});const Qi={setup(){const e=(0,z.iH)(Fi!==Mi||"_new"!==qi&&!Number(qi));return(0,$.m0)(()=>{const{title:e}=U;t.title=e?`${e} - ${Ni}`:Ni}),(0,$.YP)(()=>U.route.paths,()=>{e.value=!0,Ji()}),(0,$.bv)(()=>{const e=[L.$J.register("a-pageup",()=>Gi(-1),{condition:Bi}),L.$J.register("a-pagedown",()=>Gi(1),{condition:Bi})];return L.$J.enable(),Ji(),()=>{e.forEach(e=>{e()}),L.$J.disable()}}),{tabs:Hi,current:Yi,numbers:Ki,canRenderAside:e}}},Xi=(0,St.Z)(Qi,[["render",(e,t,n,l,o,a)=>((0,$.wg)(),(0,$.iD)("div",E,[l.canRenderAside?((0,$.wg)(),(0,$.iD)("aside",V,[(0,$._)("div",j,[I,(0,$._)("h1",{class:"hidden-sm",textContent:(0,R.zw)(e.i18n("extName"))},null,8,T),W,((0,$.wg)(!0),(0,$.iD)($.HY,null,(0,$.Ko)(l.tabs,e=>((0,$.wg)(),(0,$.iD)("div",{class:"aside-menu-item",key:e.name},[(0,$._)("a",{href:`#${e.name}`,class:(0,R.C_)({active:e===l.current}),"data-num-scripts":l.numbers[e.name]||null,textContent:(0,R.zw)(e.label)},null,10,O)]))),128))])])):(0,$.kq)("",!0),((0,$.wg)(),(0,$.j4)($.Ob,null,[((0,$.wg)(),(0,$.j4)((0,$.LL)(l.current.comp),{class:"tab flex-auto"}))],1024))]))]]),er=["scripts","sizes"],tr=[(0,x.ag)("editNavCode"),(0,x.ag)("editNavSettings"),(0,x.ag)("editNavValues"),"@require","@resource"];function nr(e,t){const n=e.meta||{},l=(0,x.iQ)(n,"name"),o=[n.name,l,n.description,(0,x.iQ)(n,"description"),e.custom.name,e.custom.description].filter(i).join("\n"),a=e.custom.name||l,s=a.toLowerCase();let r=0,c="";t.forEach((e,t)=>{r+=e,e&&(c+=`${tr[t]}: ${(0,x.aj)(e)}\n`)}),e.$cache={search:o,name:a,lowerName:s,size:(0,x.aj)(r,!0).replace(" ",""),sizes:c.slice(0,-1).replace(/\x20/g,"\xa0").replace(/[^B]$/gm,"$&B"),sizeNum:r},(0,k.d)(e,U,!0)}function lr(){const e=+U.route.paths[1];return or(e?[e]:null).catch(e?()=>or():console.error)}async function or(e){const[t]=await u.all([(0,x.gj)("GetData",{ids:e,sizes:!0},{retry:!0}),_.Z.ready]),{scripts:n,sizes:l}=t,o=y(t,er);c.assign(U,o);const a=[],s=[];n.forEach((e,t)=>{nr(e,l[t]),(e.config.removed?s:a).push(e)}),U.scripts=a,U.removedScripts=s,U.loading=!1}c.assign(U,{loading:!1,sync:[],title:null}),U.loading=!0,lr(),c.assign(C.Z,{ScriptsUpdated(){lr()},UpdateSync(e){U.sync=e},async UpdateScript({update:e,where:t}={}){var n;if(!e)return;const[l]=await(0,x.gj)("GetSizes",[t.id]),o=U.scripts.findIndex(e=>e.props.id===t.id),a=U.removedScripts.findIndex(e=>e.props.id===t.id),s=c.assign(U.scripts[o]||U.removedScripts[a]||{},e);if(s.error&&!e.error&&(s.error=null),nr(s,l),null!=(null==(n=e.config)?void 0:n.removed)&&(e.config.removed?U.needRefresh=!0:U.removedScripts=U.removedScripts.filter(e=>e.props.id!==t.id)),(s.config.removed?a:o)<0){s.message="";const e=s.config.removed?"removedScripts":"scripts";U[e]=[...U[e],s]}},RemoveScripts(e){U.removedScripts=U.removedScripts.filter(t=>!e.includes(t.props.id))}}),(0,S.sY)(Xi)},6291:(e,t,n)=>{var l={"./arrow.svg":7864,"./author.svg":6263,"./code.svg":4237,"./cog.svg":8527,"./command.svg":6337,"./filter.svg":1691,"./home.svg":6447,"./info.svg":6396,"./more.svg":485,"./plus.svg":336,"./question.svg":934,"./refresh.svg":1727,"./search.svg":2574,"./toggle-off.svg":3882,"./toggle-on.svg":6276,"./trash.svg":2981,"./undo.svg":418};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(l,e)){var t=new r("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}o.keys=()=>c.keys(l),o.resolve=a,e.exports=o,o.id=6291},7462:(e,t,n)=>{"use strict";function l(){return l=c.assign?c.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)c.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},l.apply(this,arguments)}n.d(t,{Z:()=>l})}},C={};function k(e){var t=C[e];if(void 0!==t)return t.exports;var n=C[e]={exports:{}};return x[e].call(n.exports,n,n.exports,k),n.exports}k.m=x,h=[],k.O=(e,t,n,l)=>{if(!t){var o=1/0;for(r=0;r<h.length;r++){for(var[t,n,l]=h[r],a=!0,s=0;s<t.length;s++)(!1&l||o>=l)&&c.keys(k.O).every(e=>k.O[e](t[s]))?t.splice(s--,1):(a=!1,l<o&&(o=l));if(a){h.splice(r--,1);var i=n();void 0!==i&&(e=i)}}return e}l=l||0;for(var r=h.length;r>0&&h[r-1][2]>l;r--)h[r]=h[r-1];h[r]=[t,n,l]},k.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return k.d(t,{a:t}),t},y=c.getPrototypeOf?e=>c.getPrototypeOf(e):e=>e.__proto__,k.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=c.create(null);k.r(n);var l={};b=b||[null,y({}),y([]),y(y)];for(var o=2&t&&e;"object"==typeof o&&!~b.indexOf(o);o=y(o))c.getOwnPropertyNames(o).forEach(t=>l[t]=()=>e[t]);return l.default=()=>e,k.d(n,l),n},k.d=(e,t)=>{for(var n in t)k.o(t,n)&&!k.o(e,n)&&c.defineProperty(e,n,{enumerable:!0,get:t[n]})},k.o=(e,t)=>c.prototype.hasOwnProperty.call(e,t),k.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&c.defineProperty(e,Symbol.toStringTag,{value:"Module"}),c.defineProperty(e,"__esModule",{value:!0})},k.j=360,(()=>{var e={360:0};k.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[a,s,i]=n,r=0;if(a.some(t=>0!==e[t])){for(l in s)k.o(s,l)&&(k.m[l]=s[l]);if(i)var c=i(k)}for(t&&t(n);r<a.length;r++)o=a[r],k.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return k.O(c)},n=self.webpackChunkviolentmonkey=self.webpackChunkviolentmonkey||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var _=k.O(void 0,[386,84],()=>k(8843));_=k.O(_)})()}